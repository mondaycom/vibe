import { Story, Canvas, Meta } from "@storybook/addon-docs";
import { FunctionArgument, FunctionArguments } from "../../../storybook";
import useSwitch from "../index";
import Toggle from "../../../components/Toggle/Toggle";
import Typography from "../../../components/Typography/Typography";
import styles from "./useSwitch.stories.module.scss";

<Meta title="Hooks/useSwitch" />

# useSwitch

- [Overview](#overview)
- [Variants](#variants)
- [Arguments](#arguments)
- [Returns](#returns)
- [Feedback](#feedback)

## Overview

Hook for controlling boolean state on components, e.g. Toggle, by exposing state and a handler

<Canvas>
  <Story name="Overview">
    {() => {
      const { isChecked, onChange } = useSwitch();
      return (
        <div className={styles.switchContainer}>
          <Toggle onChange={onChange} isSelected={isChecked} />
          <Typography>
            <code>isChecked: {isChecked.toString()}</code>
          </Typography>
        </div>
      );
    }}
  </Story>
</Canvas>

## Variants

### Disabled

Hook can have argument of `isDisabled` to not allow trigger `onChange` (or the custom passed `onChange`) and change returned `isChecked` value.

<Canvas>
  <Story name="Disabled">
    {() => {
      const { isChecked, onChange } = useSwitch({ isDisabled: true });
      return (
        <div className={styles.switchContainer}>
          <Toggle onChange={onChange} isSelected={isChecked} />
          <Typography>
            <code>isChecked: {isChecked.toString()}</code>
          </Typography>
        </div>
      );
    }}
  </Story>
</Canvas>

### Default (initial) value

Hook can have argument of `defaultChecked` to control the **_initial_** value returned from it.

<Canvas>
  <Story name="Default">
    {() => {
      const defaultChecked = true;
      const { isChecked, onChange } = useSwitch({ defaultChecked });
      return (
        <div className={styles.switchContainer}>
          <Toggle onChange={onChange} isSelected={isChecked} />
          <Typography element="div">
            <code>isChecked: {isChecked.toString()}</code>
            <code>defaultChecked: {defaultChecked.toString()}</code>
          </Typography>
        </div>
      );
    }}
  </Story>
</Canvas>

## Arguments

<FunctionArguments>
  <FunctionArgument name="options" type="Object">
    <FunctionArgument name="isChecked" type="boolean" description="Value to override the hook state." />
    <FunctionArgument
      name="defaultChecked"
      type="boolean"
      description="Value to override the hook initial state (init hook with 'true' instead of 'false')."
    />
    <FunctionArgument
      name="onChange"
      type="(value: boolean) => void"
      description="Callback function to execute when hook 'change' triggered."
    />
    <FunctionArgument
      name="isDisabled"
      type="boolean"
      description="Value that, if passed as 'true', prevents hook from trigger 'change' lifecycle."
    />
  </FunctionArgument>
</FunctionArguments>

## Returns

<FunctionArguments>
  <FunctionArgument name="result" type="Object">
    <FunctionArgument name="isChecked" type="boolean" description="Returned value of current state." />
    <FunctionArgument
      name="onChange"
      type="() => void"
      description="Returned handler function to trigger the hook 'change' lifecycle."
    />
  </FunctionArgument>
</FunctionArguments>
