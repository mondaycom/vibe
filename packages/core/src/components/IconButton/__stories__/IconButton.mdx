import { Meta } from "@storybook/blocks";
import IconButton from "../IconButton";
import DialogContentContainer from "../../DialogContentContainer/DialogContentContainer";
import { Add, Bolt, Broom, HighlightColorBucket, Pin, Show } from "@vibe/icons";
import { TipCheckYourself, TipMenuButton } from "./IconButton.stories.helpers";
import * as IconButtonStories from "./IconButton.stories";

<Meta of={IconButtonStories} />

# IconButton

Icon button is a square button contains only icon with no visible text labels used mostly in control bars.

<Canvas of={IconButtonStories.Overview} />

### Import

```js
import { IconButton } from "@vibe/core";
```

## Props

<PropsTable />

## Usage

<UsageGuidelines
  guidelines={[
    <>
      Icon button will always appear with a <StorybookLink page="Components/Tooltip">tooltip</StorybookLink> while
      hovering, defining the icon’s meaning.
    </>,
    "Use an icon button when a user can perform an inline action on this page and there's no room for a default button.",
    "Use icon button when you want to display an active state of a button.",
    "Use a Primary icon button when it's the most important action to take.",
    "Use icon button only when the icons is clear and understandable.",
    "Icon buttons are often used when there are 2 or 3 adjacent icons buttons that perform actions on a single item presented in a row."
  ]}
/>

<TipCheckYourself />

## Accessibility

<UsageGuidelines
  guidelines={[
    <>
      Provide an <code>id</code> for the IconButton to enable proper accessibility associations and unique
      identification.
    </>,
    <>
      Always provide an accessible name using either <code>ariaLabel</code> prop or <code>tooltipContent</code> prop.
      The component automatically uses <code>tooltipContent</code> as the accessible name if no <code>ariaLabel</code>{" "}
      is provided.
    </>,
    <>
      Use <code>ariaLabel</code> prop when you need a different accessible name than the tooltip text, or when the icon
      button doesn't have a tooltip.
    </>,
    <>
      Use <code>ariaLabeledBy</code> prop when an external element provides the accessible name for the icon button.
      Pass the <code>id</code> of that external element.
    </>,
    <>
      Use <code>ariaHasPopup</code> prop when the icon button opens a menu, dialog, or popup.
    </>,
    <>
      Use <code>ariaExpanded</code> prop to indicate when a popup or menu opened by the icon button is currently open (
      <code>true</code>) or closed (<code>false</code>).
    </>,
    <>
      Use <code>ariaControls</code> prop to link the icon button to the element it controls. Pass the <code>id</code> of
      the controlled element.
    </>,
    <>
      Use <code>aria-describedby</code> prop to link the icon button to additional descriptive text. Pass the{" "}
      <code>id</code> of the descriptive element.
    </>,
    <>
      Use <code>aria-pressed</code> prop for toggle icon buttons to indicate their current pressed state (
      <code>true</code>, <code>false</code>, or <code>mixed</code>).
    </>,
    <>
      Use <code>aria-hidden</code> prop appropriately to hide the icon button from screen readers when necessary, but
      use sparingly as it removes the button from the accessibility tree entirely.
    </>,
    <>
      Use <code>tabIndex</code> prop to control the icon button's position in the keyboard navigation order. The default
      value allows normal tab navigation.
    </>,
    <>
      Provide <code>disabledReason</code> prop when disabling an icon button to give users context about why the button
      is unavailable. This will be displayed in the tooltip.
    </>
  ]}
/>

## Variants

### Kinds

There can be more than one button in a screen, but to create the hierarchy of actions we need to use button kinds.

<Canvas of={IconButtonStories.Kinds} />

<TipMenuButton />
### Sizes

<Canvas of={IconButtonStories.Sizes} />

### Active

<Canvas of={IconButtonStories.Active} />

### Disabled

Set disable button for something that isn’t usable. Use a tooltip on hover in order to indicate the reason of the disabled action.

<Canvas of={IconButtonStories.Disabled} />

## Do’s and Don’ts

<ComponentRules
  rules={[
    {
      positive: {
        component: (
          <DialogContentContainer>
            <IconButton icon={Pin} ariaLabel="Pin to top" />
            <IconButton icon={Show} ariaLabel="Show all" />
            <IconButton icon={HighlightColorBucket} ariaLabel="Show color" />
            <IconButton icon={Broom} ariaLabel="Clear style" />
          </DialogContentContainer>
        ),
        description:
          "Use Icon button when action is lower priority than a regular action or there’s no space available to place a button."
      },
      negative: {
        component: <IconButton icon={Add} kind="primary" ariaLabel="Add item" />,
        description: (
          <>
            Don’t use Icon button as the main action on the page. Instead, use the{" "}
            <StorybookLink page="Components/Button">Button component</StorybookLink> with an icon.
          </>
        )
      }
    },
    {
      positive: {
        component: <IconButton icon={Bolt} ariaLabel="Quick Search" />,
        description: "Always provide ariaLabel or tooltipContent"
      },
      negative: {
        component: <IconButton icon={Bolt} />,
        description: "Don’t use icon button without adding a tooltip while hovering."
      }
    }
  ]}
/>

## Use cases and examples

### Icon button as toolbar button

<Canvas of={IconButtonStories.IconButtonAsToolbarButton} />

### Icon button as close button

<Canvas of={IconButtonStories.IconButtonAsCloseButton} />

## Related components

<RelatedComponents componentsNames={["Button", "MenuButton", "Icon"]} />
