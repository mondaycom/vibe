import{n as E}from"./_tslib-BMUU9Vyh.js";import{j as u}from"./jsx-runtime-DDzbWKUH.js";import{r as p}from"./index-Hemj67b4.js";import{a as v,n as m}from"./link-ByEAMSgF.js";import{e as h}from"./iframe-Bno0Q8OD.js";import{s as L}from"./withStaticProps-DibdfTK_.js";const{STORY_CHANGED:R,SELECT_STORY:g}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:T,addons:f}=__STORYBOOK_MODULE_PREVIEW_API__,{global:P}=__STORYBOOK_MODULE_GLOBAL__;var k=Object.defineProperty,S=(e,t)=>{for(var n in t)k(e,n,{get:t[n],enumerable:!0})},b="links",{document:l,HTMLElement:x}=P;function $(e){let t={},n=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let r=0;r<n.length;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}return t}var w=e=>f.getChannel().emit(g,e),C=(e,t)=>new Promise(n=>{let{location:r}=l,o=$(r.search).id,a=e||o.split("--",2)[0],i=`/story/${h(a,t)}`,_=r.pathname.replace(/iframe\.html$/,""),O=`${r.origin+_}?${Object.entries({path:i}).map(c=>`${c[0]}=${c[1]}`).join("&")}`;n(O)}),d=e=>{let{target:t}=e;if(!(t instanceof x))return;let n=t,{sbKind:r,sbStory:o}=n.dataset;(r||o)&&(e.preventDefault(),w({kind:r,story:o}))},s=!1,D=()=>{s||(s=!0,l.addEventListener("click",d))},I=()=>{s&&(s=!1,l.removeEventListener("click",d))},Y=T({name:"withLinks",parameterName:b,wrapper:(e,t)=>(D(),f.getChannel().once(R,I),e(t))});const{definePreview:z}=__STORYBOOK_MODULE_PREVIEW_API__;var j={};S(j,{decorators:()=>y});var y=[Y],V=L(({page:e,story:t="",children:n,size:r,className:o})=>{const[a,i]=p.useState("");return p.useEffect(()=>{(function(){E(this,void 0,void 0,function*(){const _=yield C(e,t);i(_)})})()},[e,t]),u.jsx(m,{href:a,target:m.targets.TOP,withoutSpacing:!0,size:r,className:o,children:n})},{sizes:v});export{V as m};
