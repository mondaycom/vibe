import{R as a,r as u}from"./index-Hemj67b4.js";import{R as se}from"./index-D63y3F3s.js";import{c as m}from"./index-BpvXyOxN.js";import{T as Y}from"./Text-C0CU0_Vh.js";import{g as I,b as C}from"./test-ids-utils-9ISiqDto.js";import{I as de}from"./IconButton-BIAWrK7n.js";import{I as ue}from"./Icon-zHybxhV-.js";import{N as W,k as ce}from"./function-utils-6EQ2u6TA.js";import{H as fe}from"./Heading-NvFrzz5O.js";import{F as U}from"./Flex-DIvs4XZj.js";import{a as me}from"./CloseSmall-CIab6kaf.js";import{u as pe}from"./index-8zVcErkr.js";import{B as z}from"./Button-DEM-Hn8V.js";import{L as he}from"./LayerProvider-Dnq0uwbT.js";import{i as ye}from"./ssr-utils-Do6V6AqB.js";import{a as ge}from"./withStaticProps-DfSG2La2.js";var ve=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'],be="Tab",_e="Escape";function c(e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=e,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}c.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=M('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach((function(t){t.addEventListener("click",this._show)}).bind(this));const e=this.$el;return this._closers=M("[data-a11y-dialog-hide]",this.$el).filter(function(t){return t.closest('[aria-modal="true"], [data-a11y-dialog]')===e}).concat(M('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach((function(t){t.addEventListener("click",this._hide)}).bind(this)),this._fire("create"),this};c.prototype.show=function(e){if(this.shown)return this;this._previouslyFocused=document.activeElement;const t=e&&e.target?e.target:null;return t&&Object.is(this._previouslyFocused,document.body)&&(this._previouslyFocused=t),this.$el.removeAttribute("aria-hidden"),this.shown=!0,X(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",e),this};c.prototype.hide=function(e){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",e),this):this};c.prototype.destroy=function(){return this.hide(),this._openers.forEach((function(e){e.removeEventListener("click",this._show)}).bind(this)),this._closers.forEach((function(e){e.removeEventListener("click",this._hide)}).bind(this)),this._fire("destroy"),this._listeners={},this};c.prototype.on=function(e,t){return typeof this._listeners[e]>"u"&&(this._listeners[e]=[]),this._listeners[e].push(t),this};c.prototype.off=function(e,t){var o=(this._listeners[e]||[]).indexOf(t);return o>-1&&this._listeners[e].splice(o,1),this};c.prototype._fire=function(e,t){var o=this._listeners[e]||[],i=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(i),o.forEach((function(n){n(this.$el,t)}).bind(this))};c.prototype._bindKeypress=function(e){const t=document.activeElement;t&&t.closest('[aria-modal="true"]')!==this.$el||(this.shown&&e.key===_e&&this.$el.getAttribute("role")!=="alertdialog"&&(e.preventDefault(),this.hide(e)),this.shown&&e.key===be&&Ae(this.$el,e))};c.prototype._maintainFocus=function(e){this.shown&&!e.target.closest('[aria-modal="true"]')&&!e.target.closest("[data-a11y-dialog-ignore-focus-trap]")&&X(this.$el)};function we(e){return Array.prototype.slice.call(e)}function M(e,t){return we((t||document).querySelectorAll(e))}function X(e){var t=e.querySelector("[autofocus]")||e;t.focus()}function Ee(e){return M(ve.join(","),e).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})}function Ae(e,t){var o=Ee(e),i=o.indexOf(document.activeElement);t.shiftKey&&i===0?(o[o.length-1].focus(),t.preventDefault()):!t.shiftKey&&i===o.length-1&&(o[0].focus(),t.preventDefault())}function D(){M("[data-a11y-dialog]").forEach(function(e){new c(e)})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):window.requestAnimationFrame?window.requestAnimationFrame(D):window.setTimeout(D,16));const Se=()=>{const[e,t]=a.useState(null),o=a.useCallback(i=>{i!==null&&t(new c(i))},[]);return[e,o]},Le=({id:e,alertDialog:t})=>{const[o,i]=Se(),n=t?"alertdialog":"dialog",r=e+"-title";return a.useEffect(()=>()=>{o&&o.destroy()},[o]),[o,{container:{id:e,ref:i,role:n,tabIndex:-1,"aria-modal":!0,"aria-hidden":!0,"aria-labelledby":r},dialog:{role:"document"},title:{id:r}}]},Me="_container_1ienr_1",qe={container:Me},x=({className:e,id:t,"data-testid":o,children:i})=>a.createElement(Y,{type:"text1",id:t,"data-testid":o||I(C.MODAL_CONTENT,t),className:m(qe.container,e),ellipsis:!1},i);Object.assign(x,{displayName:"ModalContent"});try{x.displayName="LegacyModalContent",x.__docgenInfo={description:"",displayName:"LegacyModalContent",props:{className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const Ne="_container_m31vh_1",Ce="_icon_m31vh_4",xe="_description_m31vh_9",Te="_closeButton_m31vh_13",k={container:Ne,icon:Ce,description:xe,closeButton:Te},T=({className:e,title:t,children:o,titleClassName:i,description:n="",descriptionClassName:r,icon:l,closeModal:d=W,iconSize:h=24,iconClassName:s,closeButtonAriaLabel:f="close",id:g,"data-testid":E})=>a.createElement("div",{className:m(k.container,e),"data-testid":E||I(C.MODAL_HEADER,g)},o||a.createElement(U,{align:"start",gap:"small",className:i},l&&a.createElement(ue,{className:m(k.icon,s),icon:l,iconType:"svg",iconSize:h,ignoreFocusStyle:!0}),a.createElement(fe,{id:g,maxLines:2},t)),n&&a.createElement(Y,{type:"text2",maxLines:2,className:m(k.description,r)},n),a.createElement("div",{className:m(k.closeButton)},a.createElement(de,{key:"xxs",onClick:d,ariaLabel:f,icon:me,kind:"tertiary",size:"small"})));Object.assign(T,{displayName:"ModalHeader"});try{T.displayName="LegacyModalHeader",T.__docgenInfo={description:"",displayName:"LegacyModalHeader",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"ElementContent"}},description:{defaultValue:{value:""},description:"Description of the modal - pure string description is a recommended standard, use JSX ability only if there is a need to add links",name:"description",required:!1,type:{name:"ElementContent"}},icon:{defaultValue:null,description:"Icon to be rendered before the title",name:"icon",required:!1,type:{name:"SubIcon"}},titleClassName:{defaultValue:null,description:"Class name for the title",name:"titleClassName",required:!1,type:{name:"string"}},closeModal:{defaultValue:null,description:"closes the Modal. No need to provide it, it is being provided by the modal",name:"closeModal",required:!1,type:{name:"() => void"}},descriptionClassName:{defaultValue:null,description:"Class name for the description",name:"descriptionClassName",required:!1,type:{name:"string"}},iconSize:{defaultValue:{value:"24"},description:"Size of the icon",name:"iconSize",required:!1,type:{name:"number"}},iconClassName:{defaultValue:null,description:"class name for the icon",name:"iconClassName",required:!1,type:{name:"string"}},closeButtonAriaLabel:{defaultValue:{value:"close"},description:"Aria label for the close button",name:"closeButtonAriaLabel",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}function Ve(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}else return Array.from(e)}var O=!1;if(typeof window<"u"){var K={get passive(){O=!0}};window.addEventListener("testPassive",null,K),window.removeEventListener("testPassive",null,K)}var _=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),p=[],w=!1,H=-1,q=void 0,v=void 0,N=void 0,J=function(t){return p.some(function(o){return!!(o.options.allowTouchMove&&o.options.allowTouchMove(t))})},V=function(t){var o=t||window.event;return J(o.target)||o.touches.length>1?!0:(o.preventDefault&&o.preventDefault(),!1)},Be=function(t){if(N===void 0){var o=!!t&&t.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;if(o&&i>0){var n=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);N=document.body.style.paddingRight,document.body.style.paddingRight=n+i+"px"}}q===void 0&&(q=document.body.style.overflow,document.body.style.overflow="hidden")},G=function(){N!==void 0&&(document.body.style.paddingRight=N,N=void 0),q!==void 0&&(document.body.style.overflow=q,q=void 0)},$e=function(){return window.requestAnimationFrame(function(){if(v===void 0){v={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,o=t.scrollY,i=t.scrollX,n=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-o,document.body.style.left=-i,setTimeout(function(){return window.requestAnimationFrame(function(){var r=n-window.innerHeight;r&&o>=n&&(document.body.style.top=-(o+r))})},300)}})},Q=function(){if(v!==void 0){var t=-parseInt(document.body.style.top,10),o=-parseInt(document.body.style.left,10);document.body.style.position=v.position,document.body.style.top=v.top,document.body.style.left=v.left,window.scrollTo(o,t),v=void 0}},ke=function(t){return t?t.scrollHeight-t.scrollTop<=t.clientHeight:!1},Fe=function(t,o){var i=t.targetTouches[0].clientY-H;return J(t.target)?!1:o&&o.scrollTop===0&&i>0||ke(o)&&i<0?V(t):(t.stopPropagation(),!0)},Ie=function(t,o){if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!p.some(function(n){return n.targetElement===t})){var i={targetElement:t,options:o||{}};p=[].concat(Ve(p),[i]),_?$e():Be(o),_&&(t.ontouchstart=function(n){n.targetTouches.length===1&&(H=n.targetTouches[0].clientY)},t.ontouchmove=function(n){n.targetTouches.length===1&&Fe(n,t)},w||(document.addEventListener("touchmove",V,O?{passive:!1}:void 0),w=!0))}},Oe=function(){_&&(p.forEach(function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null}),w&&(document.removeEventListener("touchmove",V,O?{passive:!1}:void 0),w=!1),H=-1),_?Q():G(),p=[]},De=function(t){if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}p=p.filter(function(o){return o.targetElement!==t}),_&&(t.ontouchstart=null,t.ontouchmove=null,w&&p.length===0&&(document.removeEventListener("touchmove",V,O?{passive:!1}:void 0),w=!1)),_?Q():G()};function Pe({instance:e}){u.useEffect(()=>()=>Oe(),[]),u.useEffect(()=>(e==null||e.on("show",()=>Ie(e.$el,{reserveScrollBarGap:!0})),e==null||e.on("hide",()=>De(e.$el)),()=>{e==null||e.off("show"),e==null||e.off("hide")}),[e])}function He(e,t){return u.useCallback((o=!1)=>{let i,n;if(e){const{top:r,right:l}=e.getBoundingClientRect(),{top:d,left:h,width:s,height:f}=(t==null?void 0:t.$el.childNodes[1].getBoundingClientRect())||{};i={transform:`translate(${l-h-s/2}px, ${r-d-f/2}px) scale(0.6)`,opacity:0},n={transform:"translate(0, 0) scale(1)",opacity:1}}else i={transform:"scale(0.70)",opacity:.4},n={transform:"scale(1)",opacity:1};return o?[[n,i],{duration:100,easing:"cubic-bezier(0.4, 0, 1, 1)"}]:[[i,n],{duration:100,easing:"cubic-bezier(0, 0, 0.35, 1)"}]},[t,e])}const Re=[ce.ESCAPE];function ze({instance:e,show:t,triggerElement:o,onClose:i,alertDialog:n}){const[r,l]=u.useState(!1),d=He(o,e),h=u.useCallback(s=>{!n&&(e!=null&&e.$el.contains(document.activeElement))&&(s.stopPropagation(),i==null||i())},[n,e==null?void 0:e.$el,i]);return pe({callback:h,capture:!0,keys:Re}),u.useEffect(()=>{var s,f,g;if(t)l(!0),e==null||e.show(),(e==null?void 0:e.$el.childNodes[1].animate)&&((f=e==null?void 0:(s=e.$el.childNodes[1]).animate)==null||f.call(s,...d()));else if(e==null?void 0:e.$el.childNodes[1].animate){const A=(g=e==null?void 0:e.$el.childNodes[1])==null?void 0:g.animate(...d(!0));A==null||A.finished.then(()=>{l(!1),e==null||e.hide()})}else l(!1),e==null||e.hide()},[t,e,d]),{shouldShow:r}}const Ke="_container_tzwid_1",je={container:Ke},B=({className:e,children:t})=>a.createElement("div",{className:m(je.container,e)},t);Object.assign(B,{displayName:"ModalFooter"});try{B.displayName="LegacyModalFooter",B.__docgenInfo={description:"",displayName:"LegacyModalFooter",props:{className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const F=u.forwardRef(({primaryButtonText:e,secondaryButtonText:t,disablePrimaryButton:o,onPrimaryButtonClick:i,onSecondaryButtonClick:n,className:r,id:l,"data-testid":d},h)=>a.createElement(B,{id:l,className:r,"data-testid":d||I(C.MODAL_FOOTER_BUTTONS,l)},a.createElement(U,{justify:"end",gap:"small"},t&&a.createElement(z,{onClick:n,kind:"tertiary"},t),a.createElement(z,{onClick:i,disabled:o},e))));Object.assign(F,{displayName:"ModalFooterButtons"});try{F.displayName="LegacyModalFooterButtons",F.__docgenInfo={description:"",displayName:"LegacyModalFooterButtons",props:{primaryButtonText:{defaultValue:null,description:"",name:"primaryButtonText",required:!0,type:{name:"string"}},secondaryButtonText:{defaultValue:null,description:"",name:"secondaryButtonText",required:!1,type:{name:"string"}},disablePrimaryButton:{defaultValue:null,description:"",name:"disablePrimaryButton",required:!1,type:{name:"boolean"}},onPrimaryButtonClick:{defaultValue:null,description:"",name:"onPrimaryButtonClick",required:!1,type:{name:"() => void"}},onSecondaryButtonClick:{defaultValue:null,description:"",name:"onSecondaryButtonClick",required:!1,type:{name:"() => void"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}var Z=(e=>(e.DEFAULT="default",e.FULL_WIDTH="full-width",e))(Z||{});const P=e=>e.type===T,Ye=e=>e.type===x,j=e=>[B,F].some(t=>e.type===t),We=(e,t)=>{if(!t.some(P)&&!e)throw new Error("Title prop is mandatory for Modal when HeaderModal isn't provided. Validation failed.")},Ue="_container_bon99_1",Xe="_overlay_bon99_2",Je="_dialog_bon99_28",Ge="_full_bon99_43",Qe="_spacing_bon99_46",b={container:Ue,overlay:Xe,dialog:Je,default:"_default_bon99_40",full:Ge,spacing:Qe},Ze=({classNames:e={container:"",overlay:"",modal:""},id:t,show:o,title:i="",description:n="",onClose:r=W,alertDialog:l=!1,children:d,triggerElement:h,width:s="default",closeButtonAriaLabel:f="Close",contentSpacing:g=!1,zIndex:E=1e4,unmountOnClose:A=!0,"data-testid":ee})=>{const y=u.useMemo(()=>d?a.Children.toArray(d):[],[d]);We(i,y);const[S,$]=Le({id:t,alertDialog:l}),te=u.useCallback(()=>{l||r==null||r()},[l,r]);Pe({instance:S});const{shouldShow:oe}=ze({instance:S,show:o,triggerElement:h,onClose:r,alertDialog:l}),ie=u.useMemo(()=>{const{id:L}=$.title,R=y.find(P);return R?u.cloneElement(R,{id:L,closeModal:r}):a.createElement(T,{title:i,description:n,closeModal:r,id:L,closeButtonAriaLabel:f})},[$.title,y,i,n,r,f]),ne=u.useMemo(()=>y.find(Ye)||a.createElement(x,null,y.filter(L=>!P(L)&&!j(L))),[y]),ae=u.useMemo(()=>y.find(j)||null,[y]),re=s!=="default"&&s!=="full-width",le=a.createElement(he,{layerRef:{current:S==null?void 0:S.$el}},a.createElement("div",{...$.container,className:m(b.container,e.container),"data-testid":ee||I(C.MODAL,t),style:{"--monday-modal-z-index":E}},a.createElement("div",{onClick:te,className:m(b.overlay,e.overlay),"data-testid":C.MODAL_OVERLAY}),a.createElement("div",{...$.dialog,className:m(b.dialog,e.modal,{[b.default]:s==="default",[b.full]:s==="full-width",[b.spacing]:g}),style:{width:re?s:null}},ie,ne,ae)));return A&&!oe?null:ye()?se.createPortal(le,document.body):null},yt=ge(Ze,{width:Z});try{LegacyModal.displayName="LegacyModal",LegacyModal.__docgenInfo={description:"",displayName:"LegacyModal",props:{id:{defaultValue:null,description:"Id of the modal, used internally and for accessibility",name:"id",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}},show:{defaultValue:null,description:"Show/hide the Dialog",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:{value:""},description:"Heading for the modal, mandatory when ModalHeader isn't provided in children",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:{value:""},description:"Description for the modal title",name:"description",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"Called when the modal is closed (by close button/click outside/esc key)",name:"onClose",required:!0,type:{name:"() => void"}},alertDialog:{defaultValue:{value:"false"},description:`Makes the dialog behave like a modal (preventing closing on click outside of
ESC key)..`,name:"alertDialog",required:!1,type:{name:"boolean"}},triggerElement:{defaultValue:null,description:"Used for the fromOrigin animation",name:"triggerElement",required:!1,type:{name:"Element"}},width:{defaultValue:{value:"default"},description:"Set the modal's width. Can be one of the presets or any custom size",name:"width",required:!1,type:{name:"string"}},closeButtonAriaLabel:{defaultValue:{value:"Close"},description:"Aria label for the close button",name:"closeButtonAriaLabel",required:!1,type:{name:"string"}},contentSpacing:{defaultValue:{value:"false"},description:"Add gaps between parts of the modal",name:"contentSpacing",required:!1,type:{name:"boolean"}},classNames:{defaultValue:{value:'{ container: "", overlay: "", modal: "" }'},description:"classNames for specific parts of the dialog",name:"classNames",required:!1,type:{name:"{ container?: string; overlay?: string; modal?: string; }"}},children:{defaultValue:null,description:"Dialog content",name:"children",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | ReactElement<any, string | JSXElementConstructor<any>>[]"}},zIndex:{defaultValue:{value:"10000"},description:"z-index attribute of the container",name:"zIndex",required:!1,type:{name:"number"}},unmountOnClose:{defaultValue:{value:"true"},description:"When `false`, the modal will remain in the DOM when closed",name:"unmountOnClose",required:!1,type:{name:"boolean"}}}}}catch{}export{x as L,yt as M,F as a,B as b,T as c};
