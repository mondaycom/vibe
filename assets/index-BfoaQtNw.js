import{e as E}from"./iframe-olVDhROu.js";const{STORY_CHANGED:f,SELECT_STORY:m}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:v,addons:_}=__STORYBOOK_MODULE_PREVIEW_API__,{global:L}=__STORYBOOK_MODULE_GLOBAL__;var h=Object.defineProperty,R=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})},T="links",{document:i,HTMLElement:u}=L;function P(e){let t={},n=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let r=0;r<n.length;r++){let a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||"")}return t}var k=e=>_.getChannel().emit(m,e),Y=(e,t)=>new Promise(n=>{let{location:r}=i,a=P(r.search).id,p=e||a.split("--",2)[0],c=`/story/${E(p,t)}`,O=r.pathname.replace(/iframe\.html$/,""),d=`${r.origin+O}?${Object.entries({path:c}).map(s=>`${s[0]}=${s[1]}`).join("&")}`;n(d)}),l=e=>{let{target:t}=e;if(!(t instanceof u))return;let n=t,{sbKind:r,sbStory:a}=n.dataset;(r||a)&&(e.preventDefault(),k({kind:r,story:a}))},o=!1,b=()=>{o||(o=!0,i.addEventListener("click",l))},g=()=>{o&&(o=!1,i.removeEventListener("click",l))},C=v({name:"withLinks",parameterName:T,wrapper:(e,t)=>(b(),_.getChannel().once(f,g),e(t))});const{definePreview:w}=__STORYBOOK_MODULE_PREVIEW_API__;var D={};R(D,{decorators:()=>I});var I=[C];export{Y as h};
