import{j as V}from"./jsx-runtime-lwGtIXvq.js";import{r as c,R as B}from"./index-CTZeEbLr.js";import{c as Z}from"./index-BpvXyOxN.js";import{u as Q}from"./useMergeRef-Do2VYePL.js";import{u as ee}from"./useIsomorphicLayoutEffect-BBiFUoiz.js";import{a as te,b as ne}from"./BaseItem-CWfJc2Qx.js";import{u as se}from"./index-gB5zY9qh.js";import{k as d}from"./keyCodes-DhPS-8Mm.js";const ae=["option","listitem","menuitem","tab","treeitem"],re={listbox:"option",menu:"menuitem",menubar:"menuitem",tablist:"tab",tree:"treeitem",list:"listitem"},ie=e=>re[e]||"listitem",k=(e,t,r)=>r||`${e}-item-${t}`,P=e=>e instanceof HTMLElement&&ae.includes(e.getAttribute("role")||""),x=e=>P(e)?e.getAttribute("aria-disabled")!=="true":!1,le={ul:"li",ol:"li",nav:"a"},oe=e=>le[e]||"div",T=(e,t,r,i=!0)=>{const n=r==="next"?1:-1;let s=t+n;for(;s>=0&&s<e.length;){if(x(e[s]))return s;s+=n}if(i)for(s=r==="next"?0:e.length-1;s!==t;){if(x(e[s]))return s;if(s+=n,s<0||s>=e.length)break}},F=e=>e.findIndex(x),S=e=>{for(let t=e.length-1;t>=0;t--)if(x(e[t]))return t;return-1},ue=e=>e.findIndex(t=>P(t)?t.getAttribute("aria-selected")==="true":!1),ce=({defaultFocusIndex:e,onFocusChange:t,listId:r,disabled:i})=>{const n=c.useRef([]),[s,b]=c.useState(!1),[o,p]=c.useState(-1),[l,a]=c.useState(void 0),m=c.useCallback((u,f)=>{i||(p(f),a(u),t==null||t(f,u))},[t,i]),v=c.useCallback((u,f)=>{n.current[f]=u},[]);return c.useEffect(()=>{if(i||s)return;const u=n.current;if(u.length===0||u.every(E=>E===null))return;const f=ue(u),R=f!==-1?f:e,D=u[R];if(D){const E=k(r,R,D.id);m(E,R),b(!0)}},[r,i,e,m,s]),{focusIndex:o,activeDescendantId:l,updateFocusedItem:m,registerItem:v,childrenRefs:n}},de=[d.UP_ARROW,d.DOWN_ARROW,d.HOME,d.END,d.PAGE_UP,d.PAGE_DOWN],C=10,fe=(e,t)=>{const r=Math.max(0,t-C);for(let n=r;n<t;n++)if(x(e[n]))return n;const i=F(e);return i!==-1?i:void 0},me=(e,t)=>{const r=Math.min(e.length-1,t+C);for(let n=r;n>t;n--)if(x(e[n]))return n;const i=S(e);return i!==-1?i:void 0},pe=({focusIndex:e,childrenRefs:t,listId:r,updateFocusedItem:i,componentRef:n,disabled:s})=>{const b=c.useCallback(o=>{if(s)return;const{key:p}=o,l=t.current;let a;switch(p){case d.UP_ARROW:o.preventDefault(),a=T(l,e,"prev");break;case d.DOWN_ARROW:o.preventDefault(),a=T(l,e,"next");break;case d.HOME:o.preventDefault(),a=F(l),a===-1&&(a=void 0);break;case d.END:o.preventDefault(),a=S(l),a===-1&&(a=void 0);break;case d.PAGE_UP:o.preventDefault(),a=fe(l,e);break;case d.PAGE_DOWN:o.preventDefault(),a=me(l,e);break;default:return}if(a!==void 0){const m=l[a];if(m){const v=k(r,a,m.id);i(v,a),m.focus()}}},[e,t,r,i,s]);se({keys:de,callback:b,ref:n})},be="_baseList_1n8jr_6",Ie={baseList:be},w=c.forwardRef(({className:e,id:t,as:r="ul",children:i,ariaLabel:n,ariaDescribedBy:s,"aria-controls":b,role:o="listbox",size:p="medium",maxHeight:l,focusOnMount:a=!1,defaultFocusIndex:m=0,onFocusChange:v,style:u,disabled:f=!1,"data-testid":R,...D},E)=>{const _=c.useRef(null),G=Q(E,_),W=r,{focusIndex:I,activeDescendantId:j,updateFocusedItem:L,registerItem:M,childrenRefs:h}=ce({defaultFocusIndex:m,onFocusChange:v,listId:t,disabled:f});pe({focusIndex:I,childrenRefs:h,listId:t,updateFocusedItem:L,componentRef:_,disabled:f}),ee(()=>{a&&_.current&&requestAnimationFrame(()=>{var A;(A=_.current)==null||A.focus()})},[a]);const U=c.useMemo(()=>{const A=B.Children.toArray(i);return h.current=h.current.slice(0,A.length),A.map((y,g)=>{if(!B.isValidElement(y))return y;const O=k(t,g,y.props.id),q=h.current[g],N=q==null||P(q),J=typeof y.type=="string",$=y.props.role||(J?void 0:ie(o)),H=Y=>{h.current[g]=Y},X={index:g,id:O,highlighted:I===g&&N,tabIndex:I===g&&N?0:-1,component:oe(r),size:p,role:$,refCallback:H};return V.jsx(te,{value:X,children:y},O)})},[i,r,I,t,o,p,h]),K=c.useMemo(()=>({activeItemIndex:I,updateFocusedItem:L,registerItem:M,size:p}),[I,L,M,p]),z=c.useMemo(()=>l?{...u,"--baselist-max-height":typeof l=="number"?`${l}px`:l}:u,[l,u]);return V.jsx(ne,{value:K,children:V.jsx(W,{ref:G,id:t,className:Z(Ie.baseList,e),style:z,"aria-label":n,"aria-describedby":s,"aria-controls":b,"aria-activedescendant":j,"aria-disabled":f||void 0,role:o,tabIndex:-1,"data-testid":R,...D,children:U})})});try{w.displayName="BaseList",w.__docgenInfo={description:"",displayName:"BaseList",props:{id:{defaultValue:null,description:"A unique identifier for the list. Required to ensure unique IDs across micro-frontends.",name:"id",required:!0,type:{name:"string"}},as:{defaultValue:{value:"ul"},description:'The HTML element to render as. Defaults to "ul".',name:"as",required:!1,type:{name:"BaseListElement"}},children:{defaultValue:null,description:"The child elements inside the list.",name:"children",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | ReactElement<any, string | JSXElementConstructor<any>>[]"}},ariaLabel:{defaultValue:null,description:"The ARIA label describing the list. Required for accessibility when ariaDescribedBy is not provided.",name:"ariaLabel",required:!1,type:{name:"string"}},ariaDescribedBy:{defaultValue:null,description:"The ID of an element that describes the list.",name:"ariaDescribedBy",required:!1,type:{name:"string"}},"aria-controls":{defaultValue:null,description:"The ID of an element controlled by the list.",name:"aria-controls",required:!1,type:{name:"string"}},role:{defaultValue:{value:"listbox"},description:'The ARIA role of the list. Defaults to "listbox".',name:"role",required:!1,type:{name:"AriaRole"}},size:{defaultValue:{value:"medium"},description:"The size of the list items.",name:"size",required:!1,type:{name:"BaseItemSizes"}},maxHeight:{defaultValue:null,description:"The maximum height of the list container. Enables scrolling when content exceeds this height.",name:"maxHeight",required:!1,type:{name:"string | number"}},focusOnMount:{defaultValue:{value:"false"},description:"If true, the list will automatically focus on mount.",name:"focusOnMount",required:!1,type:{name:"boolean"}},defaultFocusIndex:{defaultValue:{value:"0"},description:"Index of the item that should be focused initially. Defaults to 0.",name:"defaultFocusIndex",required:!1,type:{name:"number"}},onFocusChange:{defaultValue:null,description:"Callback fired when the focused item changes.",name:"onFocusChange",required:!1,type:{name:"(index: number, id?: string) => void"}},disabled:{defaultValue:{value:"false"},description:"If true, disables all keyboard navigation and focus management.",name:"disabled",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}}}}}catch{}export{w as B};
