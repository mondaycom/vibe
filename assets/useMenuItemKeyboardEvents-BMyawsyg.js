import{j as ye}from"./jsx-runtime-lwGtIXvq.js";import{c as be}from"./index-BpvXyOxN.js";import{r as l,R as S}from"./index-CTZeEbLr.js";import{u as _e}from"./useMergeRef-C008K4k9.js";import{u as O}from"./useIsomorphicLayoutEffect-CtfxbExD.js";import{u as Me}from"./index-D4TxD6E0.js";import{u as V}from"./index-nBaTNWgC.js";import{k as I}from"./function-utils-CSFuT5hl.js";import{N as K,b as Ie,A as ve,E as Ee,H as Ve,d as qe}from"./useFullKeyboardListeners-BKDHN2eU.js";import{u as L}from"./index-BWKJv4Cj.js";import{g as ge}from"./typesciptCssModulesHelper-oFWQo8l_.js";import{a as Ce,g as he,b as ke}from"./test-ids-utils-B1IbFLmr.js";import{w as Se}from"./withStaticProps-DfSG2La2.js";import{S as le}from"./sizes-BOsbvv4u.js";import{u as te}from"./index-DEnqPy1V.js";function Oe(){const[e,n]=l.useState(null),u=typeof e=="number",a=l.useCallback((r,d)=>{n(d?r:null)},[n]),t=l.useCallback(()=>{n(null)},[n]);return{setSubMenuIsOpenByIndex:a,hasOpenSubMenu:u,openSubMenuIndex:e,setOpenSubMenuIndex:n,resetOpenSubMenuIndex:t}}function H({setActiveItemIndex:e,setOpenSubMenuIndex:n,onClose:u}){return l.useCallback((a={propagate:!1})=>{e(-1),n(null),u&&u(a)},[u,n,e])}try{H.displayName="useOnCloseMenu",H.__docgenInfo={description:"",displayName:"useOnCloseMenu",props:{setActiveItemIndex:{defaultValue:null,description:"",name:"setActiveItemIndex",required:!0,type:{name:"(index: number) => void"}},setOpenSubMenuIndex:{defaultValue:null,description:"",name:"setOpenSubMenuIndex",required:!0,type:{name:"(index: number) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(option: CloseMenuOption) => void"}}}}}catch{}const Ne=[I.ESCAPE,I.LEFT_ARROW,I.TAB];function W({hasOpenSubMenu:e,onCloseMenu:n,ref:u,onClose:a,isSubMenu:t,useDocumentEventListeners:r}){const d=l.useCallback(o=>{const s=o.key;e||s===I.LEFT_ARROW&&!t||[I.ESCAPE,I.LEFT_ARROW,I.TAB].includes(s)&&(n({propagate:!1}),a&&(a({propagate:!1},s),o.preventDefault(),o.stopPropagation()))},[a,e,n,t]);V({keys:Ne,callback:d,ref:r?void 0:u})}try{W.displayName="useCloseMenuOnKeyEvent",W.__docgenInfo={description:"",displayName:"useCloseMenuOnKeyEvent",props:{hasOpenSubMenu:{defaultValue:null,description:"",name:"hasOpenSubMenu",required:!0,type:{name:"boolean"}},onCloseMenu:{defaultValue:null,description:"",name:"onCloseMenu",required:!0,type:{name:"(option: CloseMenuOption) => void"}},ref:{defaultValue:null,description:"",name:"ref",required:!0,type:{name:"RefObject<HTMLElement>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(option: CloseMenuOption, key?: string) => void"}},isSubMenu:{defaultValue:null,description:"",name:"isSubMenu",required:!0,type:{name:"boolean"}},useDocumentEventListeners:{defaultValue:null,description:"",name:"useDocumentEventListeners",required:!0,type:{name:"boolean"}}}}}catch{}function P({hasOpenSubMenu:e,getNextSelectableIndex:n,getPreviousSelectableIndex:u,activeItemIndex:a,setActiveItemIndex:t,isVisible:r,ref:d,useDocumentEventListeners:o}){const s=l.useCallback(y=>{let _;if(e)return!1;y===K.DOWN?_=n(a):y===K.UP&&(_=u(a)),(_||_===0)&&t(_)},[a,n,u,e,t]),c=l.useCallback(()=>{s(K.UP)},[s]),f=l.useCallback(()=>{s(K.DOWN)},[s]),v=l.useCallback(y=>{r&&a===-1&&t(0)},[t,a,r]),b=l.useCallback(()=>{if(e)return;const y=n(-1);y!==-1&&t(y)},[e,n,t]),E=l.useCallback(()=>{if(e)return;const y=u(0);y!==-1&&t(y)},[e,u,t]),m=l.useMemo(()=>{if(!o)return{ref:d,preventDefault:!0,stopPropagation:!0}},[o,d]);V({keys:Ie,callback:f,...m}),V({keys:ve,callback:c,...m}),V({keys:Ee,callback:v,...m}),V({keys:Ve,callback:b,...m}),V({keys:qe,callback:E,...m})}try{P.displayName="useMenuKeyboardNavigation",P.__docgenInfo={description:"",displayName:"useMenuKeyboardNavigation",props:{hasOpenSubMenu:{defaultValue:null,description:"",name:"hasOpenSubMenu",required:!0,type:{name:"boolean"}},getNextSelectableIndex:{defaultValue:null,description:"",name:"getNextSelectableIndex",required:!0,type:{name:"(index: number) => number"}},getPreviousSelectableIndex:{defaultValue:null,description:"",name:"getPreviousSelectableIndex",required:!0,type:{name:"(index: number) => number"}},activeItemIndex:{defaultValue:null,description:"",name:"activeItemIndex",required:!0,type:{name:"number"}},setActiveItemIndex:{defaultValue:null,description:"",name:"setActiveItemIndex",required:!0,type:{name:"(index: number) => void"}},isVisible:{defaultValue:null,description:"",name:"isVisible",required:!0,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!0,type:{name:"RefObject<HTMLElement>"}},useDocumentEventListeners:{defaultValue:null,description:"",name:"useDocumentEventListeners",required:!0,type:{name:"boolean"}}}}}catch{}function N({ref:e}){const[n,u]=l.useState(!1),a=l.useCallback(r=>{const d=e&&e.current,o=r.target===d;u(o)},[u,e]),t=l.useCallback(()=>u(!1),[u]);return te({eventName:"mouseenter",callback:a,ref:e}),te({eventName:"mouseleave",callback:t,ref:e}),n}try{N.displayName="useIsMouseEnter",N.__docgenInfo={description:"",displayName:"useIsMouseEnter",props:{ref:{defaultValue:null,description:"",name:"ref",required:!0,type:{name:"RefObject<HTMLElement>"}}}}}catch{}function B({resetOpenSubMenuIndex:e,hasOpenSubMenu:n,ref:u,setActiveItemIndex:a}){const t=N({ref:u}),r=L(t);return O(()=>{t||t!==r&&(n||(e(),a(-1)))},[e,u,r,t,n,a]),t}try{B.displayName="useMouseLeave",B.__docgenInfo={description:"",displayName:"useMouseLeave",props:{resetOpenSubMenuIndex:{defaultValue:null,description:"",name:"resetOpenSubMenuIndex",required:!0,type:{name:"() => void"}},hasOpenSubMenu:{defaultValue:null,description:"",name:"hasOpenSubMenu",required:!0,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!0,type:{name:"RefObject<HTMLElement>"}},setActiveItemIndex:{defaultValue:null,description:"",name:"setActiveItemIndex",required:!0,type:{name:"(index: number) => void"}}}}}catch{}function R(e){return!!e.type.isSelectable&&!e.props.disabled}const Re=(e,n,u)=>n.props.id||`${e}-item-${u}`;try{R.displayName="isMenuChildSelectable",R.__docgenInfo={description:"",displayName:"isMenuChildSelectable",props:{}}}catch{}const U=({children:e})=>{const n=l.useCallback(a=>{let t;for(let r=1;r<=e.length;r++)if(t=(a+r)%e.length,R(e[t]))return t;return null},[e]),u=l.useCallback(a=>{let t;for(let r=e.length-1;r>0;r--)if(t=(a+r)%e.length,R(e[t]))return t;return null},[e]);return{getNextSelectableIndex:n,getPreviousSelectableIndex:u}};try{U.displayName="useAdjacentSelectableMenuIndex",U.__docgenInfo={description:"",displayName:"useAdjacentSelectableMenuIndex",props:{}}}catch{}function Y({onFocusWithin:e,onFocusWithinChange:n,isDisabled:u,onBlurWithin:a}){const t=l.useRef({isFocusWithin:!1}).current,r=l.useCallback(s=>{t.isFocusWithin||(e&&e(s),n&&n(!0),t.isFocusWithin=!0)},[e,n,t]),d=l.useCallback(s=>{const c=s.currentTarget;t.isFocusWithin&&!c.contains(s.relatedTarget)&&(a&&a(s),n&&n(!1),t.isFocusWithin=!1)},[a,n,t]),o=l.useMemo(()=>u?{focusWithinProps:{}}:{},[u]);return u?o:{focusWithinProps:{onFocus:r,onBlur:d}}}try{Y.displayName="useFocusWithin",Y.__docgenInfo={description:"",displayName:"useFocusWithin",props:{onFocusWithin:{defaultValue:null,description:"",name:"onFocusWithin",required:!1,type:{name:"(event: FocusEvent<Element, Element>) => void"}},onBlurWithin:{defaultValue:null,description:"",name:"onBlurWithin",required:!1,type:{name:"(event: FocusEvent<Element, Element>) => void"}},onFocusWithinChange:{defaultValue:null,description:"",name:"onFocusWithinChange",required:!1,type:{name:"(isWithinChange: boolean) => void"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}}}}}catch{}const $=({focusItemIndexOnMount:e,focusChildOnMount:n,getNextSelectableIndex:u,updateActiveItemIndex:a,setIsInitialFocusSet:t})=>{l.useEffect(()=>{if(e===-1)return;const r=R(n)?e:u(e);r!==null&&requestAnimationFrame(()=>{a(r),t(!0)})},[n,e,u,t,a])};try{$.displayName="useFocusOnMount",$.__docgenInfo={description:"",displayName:"useFocusOnMount",props:{focusItemIndexOnMount:{defaultValue:null,description:"",name:"focusItemIndexOnMount",required:!0,type:{name:"number"}},focusChildOnMount:{defaultValue:null,description:"",name:"focusChildOnMount",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},getNextSelectableIndex:{defaultValue:null,description:"",name:"getNextSelectableIndex",required:!0,type:{name:"(index: number) => number"}},updateActiveItemIndex:{defaultValue:null,description:"",name:"updateActiveItemIndex",required:!0,type:{name:"(index: number) => void"}},setIsInitialFocusSet:{defaultValue:null,description:"",name:"setIsInitialFocusSet",required:!0,type:{name:"(state: boolean) => void"}}}}}catch{}let xe=0;const Ae=()=>`menu-${xe++}`,z=e=>{const[n,u]=l.useState();return O(()=>{u(e||Ae())},[e]),n};try{z.displayName="useMenuId",z.__docgenInfo={description:"",displayName:"useMenuId",props:{}}}catch{}const Te="_menu_10tj4_1",Fe="_small_10tj4_11",Ke="_medium_10tj4_15",Le="_large_10tj4_19",ue={menu:Te,small:Fe,medium:Ke,large:Le},j=l.forwardRef(({id:e,className:n,size:u=le.MEDIUM,tabIndex:a=0,ariaLabel:t="Menu",ariaDescribedBy:r,children:d,isVisible:o=!0,onClose:s,onItemFocus:c,focusOnMount:f=!1,focusItemIndex:v=-1,focusItemIndexOnMount:b=-1,isSubMenu:E=!1,useDocumentEventListeners:m=!1,shouldScrollMenu:y=!1,"data-testid":_},h)=>{const i=l.useRef(null),se=_e(i,h),x=z(e),oe=l.useRef(null),[A,ie]=l.useState(v),[de,T]=l.useState(!1),q=l.useMemo(()=>S.Children.toArray(d).filter(M=>M.type.isMenuChild?!0:(console.error("Menu child must be a menuChild item (such as MenuItem, MenuDivider, MenuTitle, etc). This child is not supported: ",M),!1)),[d]),F=l.useCallback(p=>{var Q,ee,ne;ie(p);const M=q[p],Z=S.isValidElement(M)?((Q=M==null?void 0:M.props)==null?void 0:Q.id)||`${x}-item-${p}`:void 0;Z?(ee=i==null?void 0:i.current)==null||ee.setAttribute("aria-activedescendant",Z):(ne=i==null?void 0:i.current)==null||ne.removeAttribute("aria-activedescendant")},[q,x]),w=l.useCallback(p=>{c&&c(p),F(p),T(!1)},[F,c]),{setSubMenuIsOpenByIndex:ce,hasOpenSubMenu:g,openSubMenuIndex:me,setOpenSubMenuIndex:pe,resetOpenSubMenuIndex:G}=Oe(),k=H({setActiveItemIndex:w,setOpenSubMenuIndex:pe,onClose:s});Me({ref:i,callback:()=>k()}),W({hasOpenSubMenu:g,onCloseMenu:k,ref:i,onClose:s,isSubMenu:E,useDocumentEventListeners:m});const{getNextSelectableIndex:D,getPreviousSelectableIndex:J}=U({children:q});P({hasOpenSubMenu:g,getNextSelectableIndex:D,getPreviousSelectableIndex:J,activeItemIndex:A,setActiveItemIndex:w,isVisible:o,ref:i,useDocumentEventListeners:m}),B({resetOpenSubMenuIndex:G,hasOpenSubMenu:g,ref:i,setActiveItemIndex:w}),$({focusItemIndexOnMount:b,focusChildOnMount:q[b],getNextSelectableIndex:D,updateActiveItemIndex:F,setIsInitialFocusSet:T});const fe=l.useCallback(()=>{T(!0)},[T]),X=L(g);l.useEffect(()=>{var p;g||m||A>-1&&X&&((p=i==null?void 0:i.current)==null||p.focus())},[A,g,X,m]),O(()=>{!f||m||requestAnimationFrame(()=>{i&&i.current&&i.current.focus()})},[i,f,m]);const{focusWithinProps:C}=Y({onBlurWithin:()=>{k&&k()}});return ye.jsx("ul",{onFocus:C==null?void 0:C.onFocus,onBlur:C==null?void 0:C.onBlur,id:x,"data-testid":_||he(ke.MENU,e),"data-vibe":Ce.MENU,className:be(ue.menu,ge(ue,u),n),ref:se,tabIndex:a,"aria-label":t,role:"menu","aria-describedby":r,onMouseOver:fe,children:q&&S.Children.map(q,(p,M)=>S.isValidElement(p)?S.cloneElement(p,{...p==null?void 0:p.props,activeItemIndex:A,index:M,setActiveItemIndex:F,menuRef:i,resetOpenSubMenuIndex:G,isParentMenuVisible:o,setSubMenuIsOpenByIndex:ce,hasOpenSubMenu:M===me,closeMenu:k,id:Re(x,p,M),useDocumentEventListeners:m,isInitialSelectedState:de,shouldScrollMenu:y,getNextSelectableIndex:D,getPreviousSelectableIndex:J,isUnderSubMenu:E,splitMenuItemIconButtonRef:oe}):null)})});Object.assign(j,{isMenu:!0,supportFocusOnMount:!0});const en=Se(j,{sizes:le});try{j.displayName="Menu",j.__docgenInfo={description:"",displayName:"Menu",props:{size:{defaultValue:{value:"medium"},description:"Size of the menu.",name:"size",required:!1,type:{name:'"small" | "medium" | "large" | "xxs" | "xs"'}},tabIndex:{defaultValue:{value:"0"},description:"The tab index of the menu.",name:"tabIndex",required:!1,type:{name:"number"}},ariaLabel:{defaultValue:{value:"Menu"},description:"ARIA label for accessibility.",name:"ariaLabel",required:!1,type:{name:"string"}},ariaDescribedBy:{defaultValue:null,description:"ARIA description ID.",name:"ariaDescribedBy",required:!1,type:{name:"string"}},focusOnMount:{defaultValue:{value:"false"},description:"If true, the menu will automatically focus on mount.",name:"focusOnMount",required:!1,type:{name:"boolean"}},onItemFocus:{defaultValue:null,description:"Callback when a menu item gains focus.",name:"onItemFocus",required:!1,type:{name:"(index: number) => void"}},isVisible:{defaultValue:{value:"true"},description:"Controls the visibility of the menu.",name:"isVisible",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"Callback triggered when the menu closes.",name:"onClose",required:!1,type:{name:"(option: CloseMenuOption) => void"}},focusItemIndex:{defaultValue:{value:"-1"},description:"Index of the focused menu item.",name:"focusItemIndex",required:!1,type:{name:"number"}},isSubMenu:{defaultValue:{value:"false"},description:"If true, this menu is a submenu.",name:"isSubMenu",required:!1,type:{name:"boolean"}},useDocumentEventListeners:{defaultValue:{value:"false"},description:"If true, event listeners will be attached to the document.",name:"useDocumentEventListeners",required:!1,type:{name:"boolean"}},focusItemIndexOnMount:{defaultValue:{value:"-1"},description:"Index of the item that should be focused when the menu mounts.",name:"focusItemIndexOnMount",required:!1,type:{name:"number"}},shouldScrollMenu:{defaultValue:{value:"false"},description:"If true, enables scrolling within the menu.",name:"shouldScrollMenu",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The menu items.",name:"children",required:!1,type:{name:"ElementContent"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}function ae({ref:e,resetOpenSubMenuIndex:n,setSubMenuIsOpenByIndex:u,isActive:a,setActiveItemIndex:t,index:r,hasChildren:d,splitMenuItemIconButtonRef:o,splitMenuItem:s=!1}){const c=N({ref:e}),f=N({ref:o}),v=L(c),b=L(f);return O(()=>{f&&f!==b&&(a?u(r,!0):n())},[u,r,f,b,a,n]),O(()=>{if(c&&c!==v){if(!u||!n){console.error("MenuItem must be a first level child of a menu");return}n(),!a&&!s&&(t(r),d?u(r,!0):n()),a&&d&&u(r,!!c),!a&&s&&(t(r),f&&u(r,!0))}},[n,v,c,f,u,a,t,r,d,s]),c}try{ae.displayName="useMenuItemMouseEvents",ae.__docgenInfo={description:"",displayName:"useMenuItemMouseEvents",props:{ref:{defaultValue:null,description:"",name:"ref",required:!0,type:{name:"RefObject<HTMLElement>"}},resetOpenSubMenuIndex:{defaultValue:null,description:"",name:"resetOpenSubMenuIndex",required:!0,type:{name:"() => void"}},setSubMenuIsOpenByIndex:{defaultValue:null,description:"",name:"setSubMenuIsOpenByIndex",required:!0,type:{name:"(index: number, isOpen: boolean) => void"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},setActiveItemIndex:{defaultValue:null,description:"",name:"setActiveItemIndex",required:!0,type:{name:"(index: number) => void"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},hasChildren:{defaultValue:null,description:"",name:"hasChildren",required:!0,type:{name:"boolean"}},splitMenuItemIconButtonRef:{defaultValue:null,description:"",name:"splitMenuItemIconButtonRef",required:!1,type:{name:"RefObject<HTMLElement>"}},splitMenuItem:{defaultValue:{value:"false"},description:"",name:"splitMenuItem",required:!1,type:{name:"boolean"}}}}}catch{}const je=[I.ENTER,I.RIGHT_ARROW];function re({onClick:e,disabled:n,isActive:u,index:a,setActiveItemIndex:t,hasChildren:r,shouldShowSubMenu:d,setSubMenuIsOpenByIndex:o,menuRef:s,isMouseEnter:c,closeMenu:f,useDocumentEventListeners:v,splitMenuItem:b,isMouseEnterMenuItem:E,isMouseEnterIconButton:m}){const y=l.useCallback(_=>{if(!u&&!c)return;if(!t||!o){console.error("MenuItem must be a first level child of a menu");return}const h=_ instanceof KeyboardEvent;if(u&&r&&(t(a),!b||m)){o(a,!0);return}if(h&&b&&o(a,!0),d)return;const i=()=>{_.preventDefault(),e(_),f({propagate:!0})};if(h&&e&&!n&&u){if(_.key==="ArrowRight")return;i()}!h&&e&&!n&&c&&(u||(t(a),r&&o(a,!0)),(b&&E&&!m||!r)&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{i()})}))},[u,c,t,o,r,b,d,e,n,a,f,E,m]);return V({keys:je,callback:y,ref:v?void 0:s}),{onClickCallback:y}}try{re.displayName="useMenuItemKeyboardEvents",re.__docgenInfo={description:"",displayName:"useMenuItemKeyboardEvents",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},hasChildren:{defaultValue:null,description:"",name:"hasChildren",required:!0,type:{name:"boolean"}},shouldShowSubMenu:{defaultValue:null,description:"",name:"shouldShowSubMenu",required:!0,type:{name:"boolean"}},setSubMenuIsOpenByIndex:{defaultValue:null,description:"",name:"setSubMenuIsOpenByIndex",required:!0,type:{name:"(index: number, isOpen: boolean) => void"}},setActiveItemIndex:{defaultValue:null,description:"",name:"setActiveItemIndex",required:!0,type:{name:"(index: number) => void"}},menuRef:{defaultValue:null,description:"",name:"menuRef",required:!0,type:{name:"RefObject<HTMLElement>"}},isMouseEnter:{defaultValue:null,description:"",name:"isMouseEnter",required:!0,type:{name:"boolean"}},closeMenu:{defaultValue:null,description:"",name:"closeMenu",required:!0,type:{name:"(option: CloseMenuOption) => void"}},useDocumentEventListeners:{defaultValue:null,description:"",name:"useDocumentEventListeners",required:!0,type:{name:"boolean"}},splitMenuItem:{defaultValue:null,description:"",name:"splitMenuItem",required:!1,type:{name:"boolean"}},isMouseEnterMenuItem:{defaultValue:null,description:"",name:"isMouseEnterMenuItem",required:!1,type:{name:"boolean"}},isMouseEnterIconButton:{defaultValue:null,description:"",name:"isMouseEnterIconButton",required:!1,type:{name:"boolean"}}}}}catch{}export{en as M,re as a,Y as b,N as c,ae as u};
