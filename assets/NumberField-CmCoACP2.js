import{r as o,R as h}from"./index-Hemj67b4.js";import{c as V}from"./index-BpvXyOxN.js";import{B as Q}from"./BaseInput-CAV1fnr5.js";import{F as X}from"./FieldLabel-DfbhoA65.js";import{T as Y}from"./Text-CBUmQ7si.js";import{I as Z}from"./Icon-BF1oN_oR.js";import{I as B}from"./IconButton-DqT-Lx4F.js";import{F as L}from"./Flex-pz2uwxlA.js";import{g as O}from"./typesciptCssModulesHelper-Ji7rRrZn.js";import{n as ee}from"./Workspace-BIJf5qCK.js";import{r as te}from"./DropdownChevronDown-hX_A7Og1.js";import{u as ne}from"./useMergeRef-DQ4XPFxl.js";const $=({value:e,direction:r,step:a=1,min:t,max:s,allowOutOfBounds:m})=>{let n=(e??0)+r*a;return m||(t!==void 0&&(n=Math.max(t,n)),s!==void 0&&(n=Math.min(s,n))),n},ae=({value:e,onChange:r,min:a,max:t,step:s=1,disabled:m,readOnly:d,allowOutOfBounds:n,onValidityChange:u})=>{const[f,c]=o.useState(e===null?"":String(e));o.useEffect(()=>{const i=e===null?"":String(e);c(l=>e!==parseFloat(l)?i:l)},[e]);const b=o.useCallback(i=>{const l=i.target.value;if(l===""){c(""),r(null,i);return}if(!/^-?\d*\.?\d*$/.test(l))return;c(l);const I=l==="-"||l.endsWith(".");if(I&&l.length===1&&l.endsWith(".")){r(0,i);return}if(!I){const _=parseFloat(l);if(n){_!==e&&r(_,i);return}const x=Math.max(a??-1/0,Math.min(t??1/0,_));x!==e&&r(x,i)}},[r,n,a,t,e]);o.useEffect(()=>{if(!u)return;if(e===null){u(!0);return}const i=(a===void 0||e>=a)&&(t===void 0||e<=t);u(i)},[e,a,t,u]);const v=o.useCallback(i=>{if(m||d)return;const l=i.key==="ArrowUp",p=i.key==="ArrowDown";if(l||p){i.preventDefault();const _=$({value:e,direction:l?1:-1,step:s,min:a,max:t,allowOutOfBounds:n});r(_,i)}},[e,s,a,t,r,m,d,n]),g=!n&&e!==null&&a!==void 0&&e<=a,y=!n&&e!==null&&t!==void 0&&e>=t;return{inputValue:f,numericValue:e,onChange:b,onKeyDown:v,isAtMin:g,isAtMax:y}},re=({onChange:e,value:r,step:a=1,min:t,max:s,allowOutOfBounds:m,readOnly:d,inputRef:n})=>{const u=o.useCallback((b,v)=>{var y;if(d)return;const g=$({value:r,direction:b,step:a,min:t,max:s,allowOutOfBounds:m});e(g,v),(y=n.current)==null||y.focus()},[r,a,t,s,e,m,d,n]),f=o.useCallback(b=>{u(1,b)},[u]),c=o.useCallback(b=>{u(-1,b)},[u]);return{onIncrement:f,onDecrement:c}},ie="_infoText_x571r_1",le="_error_x571r_4",se="_success_x571r_7",ue="_disabled_x571r_10",oe="_readOnly_x571r_13",q={infoText:ie,error:le,success:se,disabled:ue,readOnly:oe},T=o.forwardRef(({id:e,text:r,error:a,success:t,disabled:s,readOnly:m},d)=>r?h.createElement(Y,{id:e,ref:d,className:V(q.infoText,{[q.error]:a,[q.success]:t,[q.disabled]:s,[q.readOnly]:m}),type:"text2"},r):null);try{T.displayName="InfoText",T.__docgenInfo={description:"",displayName:"InfoText",props:{id:{defaultValue:null,description:"The ID of the associated form element for aria-describedby.",name:"id",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"The text content to display.",name:"text",required:!0,type:{name:"string"}},error:{defaultValue:null,description:"If true, applies error styling to the info text.",name:"error",required:!1,type:{name:"boolean"}},success:{defaultValue:null,description:"If true, applies success styling to the info text.",name:"success",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, applies disabled styling to the info text.",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"If true, applies read-only styling to the info text.",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const de="_spinButton_1s2lh_1",ce="_large_1s2lh_1",me="_icon_1s2lh_5",pe="_medium_1s2lh_9",fe="_small_1s2lh_17",w={spinButton:de,large:ce,icon:me,medium:pe,small:fe},M=({inputId:e,onIncrement:r,onDecrement:a,disabled:t,size:s,isAtMin:m,isAtMax:d})=>{const n=V(w.spinButton,O(w,s)),u=w.icon,f=c=>{c.preventDefault()};return h.createElement(L,{direction:"column",align:"stretch",justify:"center",onMouseDown:f},h.createElement(B,{ariaLabel:"Increase",hideTooltip:!0,ariaControls:e,tabIndex:-1,onClick:r,disabled:t||d,size:null,className:n,iconClassName:u,icon:ee}),h.createElement(B,{ariaLabel:"Decrease",hideTooltip:!0,ariaControls:e,tabIndex:-1,onClick:a,disabled:t||m,size:null,className:n,iconClassName:u,icon:te}))};try{M.displayName="NumberFieldSpinButton",M.__docgenInfo={description:"",displayName:"NumberFieldSpinButton",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},onIncrement:{defaultValue:null,description:"",name:"onIncrement",required:!0,type:{name:"(event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void"}},onDecrement:{defaultValue:null,description:"",name:"onDecrement",required:!0,type:{name:"(event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"large"'},{value:'"medium"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},isAtMin:{defaultValue:null,description:"",name:"isAtMin",required:!1,type:{name:"boolean"}},isAtMax:{defaultValue:null,description:"",name:"isAtMax",required:!1,type:{name:"boolean"}}}}}catch{}const be="_numberField_tq3pf_1",he="_label_tq3pf_4",ye="_leftIcon_tq3pf_7",E={numberField:be,label:he,leftIcon:ye},K=o.forwardRef(({className:e,value:r,onChange:a,label:t,required:s,placeholder:m,infoText:d,error:n,success:u,disabled:f,readOnly:c,min:b,max:v,step:g=1,size:y="medium",leftIcon:i,"aria-label":l,id:p,"data-testid":I,allowOutOfBounds:_,onValidityChange:x,...z},W)=>{const N=o.useRef(null),H=ne(W,N),{inputValue:U,numericValue:F,onChange:j,onKeyDown:P,isAtMin:D,isAtMax:A}=ae({value:r,onChange:a,min:b,max:v,step:g,disabled:f,readOnly:c,allowOutOfBounds:_,onValidityChange:x}),{onIncrement:C,onDecrement:R}=re({onChange:a,value:F,step:g,min:b,max:v,allowOutOfBounds:_,readOnly:c,inputRef:N}),G=o.useMemo(()=>i?h.createElement(Z,{icon:i,className:E.leftIcon}):null,[i]),J=o.useMemo(()=>h.createElement(M,{inputId:p,onIncrement:C,onDecrement:R,disabled:f||c,size:y,isAtMin:D,isAtMax:A}),[p,C,R,f,c,y,D,A]),S=o.useMemo(()=>d&&p?`${p}-info-text`:void 0,[d,p]),k=o.useMemo(()=>t&&p?`${p}-label`:void 0,[t,p]);return h.createElement(L,{direction:"column",align:"stretch",gap:"xs",className:V(E.numberField,e)},h.createElement(X,{id:k,className:E.label,labelText:t,required:s,labelFor:p}),h.createElement(Q,{...z,"data-testid":I,ref:H,id:p,value:U,onChange:j,onKeyDown:P,placeholder:m,type:"text",inputMode:"numeric",inputRole:"spinbutton","aria-valuenow":F,"aria-valuemin":b,"aria-valuemax":v,"aria-required":s,"aria-label":l||t,"aria-labelledby":k,"aria-describedby":S,disabled:f,readOnly:c,size:y,error:n,success:u,renderLeft:G,renderRight:J}),h.createElement(T,{id:S,text:d,error:n,success:u,disabled:f,readOnly:c}))});try{K.displayName="NumberField",K.__docgenInfo={description:"",displayName:"NumberField",props:{value:{defaultValue:null,description:"The current value of the number field.",name:"value",required:!0,type:{name:"number"}},onChange:{defaultValue:null,description:`Callback fired when the value changes.
@param value - The new value.
@param event - The event that triggered the change.`,name:"onChange",required:!0,type:{name:"(value: number, event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element> | ChangeEvent<HTMLInputElement>) => void"}},required:{defaultValue:null,description:"If true, the input will be required.",name:"required",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"The placeholder text to display when the input is empty.",name:"placeholder",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"If true, the input will be in an error state.",name:"error",required:!1,type:{name:"boolean"}},success:{defaultValue:null,description:"If true, the input will be in a success state.",name:"success",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, the input will be disabled.",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"If true, the input will be read-only.",name:"readOnly",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"The minimum value allowed.",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"The maximum value allowed.",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"The amount to increment or decrement the value by.",name:"step",required:!1,type:{name:"number"}},size:{defaultValue:{value:"medium"},description:"The size of the input.",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"large"'},{value:'"medium"'}]}},leftIcon:{defaultValue:null,description:"An icon to display on the left side of the input.",name:"leftIcon",required:!1,type:{name:"SubIcon"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"The label for the input.",name:"label",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"The id of the input.\nRequired when `label` or `infoText` is provided for accessibility reasons.\nThe id of the input.\nRequired when `infoText` or `label` is provided for accessibility reasons.\nThe id of the input.",name:"id",required:!1,type:{name:"string"}},infoText:{defaultValue:null,description:"Informational text to display below the input.\nInformational text to display below the input.\nIf provided, an `id` is also required for accessibility.",name:"infoText",required:!1,type:{name:"string"}},allowOutOfBounds:{defaultValue:null,description:"If false, the value will be clamped to the min/max values on change.\nIf true, the value can exceed the min/max values.\nCan be used alongside `onValidityChange` to handle the validity of the value.",name:"allowOutOfBounds",required:!1,type:{name:"boolean"}},onValidityChange:{defaultValue:null,description:"Callback fired when the validity of the value changes (if it is within the min/max bounds).",name:"onValidityChange",required:!1,type:{name:"(isValid: boolean) => void"}}}}}catch{}export{K as N};
