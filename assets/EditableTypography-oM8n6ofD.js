import{j as c}from"./jsx-runtime-lwGtIXvq.js";import{r as i}from"./index-CTZeEbLr.js";import{c as f}from"./index-BpvXyOxN.js";import{u as U}from"./useMergeRef-Do2VYePL.js";import{u as X}from"./index-BxdhJjph.js";import{u as Y}from"./useIsomorphicLayoutEffect-BBiFUoiz.js";import{a as Z}from"./useClickableProps-f6_q31tC.js";import{k as R}from"./keyCodes-B-UZ88ng.js";const ee="_editableTypography_u70ct_3",te="_input_u70ct_11",ae="_textarea_u70ct_12",ne="_typography_u70ct_34",le="_disabled_u70ct_39",re="_hidden_u70ct_42",ie="_placeholder_u70ct_49",oe="_multiline_u70ct_52",s={editableTypography:ee,input:te,textarea:ae,typography:ne,disabled:le,hidden:re,placeholder:ie,multiline:oe},se=2,A=i.forwardRef(({id:V,className:D,"data-testid":K,value:r,onChange:m,onClick:y,onKeyDown:h,readOnly:q=!1,ariaLabel:g="",placeholder:u,clearable:j,typographyClassName:b,component:B,isEditMode:_,autoSelectTextOnEditMode:w,onEditModeChange:E,tooltipProps:H,type:L,weight:F,multiline:d=!1},O)=>{const W=i.useRef(null),$=U(O,W),[a,P]=i.useState(_||!1),[n,p]=i.useState(r),v=X(r),t=i.useRef(null),x=i.useRef(null);i.useEffect(()=>{!a&&r!==v&&r!==n&&p(r)},[v,a,r,n]),i.useEffect(()=>{P(_)},[_]);function z(e){y==null||y(e),I(e)}function I(e){q||a||(e.preventDefault(),T(!0))}function T(e){E==null||E(e),P(e)}function C(){if(T(!1),r===n)return;if(!n&&!(j&&u)){p(r);return}p(n),m==null||m(n)}function k(){C()}function N(e){if(!e.nativeEvent.isComposing){if(e.key===R.ENTER){if(d&&e.shiftKey)return;e.preventDefault(),e.stopPropagation(),C()}e.key===R.ESCAPE&&(e.preventDefault(),e.stopPropagation(),T(!1),p(r)),h==null||h(e)}}function S(e){p(e.target.value)}const G=Z(I);function J(){var e,o;if((o=(e=t.current)==null?void 0:e.focus)==null||o.call(e),t.current){const l=t.current,M=l.value.length;l.setSelectionRange(M,M)}}function Q(){var e,o;(o=(e=t.current)==null?void 0:e.select)==null||o.call(e)}return i.useEffect(()=>{a&&(J(),w&&Q())},[w,a]),Y(()=>{var o;if(!x.current)return;const{width:e}=x.current.getBoundingClientRect();if((o=t==null?void 0:t.current)==null||o.style.setProperty("--input-width",`${e}px`),d){const l=t==null?void 0:t.current;l==null||l.style.setProperty("--input-height","auto"),l==null||l.style.setProperty("--input-height",`${l.scrollHeight+se}px`)}},[n,a]),c.jsxs("div",{ref:$,id:V,"aria-label":g,"data-testid":K,className:f(s.editableTypography,D),role:a?null:"button",onClick:z,onKeyDown:G,children:[a&&(d?c.jsx("textarea",{ref:t,className:f(s.textarea,b),value:n,onChange:S,onKeyDown:N,onBlur:k,"aria-label":g,placeholder:u,role:"textbox",rows:1}):c.jsx("input",{ref:t,className:f(s.input,b),value:n,onChange:S,onKeyDown:N,onBlur:k,"aria-label":g,placeholder:u,role:"input"})),c.jsx(B,{ref:x,"aria-hidden":a,className:f(s.typography,b,{[s.hidden]:a,[s.disabled]:q,[s.placeholder]:!n&&u,[s.multiline]:!a&&d}),tabIndex:0,tooltipProps:H,weight:F,type:L,ellipsis:!d,children:n||u})]})});try{A.displayName="EditableTypography",A.__docgenInfo={description:"",displayName:"EditableTypography",props:{component:{defaultValue:null,description:"The typography component used in view mode.",name:"component",required:!0,type:{name:"ElementType<any, keyof IntrinsicElements>"}},typographyClassName:{defaultValue:null,description:"Class name applied to the typography component.",name:"typographyClassName",required:!0,type:{name:"string"}},clearable:{defaultValue:null,description:"If true, shows the placeholder when empty.",name:"clearable",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"The text or heading type.",name:"type",required:!1,type:{name:"HeadingType | TextType"}},weight:{defaultValue:null,description:"The text or heading weight.",name:"weight",required:!1,type:{name:'"medium" | "light" | "normal" | "bold"'}},multiline:{defaultValue:{value:"false"},description:"If true, enables multi-line editing.",name:"multiline",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"The current value of the text.",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback fired when the value changes.",name:"onChange",required:!1,type:{name:"(value: string) => void"}},onClick:{defaultValue:null,description:"Callback fired when the component is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void"}},onKeyDown:{defaultValue:null,description:"Callback fired when a key is pressed inside the input/textarea element.",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void"}},readOnly:{defaultValue:{value:"false"},description:"If true, the text is read-only and cannot be edited.",name:"readOnly",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder text displayed when the value is empty.",name:"placeholder",required:!1,type:{name:"string"}},ariaLabel:{defaultValue:{value:""},description:"The label of the component for accessibility.",name:"ariaLabel",required:!1,type:{name:"string"}},isEditMode:{defaultValue:null,description:"Controls whether the component is in edit mode.",name:"isEditMode",required:!1,type:{name:"boolean"}},autoSelectTextOnEditMode:{defaultValue:null,description:"If true, automatically selects all text when entering edit mode.",name:"autoSelectTextOnEditMode",required:!1,type:{name:"boolean"}},onEditModeChange:{defaultValue:null,description:"Callback fired when the edit mode changes.",name:"onEditModeChange",required:!1,type:{name:"(isEditMode: boolean) => void"}},tooltipProps:{defaultValue:null,description:"Props to customize the tooltip.",name:"tooltipProps",required:!1,type:{name:"Partial<TooltipProps>"}}}}}catch{}export{A as E};
