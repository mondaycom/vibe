import{j as l}from"./jsx-runtime-lwGtIXvq.js";import{r as i,R as y}from"./index-CTZeEbLr.js";import{c as ve}from"./index-BpvXyOxN.js";import{r as we}from"./index-8JwjhRSi.js";import{u as Ee}from"./useIsomorphicLayoutEffect-BBiFUoiz.js";import{u as Se}from"./useMergeRef-Do2VYePL.js";import{N as C}from"./function-utils-CgdCy1w7.js";import{g as K}from"./typesciptCssModulesHelper-DQ-2Bs84.js";import{g as Ve,C as qe}from"./test-ids-utils-B4e5wuRR.js";import{a as xe}from"./constants-BzKxXCTJ.js";import{H as Me,b as Ie,D as je}from"./DialogConstants-C6vctR8T.js";import{D as n,T as ze}from"./Tooltip-WZdDHKve.js";import{D as b}from"./DialogContentContainer-BeKFb57x.js";import{r as De}from"./Workspace-CefzN9Lt.js";import{c as Oe}from"./withStaticProps-BEcHOprC.js";import{w as Ne}from"./withStaticProps-DfSG2La2.js";var Y=(t=>(t.XXS="xxs",t.XS="xs",t.SMALL="small",t.MEDIUM="medium",t.LARGE="large",t))(Y||{}),U=(t=>(t.START="start",t.END="end",t))(U||{});const Ae="_wrapper_1ojji_6",Pe="_active_1ojji_60",ke="_sizeXxs_1ojji_72",Re="_sizeXs_1ojji_80",Le="_sizeSmall_1ojji_88",Be="_sizeMedium_1ojji_96",Ke="_sizeLarge_1ojji_105",Xe="_disabled_1ojji_114",He="_text_1ojji_125",Ye="_innerText_1ojji_129",o={wrapper:Ae,"focus-visible":"_focus-visible_1ojji_32",active:Pe,sizeXxs:ke,sizeXs:Re,sizeSmall:Le,sizeMedium:Be,sizeLarge:Ke,disabled:Xe,text:He,innerText:Ye},X={main:8,secondary:0},H=[n.hideShowTriggers.ESCAPE_KEY,n.hideShowTriggers.TAB_KEY],_=i.forwardRef(({id:t,className:F,openDialogComponentClassName:v,children:w,component:W=De,componentPosition:E="start",size:c="small",open:f=!1,onClick:$=C,zIndex:G=null,ariaLabel:J="Menu",closeMenuOnItemClick:S,dialogOffset:V=X,dialogPosition:Q=n.positions.BOTTOM_START,dialogClassName:Z,dialogPaddingSize:q=b.sizes.SMALL,dialogShowTriggerIgnoreClass:ee,dialogHideTriggerIgnoreClass:te,onMenuHide:x=C,onMenuShow:M=C,disabled:u=!1,text:p,tooltipContent:ie,tooltipProps:ne,tooltipTriggers:ae=["mouseleave"],tooltipPosition:oe="right",startingEdge:re="bottom",removeTabCloseTrigger:I=!1,tooltipReferenceClassName:se,hideWhenReferenceHidden:j=!0,dialogContainerSelector:le,active:ue,triggerElement:g="button",showTooltipOnlyOnTriggerElement:de,"data-testid":pe,closeDialogOnContentClick:z=!1,ariaControls:me},ce)=>{const D=i.useRef(null),O=Se(ce,D),[r,d]=i.useState(f),N=ue??r,m=i.useCallback(e=>{x(),d(!1);const a=D.current;!a||!e||window.requestAnimationFrame(()=>{a.focus()})},[x]),A=i.useCallback(e=>{const a=H.includes(e.key);(a||S)&&e.propagate&&m(a)},[S,m]),fe=i.useCallback((e,a)=>{m(r&&H.includes(a))},[m,r]),ge=i.useCallback(()=>{d(!0),M()},[d,M]),[h,he]=i.useMemo(()=>{const e=new Set([n.hideShowTriggers.CLICK_OUTSIDE,n.hideShowTriggers.TAB_KEY,n.hideShowTriggers.ESCAPE_KEY]);return z&&(e.add(n.hideShowTriggers.CONTENT_CLICK),e.add(n.hideShowTriggers.ENTER)),I&&e.delete(n.hideShowTriggers.TAB_KEY),[y.Children.toArray(w).map(s=>{if(!y.isValidElement(s))return null;const T={};return s.type&&s.type.supportFocusOnMount&&(T.focusOnMount=!0,e.delete(n.hideShowTriggers.ESCAPE_KEY)),s.type&&s.type.isMenu&&(T.onClose=A),y.cloneElement(s,T)}),Array.from(e)]},[w,A,z,I]),Te=i.useMemo(()=>h.length===0?null:l.jsx(b,{size:q,type:b.types.POPOVER,role:null,children:h}),[h,q]),ye=i.useMemo(()=>({...X,...V}),[V]),Ce=e=>{if(u){e.currentTarget.blur();return}$(e)},P=W,be=i.useMemo(()=>{switch(c){case"xxs":case"xs":return 16;case"small":case"medium":case"large":return 20;default:return 24}},[c]),k=P?l.jsx(P,{size:be.toString(),role:"img","aria-hidden":"true"}):null;Ee(()=>{d(f)},[f,d]);const _e=g==="button"?{ref:O}:{active:N,disabled:u,ref:we.isForwardRef(g)?O:void 0},R=l.jsxs(g,{id:t,"data-testid":pe||Ve(qe.MENU_BUTTON,t),"data-vibe":xe.MENU_BUTTON,type:"button",className:ve(o.wrapper,F,K(o,Oe(`size-${c}`)),{[o.active]:N,[K(o,v)]:r&&v,[o.disabled]:u,[o.text]:p}),"aria-haspopup":"true","aria-expanded":r,"aria-controls":me,"aria-label":!p&&J,onMouseUp:Ce,"aria-disabled":u,..._e,children:[E==="start"&&k,p&&l.jsx("span",{className:o.innerText,children:p}),E==="end"&&k]}),L=e=>l.jsx(n,{wrapperClassName:Z,position:Q,containerSelector:le,startingEdge:re,animationType:"expand",content:Te,moveBy:ye,showTrigger:u?[]:["click","enter"],hideTrigger:he,showTriggerIgnoreClass:ee,hideTriggerIgnoreClass:te,useDerivedStateFromProps:!0,onDialogDidShow:ge,onDialogDidHide:fe,zIndex:G,isOpen:r,hideWhenReferenceHidden:j,children:e}),B=e=>l.jsx(ze,{content:ie,position:oe,showTrigger:"mouseenter",hideTrigger:ae,referenceWrapperClassName:se,hideWhenReferenceHidden:j,...ne,children:e});return de?L(B(R)):B(L(R))}),ut=Ne(_,{sizes:Y,paddingSizes:je,dialogPositions:Ie,hideTriggers:Me,componentPositions:U});try{_.displayName="MenuButton",_.__docgenInfo={description:"",displayName:"MenuButton",props:{active:{defaultValue:null,description:"If true, the button is in an active state.",name:"active",required:!1,type:{name:"boolean"}},openDialogComponentClassName:{defaultValue:null,description:"Class name applied to the button when the dialog is open.",name:"openDialogComponentClassName",required:!1,type:{name:"string"}},component:{defaultValue:null,description:"The component used as the button icon.",name:"component",required:!1,type:{name:"(() => Element) | ElementType<any, keyof IntrinsicElements>"}},size:{defaultValue:{value:"small"},description:"The size of the button.",name:"size",required:!1,type:{name:"MenuButtonSize"}},open:{defaultValue:{value:"false"},description:"If true, the menu is open.",name:"open",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"Callback fired when the button is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>) => void"}},zIndex:{defaultValue:{value:"null"},description:"The z-index of the menu.",name:"zIndex",required:!1,type:{name:"number"}},ariaLabel:{defaultValue:{value:"Menu"},description:"The label of the button for accessibility.",name:"ariaLabel",required:!1,type:{name:"string"}},dialogClassName:{defaultValue:null,description:"Class name applied to the menu dialog wrapper.",name:"dialogClassName",required:!1,type:{name:"string"}},dialogOffset:{defaultValue:{value:"{ main: 8, secondary: 0 }"},description:"The offset of the menu relative to the button.",name:"dialogOffset",required:!1,type:{name:"DialogOffset"}},dialogPaddingSize:{defaultValue:{value:"DialogContentContainer.sizes.SMALL"},description:"The padding size inside the menu dialog.",name:"dialogPaddingSize",required:!1,type:{name:"DialogSize"}},dialogPosition:{defaultValue:{value:"Dialog.positions.BOTTOM_START"},description:"The position of the menu dialog relative to the button.",name:"dialogPosition",required:!1,type:{name:"DialogPosition"}},dialogShowTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent showing the dialog when present.",name:"dialogShowTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogHideTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent hiding the dialog when present.",name:"dialogHideTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogContainerSelector:{defaultValue:null,description:"The container selector in which to append the dialog.",name:"dialogContainerSelector",required:!1,type:{name:"string"}},startingEdge:{defaultValue:{value:"bottom"},description:"The starting edge alignment of the menu.",name:"startingEdge",required:!1,type:{name:"string"}},onMenuShow:{defaultValue:null,description:"Callback fired when the menu is shown.",name:"onMenuShow",required:!1,type:{name:"() => void"}},onMenuHide:{defaultValue:null,description:"Callback fired when the menu is hidden.",name:"onMenuHide",required:!1,type:{name:"() => void"}},text:{defaultValue:null,description:"The text displayed inside the button.",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If true, the button is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},tooltipContent:{defaultValue:null,description:"The tooltip content displayed when hovering over the button.",name:"tooltipContent",required:!1,type:{name:"string"}},removeTabCloseTrigger:{defaultValue:{value:"false"},description:"If true, removes the tab key from the hide trigger.",name:"removeTabCloseTrigger",required:!1,type:{name:"boolean"}},tooltipTriggers:{defaultValue:{value:'["mouseleave"]'},description:"The triggers that cause the tooltip to show or hide.",name:"tooltipTriggers",required:!1,type:{name:"DialogTriggerEvent | DialogTriggerEvent[]"}},tooltipPosition:{defaultValue:{value:"right"},description:"The position of the tooltip.",name:"tooltipPosition",required:!1,type:{name:"TooltipPositions"}},tooltipReferenceClassName:{defaultValue:null,description:"Class name applied to the tooltip reference wrapper.",name:"tooltipReferenceClassName",required:!1,type:{name:"string"}},tooltipProps:{defaultValue:null,description:"Additional props for customizing the tooltip.",name:"tooltipProps",required:!1,type:{name:"Partial<TooltipProps>"}},hideWhenReferenceHidden:{defaultValue:{value:"true"},description:"If true, hides the menu and tooltip when the button is not visible.",name:"hideWhenReferenceHidden",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The content inside the menu button.",name:"children",required:!1,type:{name:"ElementContent"}},componentPosition:{defaultValue:{value:"start"},description:"The position of the component relative to the text.",name:"componentPosition",required:!1,type:{name:"MenuButtonComponentPosition"}},triggerElement:{defaultValue:null,description:"The element used as the trigger for the menu.",name:"triggerElement",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},closeMenuOnItemClick:{defaultValue:null,description:"If true, closes the menu when a menu item is clicked.",name:"closeMenuOnItemClick",required:!1,type:{name:"boolean"}},showTooltipOnlyOnTriggerElement:{defaultValue:null,description:"If true, the tooltip appears only when hovering over the trigger element, not the menu dialog.",name:"showTooltipOnlyOnTriggerElement",required:!1,type:{name:"boolean"}},closeDialogOnContentClick:{defaultValue:{value:"false"},description:"If true, closes the menu when clicking inside the dialog.",name:"closeDialogOnContentClick",required:!1,type:{name:"boolean"}},ariaControls:{defaultValue:null,description:"The ARIA control of the menu button for accessibility.",name:"ariaControls",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{ut as M};
