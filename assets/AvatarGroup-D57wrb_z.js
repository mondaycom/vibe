import{j as o}from"./jsx-runtime-lwGtIXvq.js";import{r as u,R as ae}from"./index-CTZeEbLr.js";import{c as A}from"./index-BpvXyOxN.js";import{C as ne}from"./Counter-Bg7iKVS8.js";import{M as ie}from"./MenuButton-DR4tiFt2.js";import{M as W}from"./useMenuItemKeyboardEvents-B-RzuVUT.js";import{M as re}from"./MenuItem-BSaj_43_.js";import{A as M,C as oe}from"./Avatar-RIwmYjIN.js";import{T as le}from"./Tooltip-CT7Hoq9W.js";import{F as V}from"./Flex-DYzKCQWz.js";import{V as se}from"./VirtualizedList-BhChyItu.js";import{u as v}from"./index-gB5zY9qh.js";import{u as X}from"./index-CkU0kzyk.js";import{u as ue}from"./index-BlWfPOxY.js";import{k as Z}from"./useClickableProps-BJf5EuJX.js";import{g as de}from"./typesciptCssModulesHelper-Ji7rRrZn.js";import{a as pe}from"./test-ids-utils-B1IbFLmr.js";const z=u.forwardRef(({avatarProps:e,menuItemProps:n,...l},r)=>{const t=u.useCallback(()=>o.jsx(M,{...e}),[e]);return o.jsx(re,{...l,...n,icon:t,ref:r})});Object.assign(z,{isMenuChild:!0,isSelectable:!0});try{z.displayName="AvatarMenuItem",z.__docgenInfo={description:"MenuItem with Avatar instead of Icon",displayName:"AvatarMenuItem",props:{avatarProps:{defaultValue:null,description:"Props passed to the avatar component.",name:"avatarProps",required:!1,type:{name:"AvatarProps"}},menuItemProps:{defaultValue:null,description:"Props passed to the menu item component.",name:"menuItemProps",required:!1,type:{name:"MenuItemProps"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}},isMenuChild:{defaultValue:null,description:"",name:"isMenuChild",required:!1,type:{name:"boolean"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"boolean"}}}}}catch{}const ce="_scrollableContainer_5mit9_1",me="_virtualizedTooltipContainer_5mit9_10",$={scrollableContainer:ce,virtualizedTooltipContainer:me},x=Object.freeze({maxItemsWithoutScroll:10,itemLineHeight:34,itemLineWidth:150}),j=({avatarItems:e=[],avatarRenderer:n,type:l,tooltipContainerAriaLabel:r,tooltipContentContainerRef:t})=>{const a=u.useMemo(()=>e.map(c=>({value:c,height:x.itemLineHeight})),[e]),s=Math.min(e.length,x.maxItemsWithoutScroll),i={height:x.itemLineHeight*s,minWidth:x.itemLineWidth};return o.jsx("div",{className:$.virtualizedTooltipContainer,"aria-label":r,ref:t,tabIndex:-1,children:o.jsx(se,{items:a,itemRenderer:(c,m,y)=>n(c.value,m,y,l,!1),role:"treegrid",scrollableClassName:$.scrollableContainer,getItemId:(c,m)=>String(m),style:i})})};try{j.displayName="AvatarGroupCounterTooltipContentVirtualizedList",j.__docgenInfo={description:"",displayName:"AvatarGroupCounterTooltipContentVirtualizedList",props:{avatarItems:{defaultValue:{value:"[]"},description:"The list of avatars displayed in the virtualized tooltip.",name:"avatarItems",required:!1,type:{name:"AvatarItem[]"}},avatarRenderer:{defaultValue:null,description:"Function to render each avatar item.",name:"avatarRenderer",required:!1,type:{name:"(item: AvatarItem, index: number, style: CSSProperties, type: AvatarType, displayAsGrid: boolean) => ReactElement<any, string | JSXElementConstructor<any>>"}},tooltipContainerAriaLabel:{defaultValue:null,description:"The ARIA label of the tooltip container.",name:"tooltipContainerAriaLabel",required:!1,type:{name:"string"}},tooltipContentContainerRef:{defaultValue:null,description:"Ref for the tooltip content container.",name:"tooltipContentContainerRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},type:{defaultValue:null,description:"The type of avatars in the tooltip.",name:"type",required:!1,type:{name:"AvatarType"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const fe="_tooltipAvatarItemTitle_1yijn_1",ye="_tooltipAvatarItemAvatar_1yijn_5",_e="_tooltipContainer_1yijn_9",he="_tooltipGridContainer_1yijn_21",ve="_scrollableContainer_1yijn_26",g={tooltipAvatarItemTitle:fe,tooltipAvatarItemAvatar:ye,tooltipContainer:_e,tooltipGridContainer:he,scrollableContainer:ve},Q=200,K=22,L=[Z.TAB],J=[Z.ESCAPE];function E({counterContainerRef:e=void 0,tooltipContentContainerRef:n,focusPrevPlaceholderRef:l,focusNextPlaceholderRef:r,isKeyboardTooltipVisible:t,setIsKeyboardTooltipVisible:a}){const s=u.useCallback(()=>{t||setTimeout(()=>a(!0),Q)},[t,a]),i=u.useCallback(()=>{t&&a(!1)},[t,a]);ue({ref:e,onFocusByKeyboard:s}),X({eventName:"blur",ref:n,callback:i}),v({keys:L,ref:e,withoutAnyModifier:!0,preventDefault:!0,callback:u.useCallback(()=>{t&&n!=null&&n.current&&n.current.focus()},[t,n])}),v({keys:L,modifier:v.modifiers.SHIFT,ref:e,callback:i}),v({keys:L,ref:n,withoutAnyModifier:!0,callback:u.useCallback(()=>{r!=null&&r.current&&r.current.focus(),t&&a(!1)},[r,t,a])}),v({keys:L,ref:n,modifier:v.modifiers.SHIFT,callback:u.useCallback(()=>{l!=null&&l.current&&l.current.focus(),t&&a(!1)},[l,t,a])}),v({keys:J,ref:n,callback:u.useCallback(()=>{e!=null&&e.current&&e.current.focus(),t&&a(!1)},[e,t,a])}),v({keys:J,ref:e,callback:i}),X({eventName:"focus",ref:r,callback:i})}const U=(e,n,l,r,t)=>{const a=e.value,s={...l,width:t?void 0:"100%"},i=`tooltip-item-${n}-label`;return o.jsx(oe,{isClickable:!!(a!=null&&a.onClick),clickableProps:{onClick:c=>a.onClick(c,a.id),tabIndex:"-1"},children:o.jsx("div",{style:s,children:o.jsxs(V,{direction:"row",gap:"xs",ariaLabelledby:i,children:[o.jsx(M,{...a,tooltipProps:void 0,ariaLabel:"",customSize:K,type:r||(a==null?void 0:a.type),tabIndex:-1,size:M.sizes.SMALL,className:g.tooltipAvatarItemAvatar}),!t&&o.jsx("div",{id:i,className:g.tooltipAvatarItemTitle,children:a.tooltipContent})]})})},n)};try{E.displayName="useTooltipContentTabNavigation",E.__docgenInfo={description:"",displayName:"useTooltipContentTabNavigation",props:{counterContainerRef:{defaultValue:{value:"undefined"},description:"",name:"counterContainerRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},tooltipContentContainerRef:{defaultValue:null,description:"",name:"tooltipContentContainerRef",required:!0,type:{name:"RefObject<HTMLElement>"}},focusPrevPlaceholderRef:{defaultValue:null,description:"",name:"focusPrevPlaceholderRef",required:!0,type:{name:"RefObject<HTMLDivElement>"}},focusNextPlaceholderRef:{defaultValue:null,description:"",name:"focusNextPlaceholderRef",required:!0,type:{name:"RefObject<HTMLDivElement>"}},isKeyboardTooltipVisible:{defaultValue:null,description:"",name:"isKeyboardTooltipVisible",required:!0,type:{name:"boolean"}},setIsKeyboardTooltipVisible:{defaultValue:null,description:"",name:"setIsKeyboardTooltipVisible",required:!0,type:{name:"(value: boolean) => void"}}}}}catch{}const R=({avatars:e=[],type:n,className:l,isVirtualizedList:r=!1,tooltipContentContainerRef:t})=>{const a=u.useCallback(d=>{var f;return((f=d==null?void 0:d.tooltipProps)==null?void 0:f.content)||(d==null?void 0:d.ariaLabel)},[]),{avatarItems:s,displayAsGrid:i,tooltipContainerAriaLabel:c}=u.useMemo(()=>{const d=e.map(p=>({value:{...p.props,tooltipContent:a(p.props)}})),f=!d.some(p=>p.value.tooltipContent),_=f?void 0:d.map(p=>p.value.tooltipContent).join(",");return{avatarItems:d,displayAsGrid:f,tooltipContainerAriaLabel:_}},[e,a]),m=u.useMemo(()=>s.map((d,f)=>U(d,f,void 0,n,i)),[s,i,n]);if(r)return o.jsx(j,{avatarRenderer:U,tooltipContentContainerRef:t,tooltipContainerAriaLabel:c,avatarItems:s,type:n});const y={ref:t,tabIndex:-1,role:"treegrid",ariaLabel:c,className:i?A(g.scrollableContainer,g.tooltipContainer,g.tooltipGridContainer,l):A(g.scrollableContainer,g.tooltipContainer,l),direction:i?V.directions.ROW:V.directions.COLUMN,gap:i?V.gaps.XS:V.gaps.SMALL,wrap:i};return o.jsx(V,{...y,children:m})};try{R.displayName="AvatarGroupCounterTooltipContent",R.__docgenInfo={description:"",displayName:"AvatarGroupCounterTooltipContent",props:{type:{defaultValue:null,description:"The type of avatars displayed inside the tooltip.",name:"type",required:!1,type:{name:"AvatarType"}},avatars:{defaultValue:{value:"[]"},description:"The avatars shown in the tooltip.",name:"avatars",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},isVirtualizedList:{defaultValue:{value:"false"},description:"If true, the tooltip uses a virtualized list for performance optimization.",name:"isVirtualizedList",required:!1,type:{name:"boolean"}},tooltipContentContainerRef:{defaultValue:null,description:"Ref for the tooltip content container.",name:"tooltipContentContainerRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const G=({focusPrevPlaceholderRef:e,focusNextPlaceholderRef:n,counterContainerRef:l,children:r=[],avatars:t=[],type:a,className:s,counterTooltipCustomProps:i,counterTooltipIsVirtualizedList:c=!1})=>{const[m,y]=u.useState(!1),d=u.useRef(null),f=u.useMemo(()=>(i==null?void 0:i.content)||o.jsx(R,{avatars:t,type:a,className:s,isVirtualizedList:c,tooltipContentContainerRef:d}),[t,s,i==null?void 0:i.content,c,a]);E({counterContainerRef:l,tooltipContentContainerRef:d,focusPrevPlaceholderRef:e,focusNextPlaceholderRef:n,setIsKeyboardTooltipVisible:y,isKeyboardTooltipVisible:m});const _=u.useCallback(()=>{y(!1)},[]);return!(t!=null&&t.length)&&!(i!=null&&i.content)?o.jsx(o.Fragment,{children:r}):o.jsx(le,{open:m,hideDelay:Q,showTrigger:["mouseenter"],hideTrigger:["mouseleave"],onTooltipHide:_,...i||{},content:f,children:r})};try{G.displayName="AvatarGroupCounterTooltipContainer",G.__docgenInfo={description:"",displayName:"AvatarGroupCounterTooltipContainer",props:{type:{defaultValue:null,description:"The type of avatars displayed in the tooltip.",name:"type",required:!1,type:{name:"AvatarType"}},children:{defaultValue:{value:"[]"},description:"The counter element and focus placeholders.",name:"children",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>[]"}},avatars:{defaultValue:{value:"[]"},description:"The list of avatars displayed inside the tooltip.",name:"avatars",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},counterTooltipCustomProps:{defaultValue:null,description:"Props passed to the Tooltip component. See full options in the [Tooltip documentation](https://vibe.monday.com/?path=/docs/components-tooltip--docs).",name:"counterTooltipCustomProps",required:!1,type:{name:"Partial<TooltipProps>"}},counterTooltipIsVirtualizedList:{defaultValue:{value:"false"},description:"If true, the tooltip uses a virtualized list for performance optimization.",name:"counterTooltipIsVirtualizedList",required:!1,type:{name:"boolean"}},focusPrevPlaceholderRef:{defaultValue:null,description:"Ref for the element before the tooltip content, used for keyboard navigation.",name:"focusPrevPlaceholderRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},focusNextPlaceholderRef:{defaultValue:null,description:"Ref for the element after the tooltip content, used for keyboard navigation.",name:"focusNextPlaceholderRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},counterContainerRef:{defaultValue:null,description:"Ref for the counter container element.",name:"counterContainerRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const ee=(e,n)=>{var l;(l=n==null?void 0:n.onClick)==null||l.call(n,e,n.id)},Ce="_counterContainer_pzen7_1",Ae="_xs_pzen7_22",ge="_small_pzen7_28",be="_medium_pzen7_34",Te="_large_pzen7_40",Ve="_primary_pzen7_46",qe="_dark_pzen7_50",Ie="_negative_pzen7_54",xe="_light_pzen7_58",Le="_disabled_pzen7_62",ze="_menu_pzen7_67",C={counterContainer:Ce,"focus-visible":"_focus-visible_pzen7_10",xs:Ae,small:ge,medium:be,large:Te,primary:Ve,dark:qe,negative:Ie,light:xe,disabled:Le,menu:ze},H=({counterTooltipAvatars:e=[],counterProps:n,counterTooltipCustomProps:l,counterTooltipIsVirtualizedList:r=!1,size:t="medium",type:a,counterAriaLabel:s,disabled:i})=>{const{color:c="light",count:m=e.length,prefix:y="+",maxDigits:d=3,ariaLabelItemsName:f="items",noAnimation:_,dialogContainerSelector:p,tabIndex:S=0}=n||{},b=de(C,t==null?void 0:t.toString()),T=C[c],q=u.useRef(null),O=u.useRef(null),k=u.useRef(null),N=u.useCallback(()=>o.jsx(ne,{color:c,count:m,prefix:y,maxDigits:d,ariaLabel:s||`Tab for more ${f}`,noAnimation:_,counterClassName:A({[C.disabled]:i}),size:t==="xs"?"xs":void 0}),[s,f,c,d,y,m,i,_]);return!e.length&&!m?null:i?o.jsx("div",{ref:k,className:A(C.counterContainer,C.disabled,b,T),children:N()}):e.some(h=>{var I;return(I=h.props)==null?void 0:I.onClick})?o.jsx(ie,{component:N,zIndex:1,className:A(C.counterContainer,b,T),ariaLabel:s||`${m} additional ${f}`,dialogContainerSelector:p,children:o.jsx(W,{id:"menu",size:W.sizes.MEDIUM,className:C.menu,focusItemIndexOnMount:0,children:e.map((h,I)=>{var D,w,P,F;return o.jsx(z,{menuItemProps:{key:((D=h.props)==null?void 0:D.id)||String(I),title:((P=(w=h.props)==null?void 0:w.tooltipProps)==null?void 0:P.content)||((F=h==null?void 0:h.props)==null?void 0:F.ariaLabel),onClick:te=>ee(te,h.props)},avatarProps:{...h.props,customSize:K,ariaLabel:"",tabIndex:-1}})})})}):o.jsxs(G,{focusPrevPlaceholderRef:q,focusNextPlaceholderRef:O,counterContainerRef:k,avatars:e,counterTooltipCustomProps:l,counterTooltipIsVirtualizedList:r,type:a,children:[o.jsx("div",{tabIndex:-1,ref:q}),o.jsxs("div",{tabIndex:S,className:A(C.counterContainer,b,T),ref:k,children:[N(),o.jsx("div",{tabIndex:-1,ref:O})]})]})};try{H.displayName="AvatarGroupCounter",H.__docgenInfo={description:"",displayName:"AvatarGroupCounter",props:{counterTooltipAvatars:{defaultValue:{value:"[]"},description:"The list of avatars hidden behind the counter.",name:"counterTooltipAvatars",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},counterProps:{defaultValue:null,description:"Props for customizing the counter appearance.",name:"counterProps",required:!1,type:{name:"AvatarGroupCounterVisualProps"}},counterTooltipCustomProps:{defaultValue:null,description:"Props for customizing the counter tooltip.",name:"counterTooltipCustomProps",required:!1,type:{name:"Partial<TooltipProps>"}},counterTooltipIsVirtualizedList:{defaultValue:{value:"false"},description:"If true, the counter tooltip uses a virtualized list for performance optimization.",name:"counterTooltipIsVirtualizedList",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"medium"},description:"The size of the counter.",name:"size",required:!1,type:{name:"AvatarSize"}},type:{defaultValue:null,description:"The type of the avatars in the counter.",name:"type",required:!1,type:{name:"AvatarType"}},counterAriaLabel:{defaultValue:null,description:"The label of the counter for accessibility.",name:"counterAriaLabel",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"If true, the counter is disabled and non-interactive.",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const Se="_avatarGroupContainer_1g1uk_1",ke="_avatarContainer_1g1uk_10",B={avatarGroupContainer:Se,avatarContainer:ke},Y=({className:e,avatarClassName:n,id:l,children:r,size:t,type:a,max:s=5,counterProps:i,counterTooltipCustomProps:c,counterTooltipIsVirtualizedList:m=!1,disabled:y})=>{const{displayAvatars:d,counterTooltipAvatars:f}=u.useMemo(()=>{if(!r)return{};const _=Array.isArray(r)?r:[r];return{displayAvatars:_.slice(0,s).map((p,S)=>{var b,T;return ae.cloneElement(p,{key:S,...p==null?void 0:p.props,size:t||((b=p==null?void 0:p.props)==null?void 0:b.size),type:a||((T=p==null?void 0:p.props)==null?void 0:T.type),className:A(B.avatarContainer,n),onClick:q=>ee(q,p.props),disabled:y})}),counterTooltipAvatars:_.slice(s)}},[n,r,y,s,t,a]);return r?o.jsxs("div",{className:A(B.avatarGroupContainer,e),id:l,"data-vibe":pe.AVATAR_GROUP,children:[d,o.jsx(H,{counterTooltipAvatars:f,counterProps:i,counterTooltipCustomProps:c,counterTooltipIsVirtualizedList:m,size:t,type:a,disabled:y})]}):null};try{Y.displayName="AvatarGroup",Y.__docgenInfo={description:"",displayName:"AvatarGroup",props:{avatarClassName:{defaultValue:null,description:"Class name applied to each avatar.",name:"avatarClassName",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The avatars displayed in the group.",name:"children",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>> | ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},size:{defaultValue:null,description:"The size of the avatars in the group.",name:"size",required:!1,type:{name:"AvatarSize"}},type:{defaultValue:null,description:"The type of the avatars in the group.",name:"type",required:!1,type:{name:"AvatarType"}},max:{defaultValue:{value:"5"},description:"The maximum number of avatars displayed before showing a counter.",name:"max",required:!1,type:{name:"number"}},counterProps:{defaultValue:null,description:"Props for customizing the counter display.",name:"counterProps",required:!1,type:{name:"AvatarGroupCounterVisualProps"}},counterTooltipCustomProps:{defaultValue:null,description:"Props passed to the Tooltip component. See full options in the [Tooltip documentation](https://vibe.monday.com/?path=/docs/components-tooltip--docs).",name:"counterTooltipCustomProps",required:!1,type:{name:"Partial<TooltipProps>"}},counterTooltipIsVirtualizedList:{defaultValue:{value:"false"},description:"If true, the counter tooltip uses a virtualized list for performance optimization.",name:"counterTooltipIsVirtualizedList",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, the component is disabled and non-interactive.",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{Y as A};
