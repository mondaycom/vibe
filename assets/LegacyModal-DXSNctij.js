import{j as r}from"./jsx-runtime-lwGtIXvq.js";import{R as F,r as u}from"./index-CTZeEbLr.js";import{R as de}from"./index-BrqHMYbN.js";import{c as m}from"./index-BpvXyOxN.js";import{T as W}from"./Text-DVNPP_6L.js";import{g as O,b as N}from"./test-ids-utils-BiWUJdxm.js";import{I as ue}from"./IconButton-H10RwFPB.js";import{N as U}from"./function-utils-CgdCy1w7.js";import{H as ce}from"./Heading-B02tO7j0.js";import{F as X}from"./Flex-Bimzf4jb.js";import{a as fe}from"./CloseSmall-DUYWL2FE.js";import{I as me}from"./Icon-CMBPUOKb.js";import{u as pe}from"./index-gB5zY9qh.js";import{k as he}from"./useClickableProps-CtaZWk7Q.js";import{B as z}from"./Button-zprqw9Vf.js";import{i as ye}from"./ssr-utils-BGtEO4Lb.js";import{t as ge}from"./Tooltip-Bz77u-mN.js";import{a as ve}from"./withStaticProps-DfSG2La2.js";var be=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'],_e="Tab",we="Escape";function c(e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=e,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}c.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=L('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach((function(t){t.addEventListener("click",this._show)}).bind(this));const e=this.$el;return this._closers=L("[data-a11y-dialog-hide]",this.$el).filter(function(t){return t.closest('[aria-modal="true"], [data-a11y-dialog]')===e}).concat(L('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach((function(t){t.addEventListener("click",this._hide)}).bind(this)),this._fire("create"),this};c.prototype.show=function(e){if(this.shown)return this;this._previouslyFocused=document.activeElement;const t=e&&e.target?e.target:null;return t&&Object.is(this._previouslyFocused,document.body)&&(this._previouslyFocused=t),this.$el.removeAttribute("aria-hidden"),this.shown=!0,J(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",e),this};c.prototype.hide=function(e){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",e),this):this};c.prototype.destroy=function(){return this.hide(),this._openers.forEach((function(e){e.removeEventListener("click",this._show)}).bind(this)),this._closers.forEach((function(e){e.removeEventListener("click",this._hide)}).bind(this)),this._fire("destroy"),this._listeners={},this};c.prototype.on=function(e,t){return typeof this._listeners[e]>"u"&&(this._listeners[e]=[]),this._listeners[e].push(t),this};c.prototype.off=function(e,t){var o=(this._listeners[e]||[]).indexOf(t);return o>-1&&this._listeners[e].splice(o,1),this};c.prototype._fire=function(e,t){var o=this._listeners[e]||[],i=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(i),o.forEach((function(n){n(this.$el,t)}).bind(this))};c.prototype._bindKeypress=function(e){const t=document.activeElement;t&&t.closest('[aria-modal="true"]')!==this.$el||(this.shown&&e.key===we&&this.$el.getAttribute("role")!=="alertdialog"&&(e.preventDefault(),this.hide(e)),this.shown&&e.key===_e&&Se(this.$el,e))};c.prototype._maintainFocus=function(e){this.shown&&!e.target.closest('[aria-modal="true"]')&&!e.target.closest("[data-a11y-dialog-ignore-focus-trap]")&&J(this.$el)};function xe(e){return Array.prototype.slice.call(e)}function L(e,t){return xe((t||document).querySelectorAll(e))}function J(e){var t=e.querySelector("[autofocus]")||e;t.focus()}function Ae(e){return L(be.join(","),e).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})}function Se(e,t){var o=Ae(e),i=o.indexOf(document.activeElement);t.shiftKey&&i===0?(o[o.length-1].focus(),t.preventDefault()):!t.shiftKey&&i===o.length-1&&(o[0].focus(),t.preventDefault())}function D(){L("[data-a11y-dialog]").forEach(function(e){new c(e)})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):window.requestAnimationFrame?window.requestAnimationFrame(D):window.setTimeout(D,16));const Ee=()=>{const[e,t]=F.useState(null),o=F.useCallback(i=>{i!==null&&t(new c(i))},[]);return[e,o]},Le=({id:e,alertDialog:t})=>{const[o,i]=Ee(),n=t?"alertdialog":"dialog",a=e+"-title";return F.useEffect(()=>()=>{o&&o.destroy()},[o]),[o,{container:{id:e,ref:i,role:n,tabIndex:-1,"aria-modal":!0,"aria-hidden":!0,"aria-labelledby":a},dialog:{role:"document"},title:{id:a}}]},Me="_container_1ienr_1",qe={container:Me},C=({className:e,id:t,"data-testid":o,children:i})=>r.jsx(W,{type:"text1",id:t,"data-testid":o||O(N.MODAL_CONTENT,t),className:m(qe.container,e),ellipsis:!1,children:i});Object.assign(C,{displayName:"ModalContent"});try{C.displayName="LegacyModalContent",C.__docgenInfo={description:"",displayName:"LegacyModalContent",props:{className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const Ne="_container_m31vh_1",Ce="_icon_m31vh_4",Te="_description_m31vh_9",Ve="_closeButton_m31vh_13",k={container:Ne,icon:Ce,description:Te,closeButton:Ve},T=({className:e,title:t,children:o,titleClassName:i,description:n="",descriptionClassName:a,icon:s,closeModal:d=U,iconSize:h=24,iconClassName:l,closeButtonAriaLabel:f="close",id:g,"data-testid":x})=>r.jsxs("div",{className:m(k.container,e),"data-testid":x||O(N.MODAL_HEADER,g),children:[o||r.jsxs(X,{align:"start",gap:"small",className:i,children:[s&&r.jsx(me,{className:m(k.icon,l),icon:s,iconType:"svg",iconSize:h,ignoreFocusStyle:!0}),r.jsx(ce,{id:g,maxLines:2,children:t})]}),n&&r.jsx(W,{type:"text2",maxLines:2,className:m(k.description,a),children:n}),r.jsx("div",{className:m(k.closeButton),children:r.jsx(ue,{onClick:d,ariaLabel:f,icon:fe,kind:"tertiary",size:"small"},"xxs")})]});Object.assign(T,{displayName:"ModalHeader"});try{T.displayName="LegacyModalHeader",T.__docgenInfo={description:"",displayName:"LegacyModalHeader",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"ElementContent"}},description:{defaultValue:{value:""},description:"Description of the modal - pure string description is a recommended standard, use JSX ability only if there is a need to add links",name:"description",required:!1,type:{name:"ElementContent"}},icon:{defaultValue:null,description:"Icon to be rendered before the title",name:"icon",required:!1,type:{name:"SubIcon"}},titleClassName:{defaultValue:null,description:"Class name for the title",name:"titleClassName",required:!1,type:{name:"string"}},closeModal:{defaultValue:null,description:"closes the Modal. No need to provide it, it is being provided by the modal",name:"closeModal",required:!1,type:{name:"() => void"}},descriptionClassName:{defaultValue:null,description:"Class name for the description",name:"descriptionClassName",required:!1,type:{name:"string"}},iconSize:{defaultValue:{value:"24"},description:"Size of the icon",name:"iconSize",required:!1,type:{name:"number"}},iconClassName:{defaultValue:null,description:"class name for the icon",name:"iconClassName",required:!1,type:{name:"string"}},closeButtonAriaLabel:{defaultValue:{value:"close"},description:"Aria label for the close button",name:"closeButtonAriaLabel",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}function Be(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}else return Array.from(e)}var j=!1;if(typeof window<"u"){var K={get passive(){j=!0}};window.addEventListener("testPassive",null,K),window.removeEventListener("testPassive",null,K)}var _=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),p=[],w=!1,P=-1,M=void 0,v=void 0,q=void 0,G=function(t){return p.some(function(o){return!!(o.options.allowTouchMove&&o.options.allowTouchMove(t))})},V=function(t){var o=t||window.event;return G(o.target)||o.touches.length>1?!0:(o.preventDefault&&o.preventDefault(),!1)},$e=function(t){if(q===void 0){var o=!!t&&t.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;if(o&&i>0){var n=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);q=document.body.style.paddingRight,document.body.style.paddingRight=n+i+"px"}}M===void 0&&(M=document.body.style.overflow,document.body.style.overflow="hidden")},Q=function(){q!==void 0&&(document.body.style.paddingRight=q,q=void 0),M!==void 0&&(document.body.style.overflow=M,M=void 0)},ke=function(){return window.requestAnimationFrame(function(){if(v===void 0){v={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,o=t.scrollY,i=t.scrollX,n=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-o,document.body.style.left=-i,setTimeout(function(){return window.requestAnimationFrame(function(){var a=n-window.innerHeight;a&&o>=n&&(document.body.style.top=-(o+a))})},300)}})},Z=function(){if(v!==void 0){var t=-parseInt(document.body.style.top,10),o=-parseInt(document.body.style.left,10);document.body.style.position=v.position,document.body.style.top=v.top,document.body.style.left=v.left,window.scrollTo(o,t),v=void 0}},Fe=function(t){return t?t.scrollHeight-t.scrollTop<=t.clientHeight:!1},Ie=function(t,o){var i=t.targetTouches[0].clientY-P;return G(t.target)?!1:o&&o.scrollTop===0&&i>0||Fe(o)&&i<0?V(t):(t.stopPropagation(),!0)},Oe=function(t,o){if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!p.some(function(n){return n.targetElement===t})){var i={targetElement:t,options:o||{}};p=[].concat(Be(p),[i]),_?ke():$e(o),_&&(t.ontouchstart=function(n){n.targetTouches.length===1&&(P=n.targetTouches[0].clientY)},t.ontouchmove=function(n){n.targetTouches.length===1&&Ie(n,t)},w||(document.addEventListener("touchmove",V,j?{passive:!1}:void 0),w=!0))}},je=function(){_&&(p.forEach(function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null}),w&&(document.removeEventListener("touchmove",V,j?{passive:!1}:void 0),w=!1),P=-1),_?Z():Q(),p=[]},De=function(t){if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}p=p.filter(function(o){return o.targetElement!==t}),_&&(t.ontouchstart=null,t.ontouchmove=null,w&&p.length===0&&(document.removeEventListener("touchmove",V,j?{passive:!1}:void 0),w=!1)),_?Z():Q()};function He({instance:e}){u.useEffect(()=>()=>je(),[]),u.useEffect(()=>(e==null||e.on("show",()=>Oe(e.$el,{reserveScrollBarGap:!0})),e==null||e.on("hide",()=>De(e.$el)),()=>{e==null||e.off("show"),e==null||e.off("hide")}),[e])}function Pe(e,t){return u.useCallback((o=!1)=>{let i,n;if(e){const{top:a,right:s}=e.getBoundingClientRect(),{top:d,left:h,width:l,height:f}=(t==null?void 0:t.$el.childNodes[1].getBoundingClientRect())||{};i={transform:`translate(${s-h-l/2}px, ${a-d-f/2}px) scale(0.6)`,opacity:0},n={transform:"translate(0, 0) scale(1)",opacity:1}}else i={transform:"scale(0.70)",opacity:.4},n={transform:"scale(1)",opacity:1};return o?[[n,i],{duration:100,easing:"cubic-bezier(0.4, 0, 1, 1)"}]:[[i,n],{duration:100,easing:"cubic-bezier(0, 0, 0.35, 1)"}]},[t,e])}const Re=[he.ESCAPE];function ze({instance:e,show:t,triggerElement:o,onClose:i,alertDialog:n}){const[a,s]=u.useState(!1),d=Pe(o,e),h=u.useCallback(l=>{!n&&(e!=null&&e.$el.contains(document.activeElement))&&(l.stopPropagation(),i==null||i())},[n,e==null?void 0:e.$el,i]);return pe({callback:h,capture:!0,keys:Re}),u.useEffect(()=>{var l,f,g;if(t)s(!0),e==null||e.show(),(e==null?void 0:e.$el.childNodes[1].animate)&&((f=e==null?void 0:(l=e.$el.childNodes[1]).animate)==null||f.call(l,...d()));else if(e==null?void 0:e.$el.childNodes[1].animate){const A=(g=e==null?void 0:e.$el.childNodes[1])==null?void 0:g.animate(...d(!0));A==null||A.finished.then(()=>{s(!1),e==null||e.hide()})}else s(!1),e==null||e.hide()},[t,e,d]),{shouldShow:a}}const Ke="_container_tzwid_1",Ye={container:Ke},B=({className:e,children:t})=>r.jsx("div",{className:m(Ye.container,e),children:t});Object.assign(B,{displayName:"ModalFooter"});try{B.displayName="LegacyModalFooter",B.__docgenInfo={description:"",displayName:"LegacyModalFooter",props:{className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const I=u.forwardRef(({primaryButtonText:e,secondaryButtonText:t,disablePrimaryButton:o,onPrimaryButtonClick:i,onSecondaryButtonClick:n,className:a,id:s,"data-testid":d},h)=>r.jsx(B,{id:s,className:a,"data-testid":d||O(N.MODAL_FOOTER_BUTTONS,s),children:r.jsxs(X,{justify:"end",gap:"small",children:[t&&r.jsx(z,{onClick:n,kind:"tertiary",children:t}),r.jsx(z,{onClick:i,disabled:o,children:e})]})}));Object.assign(I,{displayName:"ModalFooterButtons"});try{I.displayName="LegacyModalFooterButtons",I.__docgenInfo={description:"",displayName:"LegacyModalFooterButtons",props:{primaryButtonText:{defaultValue:null,description:"",name:"primaryButtonText",required:!0,type:{name:"string"}},secondaryButtonText:{defaultValue:null,description:"",name:"secondaryButtonText",required:!1,type:{name:"string"}},disablePrimaryButton:{defaultValue:null,description:"",name:"disablePrimaryButton",required:!1,type:{name:"boolean"}},onPrimaryButtonClick:{defaultValue:null,description:"",name:"onPrimaryButtonClick",required:!1,type:{name:"() => void"}},onSecondaryButtonClick:{defaultValue:null,description:"",name:"onSecondaryButtonClick",required:!1,type:{name:"() => void"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}var ee=(e=>(e.DEFAULT="default",e.FULL_WIDTH="full-width",e))(ee||{});const H=e=>e.type===T,We=e=>e.type===C,Y=e=>[B,I].some(t=>e.type===t),Ue=(e,t)=>{if(!t.some(H)&&!e)throw new Error("Title prop is mandatory for Modal when HeaderModal isn't provided. Validation failed.")},Xe="_container_bon99_1",Je="_overlay_bon99_2",Ge="_dialog_bon99_28",Qe="_full_bon99_43",Ze="_spacing_bon99_46",b={container:Xe,overlay:Je,dialog:Ge,default:"_default_bon99_40",full:Qe,spacing:Ze},et=({classNames:e={container:"",overlay:"",modal:""},id:t,show:o,title:i="",description:n="",onClose:a=U,alertDialog:s=!1,children:d,triggerElement:h,width:l="default",closeButtonAriaLabel:f="Close",contentSpacing:g=!1,zIndex:x=1e4,unmountOnClose:A=!0,"data-testid":te})=>{const y=u.useMemo(()=>d?F.Children.toArray(d):[],[d]);Ue(i,y);const[S,$]=Le({id:t,alertDialog:s}),oe=u.useCallback(()=>{s||a==null||a()},[s,a]);He({instance:S});const{shouldShow:ie}=ze({instance:S,show:o,triggerElement:h,onClose:a,alertDialog:s}),ne=u.useMemo(()=>{const{id:E}=$.title,R=y.find(H);return R?u.cloneElement(R,{id:E,closeModal:a}):r.jsx(T,{title:i,description:n,closeModal:a,id:E,closeButtonAriaLabel:f})},[$.title,y,i,n,a,f]),ae=u.useMemo(()=>y.find(We)||r.jsx(C,{children:y.filter(E=>!H(E)&&!Y(E))}),[y]),re=u.useMemo(()=>y.find(Y)||null,[y]),se=l!=="default"&&l!=="full-width",le=r.jsx(ge,{layerRef:{current:S==null?void 0:S.$el},children:r.jsxs("div",{...$.container,className:m(b.container,e.container),"data-testid":te||O(N.MODAL,t),style:{"--monday-modal-z-index":x},children:[r.jsx("div",{onClick:oe,className:m(b.overlay,e.overlay),"data-testid":N.MODAL_OVERLAY}),r.jsxs("div",{...$.dialog,className:m(b.dialog,e.modal,{[b.default]:l==="default",[b.full]:l==="full-width",[b.spacing]:g}),style:{width:se?l:null},children:[ne,ae,re]})]})});return A&&!ie?null:ye()?de.createPortal(le,document.body):null},bt=ve(et,{width:ee});try{LegacyModal.displayName="LegacyModal",LegacyModal.__docgenInfo={description:"",displayName:"LegacyModal",props:{id:{defaultValue:null,description:"Id of the modal, used internally and for accessibility",name:"id",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}},show:{defaultValue:null,description:"Show/hide the Dialog",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:{value:""},description:"Heading for the modal, mandatory when ModalHeader isn't provided in children",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:{value:""},description:"Description for the modal title",name:"description",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"Called when the modal is closed (by close button/click outside/esc key)",name:"onClose",required:!0,type:{name:"() => void"}},alertDialog:{defaultValue:{value:"false"},description:`Makes the dialog behave like a modal (preventing closing on click outside of
ESC key)..`,name:"alertDialog",required:!1,type:{name:"boolean"}},triggerElement:{defaultValue:null,description:"Used for the fromOrigin animation",name:"triggerElement",required:!1,type:{name:"Element"}},width:{defaultValue:{value:"default"},description:"Set the modal's width. Can be one of the presets or any custom size",name:"width",required:!1,type:{name:"string"}},closeButtonAriaLabel:{defaultValue:{value:"Close"},description:"Aria label for the close button",name:"closeButtonAriaLabel",required:!1,type:{name:"string"}},contentSpacing:{defaultValue:{value:"false"},description:"Add gaps between parts of the modal",name:"contentSpacing",required:!1,type:{name:"boolean"}},classNames:{defaultValue:{value:'{ container: "", overlay: "", modal: "" }'},description:"classNames for specific parts of the dialog",name:"classNames",required:!1,type:{name:"{ container?: string; overlay?: string; modal?: string; }"}},children:{defaultValue:null,description:"Dialog content",name:"children",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | ReactElement<any, string | JSXElementConstructor<any>>[]"}},zIndex:{defaultValue:{value:"10000"},description:"z-index attribute of the container",name:"zIndex",required:!1,type:{name:"number"}},unmountOnClose:{defaultValue:{value:"true"},description:"When `false`, the modal will remain in the DOM when closed",name:"unmountOnClose",required:!1,type:{name:"boolean"}}}}}catch{}export{C as L,bt as M,I as a,B as b,T as c};
