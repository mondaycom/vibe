import{j as f}from"./jsx-runtime-DDzbWKUH.js";import{r as t}from"./index-Hemj67b4.js";import{c as $}from"./index-BpvXyOxN.js";import{a as J}from"./index.esm-CsnITLvm.js";import{A as Q}from"./react-virtualized-auto-sizer.esm-CuRSY4Lt.js";import{g as Y,u as ee,b as te,i as re}from"./virtualized-service-D-n4jNAX.js";import{u as ne}from"./index-CXrJR90Q.js";import{u as ie}from"./useMergeRef-DQ4XPFxl.js";import{N as k}from"./function-utils-6EQ2u6TA.js";import{g as ae,C as le}from"./test-ids-utils-9ISiqDto.js";import{T as M}from"./Text-BpN5-7Ic.js";const se="_virtualizedGridWrapper_sa1o0_1",oe={virtualizedGridWrapper:se},D=t.forwardRef(({className:l,id:o,items:n=[],itemRenderer:c=(i,V,p)=>i,getRowHeight:d=()=>50,getColumnWidth:g=()=>100,getItemId:R=(i,V)=>i.id,onScroll:b,scrollToId:u=null,onScrollToFinished:x=k,onItemsRendered:y=null,onItemsRenderedThrottleMs:O=200,onSizeUpdate:T=k,onVerticalScrollbarVisiblityChange:C=null,scrollableClassName:j,"data-testid":E},A)=>{const[i,V]=t.useState(0),[p,F]=t.useState(0),S=ne(u),W=t.useRef(null),z=t.useRef(null),h=t.useRef(null),v=t.useRef(0),P=t.useRef({scrollOffsetInitial:0,scrollOffsetFinal:0,animationStartTime:0}),H=ie(A,W),G=P.current,_=t.useCallback(e=>{const r=d();return(!r||Number.isNaN(r))&&console.error("Couldn't get height for item: ",e),r},[d]),m=t.useCallback((e,r)=>{const s=R(e,r);return s===void 0&&console.error("Couldn't get id for item: ",e),s},[R]),I=t.useMemo(()=>Y(n,m,_),[n,m,_]),a=t.useMemo(()=>Math.min(n.length,Math.floor(p/g())),[n,p,g]),L=t.useMemo(()=>a>0?Math.ceil(n.length/a):0,[n,a]),q=t.useMemo(()=>u%a,[u,a]),w=t.useMemo(()=>Math.floor(u/a),[u,a]),B=t.useCallback(({horizontalScrollDirection:e,scrollTop:r,scrollUpdateWasRequested:s})=>{v.current=r,s||(G.scrollOffsetInitial=r),b&&b(e,r,s)},[b,v,G]),U=t.useCallback(({columnIndex:e,rowIndex:r,style:s})=>{const N=r*a+e,Z=n[N];return c(Z,N,s)},[n,c,a]),K=t.useCallback((e,r)=>{(r!==i||e!==p)&&setTimeout(()=>{V(r),F(e),T(e,r)},0)},[i,p,T]),X=ee(({visibleRowStartIndex:e,visibleRowStopIndex:r})=>{if(!y)return;const s=te(n,I,m,e,r,i,v.current);y(s)},{wait:O,trailing:!0},[y,n,I,m,i]);return t.useEffect(()=>{u&&S!==u&&(h.current.scrollToItem({align:"center",columnIndex:q,rowIndex:w}),x())},[u,S,h,q,w,x]),t.useEffect(()=>{h.current&&h.current.resetAfterIndices({columnIndex:0,rowIndex:0})},[I]),t.useEffect(()=>{if(C){const e=re(n,I,m,i);z.current!==e&&(z.current=e,C(e))}},[C,n,I,i,m]),f.jsx("div",{ref:H,className:$(oe.virtualizedGridWrapper,l),id:o,"data-testid":E||ae(le.VIRTUALIZED_GRID,o),children:f.jsx(Q,{children:({height:e,width:r})=>(K(r,e),f.jsx(J,{ref:h,height:e,width:r,columnWidth:g,columnCount:a,rowHeight:d,rowCount:L,onScroll:B,onItemsRendered:X,className:j,children:U}))})})});try{D.displayName="VirtualizedGrid",D.__docgenInfo={description:"",displayName:"VirtualizedGrid",props:{items:{defaultValue:{value:"[]"},description:"The list of items to be rendered in the grid.",name:"items",required:!1,type:{name:"VirtualizedGridItemType[]"}},itemRenderer:{defaultValue:{value:"(item: ItemType, _index: number, _style: CSSProperties) => item"},description:"Function that renders each item in the grid.",name:"itemRenderer",required:!1,type:{name:"(item: VirtualizedGridItemType, index: number, style: CSSProperties) => VirtualizedGridItemType | GridChildComponentProps<VirtualizedGridItemType>"}},getRowHeight:{defaultValue:{value:"() => 50"},description:"Function that returns the row height.",name:"getRowHeight",required:!1,type:{name:"() => number"}},getColumnWidth:{defaultValue:{value:"() => 100"},description:"Function that returns the column width.",name:"getColumnWidth",required:!1,type:{name:"() => number"}},getItemId:{defaultValue:{value:"(item: ItemType, _index: number) => item.id"},description:"Function that returns the unique ID of an item.",name:"getItemId",required:!1,type:{name:"(item: VirtualizedGridItemType, index: number) => string"}},scrollToId:{defaultValue:{value:"null"},description:"The index of the item to scroll to.",name:"scrollToId",required:!1,type:{name:"number"}},onScroll:{defaultValue:null,description:"Callback fired when the grid is scrolled.",name:"onScroll",required:!1,type:{name:"(horizontalScrollDirection: ScrollDirection, scrollTop: number, scrollUpdateWasRequested: boolean) => void"}},onScrollToFinished:{defaultValue:null,description:"Callback fired when scrolling has finished.",name:"onScrollToFinished",required:!1,type:{name:"() => void"}},onItemsRendered:{defaultValue:{value:"null"},description:"Callback fired when items are rendered in the grid.",name:"onItemsRendered",required:!1,type:{name:"({ firstItemId, secondItemId, lastItemId, centerItemId, firstItemOffsetEnd, currentOffsetTop }: { firstItemId: string; secondItemId: string; lastItemId: string; centerItemId: string; firstItemOffsetEnd: number; currentOffsetTop: number; }) => void"}},onItemsRenderedThrottleMs:{defaultValue:{value:"200"},description:"The delay (in ms) for throttling the `onItemsRendered` callback.",name:"onItemsRenderedThrottleMs",required:!1,type:{name:"number"}},onSizeUpdate:{defaultValue:null,description:"Callback fired when the grid size is updated.",name:"onSizeUpdate",required:!1,type:{name:"(width: number, height: number) => void"}},onVerticalScrollbarVisiblityChange:{defaultValue:{value:"null"},description:"Callback fired when the vertical scrollbar visibility changes.",name:"onVerticalScrollbarVisiblityChange",required:!1,type:{name:"(value: boolean) => void"}},scrollableClassName:{defaultValue:null,description:"Class name applied to the scrollable container.",name:"scrollableClassName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const Ce=(l=30,o,n)=>{const c=[];for(let d=0;d<n;d++)c.push({value:`Item ${d}`,height:l,width:o,id:d.toString()});return c},Ve=(l,o,n)=>{if(l){const c=o%2===0?"#e1e1e1":"#f8f8f0";return f.jsx("div",{style:n,children:f.jsx(M,{color:M.colors.FIXED_DARK,style:{backgroundColor:c,height:l.height,width:l.width,display:"flex",alignItems:"center",justifyContent:"center"},children:l.value})},o)}return f.jsx("div",{style:n},o)};export{D as V,Ce as g,Ve as i};
