import{r as t,R as f}from"./index-Hemj67b4.js";import{c as $}from"./index-BpvXyOxN.js";import{A as J,a as Q}from"./react-virtualized-auto-sizer.esm-BXbsNbB2.js";import{g as Y,u as ee,b as te,i as re}from"./virtualized-service-D-n4jNAX.js";import{u as ne}from"./index-CXrJR90Q.js";import{u as ie}from"./useMergeRef-DQ4XPFxl.js";import{N as E}from"./function-utils-6EQ2u6TA.js";import{g as ae,C as le}from"./test-ids-utils-9ISiqDto.js";import{T as N}from"./Text-CBUmQ7si.js";const se="_virtualizedGridWrapper_sa1o0_1",oe={virtualizedGridWrapper:se},M=t.forwardRef(({className:l,id:o,items:n=[],itemRenderer:c=(i,V,p)=>i,getRowHeight:d=()=>50,getColumnWidth:g=()=>100,getItemId:R=(i,V)=>i.id,onScroll:b,scrollToId:u=null,onScrollToFinished:T=E,onItemsRendered:y=null,onItemsRenderedThrottleMs:D=200,onSizeUpdate:S=E,onVerticalScrollbarVisiblityChange:C=null,scrollableClassName:O,"data-testid":A},F)=>{const[i,V]=t.useState(0),[p,W]=t.useState(0),z=ne(u),P=t.useRef(null),G=t.useRef(null),h=t.useRef(null),v=t.useRef(0),H=t.useRef({scrollOffsetInitial:0,scrollOffsetFinal:0,animationStartTime:0}),L=ie(F,P),_=H.current,q=t.useCallback(e=>{const r=d();return(!r||Number.isNaN(r))&&console.error("Couldn't get height for item: ",e),r},[d]),m=t.useCallback((e,r)=>{const s=R(e,r);return s===void 0&&console.error("Couldn't get id for item: ",e),s},[R]),I=t.useMemo(()=>Y(n,m,q),[n,m,q]),a=t.useMemo(()=>Math.min(n.length,Math.floor(p/g())),[n,p,g]),B=t.useMemo(()=>a>0?Math.ceil(n.length/a):0,[n,a]),x=t.useMemo(()=>u%a,[u,a]),k=t.useMemo(()=>Math.floor(u/a),[u,a]),U=t.useCallback(({horizontalScrollDirection:e,scrollTop:r,scrollUpdateWasRequested:s})=>{v.current=r,s||(_.scrollOffsetInitial=r),b&&b(e,r,s)},[b,v,_]),j=t.useCallback(({columnIndex:e,rowIndex:r,style:s})=>{const w=r*a+e,Z=n[w];return c(Z,w,s)},[n,c,a]),K=t.useCallback((e,r)=>{(r!==i||e!==p)&&setTimeout(()=>{V(r),W(e),S(e,r)},0)},[i,p,S]),X=ee(({visibleRowStartIndex:e,visibleRowStopIndex:r})=>{if(!y)return;const s=te(n,I,m,e,r,i,v.current);y(s)},{wait:D,trailing:!0},[y,n,I,m,i]);return t.useEffect(()=>{u&&z!==u&&(h.current.scrollToItem({align:"center",columnIndex:x,rowIndex:k}),T())},[u,z,h,x,k,T]),t.useEffect(()=>{h.current&&h.current.resetAfterIndices({columnIndex:0,rowIndex:0})},[I]),t.useEffect(()=>{if(C){const e=re(n,I,m,i);G.current!==e&&(G.current=e,C(e))}},[C,n,I,i,m]),f.createElement("div",{ref:L,className:$(oe.virtualizedGridWrapper,l),id:o,"data-testid":A||ae(le.VIRTUALIZED_GRID,o)},f.createElement(J,null,({height:e,width:r})=>(K(r,e),f.createElement(Q,{ref:h,height:e,width:r,columnWidth:g,columnCount:a,rowHeight:d,rowCount:B,onScroll:U,onItemsRendered:X,className:O},j))))});try{M.displayName="VirtualizedGrid",M.__docgenInfo={description:"",displayName:"VirtualizedGrid",props:{items:{defaultValue:{value:"[]"},description:"The list of items to be rendered in the grid.",name:"items",required:!1,type:{name:"VirtualizedGridItemType[]"}},itemRenderer:{defaultValue:{value:"(item: ItemType, _index: number, _style: CSSProperties) => item"},description:"Function that renders each item in the grid.",name:"itemRenderer",required:!1,type:{name:"(item: VirtualizedGridItemType, index: number, style: CSSProperties) => VirtualizedGridItemType | GridChildComponentProps<VirtualizedGridItemType>"}},getRowHeight:{defaultValue:{value:"() => 50"},description:"Function that returns the row height.",name:"getRowHeight",required:!1,type:{name:"() => number"}},getColumnWidth:{defaultValue:{value:"() => 100"},description:"Function that returns the column width.",name:"getColumnWidth",required:!1,type:{name:"() => number"}},getItemId:{defaultValue:{value:"(item: ItemType, _index: number) => item.id"},description:"Function that returns the unique ID of an item.",name:"getItemId",required:!1,type:{name:"(item: VirtualizedGridItemType, index: number) => string"}},scrollToId:{defaultValue:{value:"null"},description:"The index of the item to scroll to.",name:"scrollToId",required:!1,type:{name:"number"}},onScroll:{defaultValue:null,description:"Callback fired when the grid is scrolled.",name:"onScroll",required:!1,type:{name:"(horizontalScrollDirection: ScrollDirection, scrollTop: number, scrollUpdateWasRequested: boolean) => void"}},onScrollToFinished:{defaultValue:null,description:"Callback fired when scrolling has finished.",name:"onScrollToFinished",required:!1,type:{name:"() => void"}},onItemsRendered:{defaultValue:{value:"null"},description:"Callback fired when items are rendered in the grid.",name:"onItemsRendered",required:!1,type:{name:"({ firstItemId, secondItemId, lastItemId, centerItemId, firstItemOffsetEnd, currentOffsetTop }: { firstItemId: string; secondItemId: string; lastItemId: string; centerItemId: string; firstItemOffsetEnd: number; currentOffsetTop: number; }) => void"}},onItemsRenderedThrottleMs:{defaultValue:{value:"200"},description:"The delay (in ms) for throttling the `onItemsRendered` callback.",name:"onItemsRenderedThrottleMs",required:!1,type:{name:"number"}},onSizeUpdate:{defaultValue:null,description:"Callback fired when the grid size is updated.",name:"onSizeUpdate",required:!1,type:{name:"(width: number, height: number) => void"}},onVerticalScrollbarVisiblityChange:{defaultValue:{value:"null"},description:"Callback fired when the vertical scrollbar visibility changes.",name:"onVerticalScrollbarVisiblityChange",required:!1,type:{name:"(value: boolean) => void"}},scrollableClassName:{defaultValue:null,description:"Class name applied to the scrollable container.",name:"scrollableClassName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const be=(l=30,o,n)=>{const c=[];for(let d=0;d<n;d++)c.push({value:`Item ${d}`,height:l,width:o,id:d.toString()});return c},ye=(l,o,n)=>{if(l){const c=o%2===0?"#e1e1e1":"#f8f8f0";return f.createElement("div",{key:o,style:n},f.createElement(N,{color:N.colors.FIXED_DARK,style:{backgroundColor:c,height:l.height,width:l.width,display:"flex",alignItems:"center",justifyContent:"center"}},l.value))}return f.createElement("div",{key:o,style:n})};export{M as V,be as g,ye as i};
