import{r as F}from"./index-CTZeEbLr.js";let d;typeof window<"u"?d=window:typeof self<"u"?d=self:d=global;let R=null,b=null;const N=20,E=d.clearTimeout,C=d.setTimeout,L=d.cancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelAnimationFrame,x=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame;L==null||x==null?(R=E,b=function(a){return C(a,N)}):(R=function([a,t]){L(a),E(t)},b=function(a){const t=x(function(){E(l),a()}),l=C(function(){L(t),a()},N);return[t,l]});function A(p){let a,t,l,_,f,g,u;const m=typeof document<"u"&&document.attachEvent;if(!m){g=function(i){const s=i.__resizeTriggers__,h=s.firstElementChild,w=s.lastElementChild,y=h.firstElementChild;w.scrollLeft=w.scrollWidth,w.scrollTop=w.scrollHeight,y.style.width=h.offsetWidth+1+"px",y.style.height=h.offsetHeight+1+"px",h.scrollLeft=h.scrollWidth,h.scrollTop=h.scrollHeight},f=function(i){return i.offsetWidth!==i.__resizeLast__.width||i.offsetHeight!==i.__resizeLast__.height},u=function(i){if(i.target.className&&typeof i.target.className.indexOf=="function"&&i.target.className.indexOf("contract-trigger")<0&&i.target.className.indexOf("expand-trigger")<0)return;const s=this;g(this),this.__resizeRAF__&&R(this.__resizeRAF__),this.__resizeRAF__=b(function(){f(s)&&(s.__resizeLast__.width=s.offsetWidth,s.__resizeLast__.height=s.offsetHeight,s.__resizeListeners__.forEach(function(y){y.call(s,i)}))})};let e=!1,n="";l="animationstart";const r="Webkit Moz O ms".split(" ");let o="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),c="";{const i=document.createElement("fakeelement");if(i.style.animationName!==void 0&&(e=!0),e===!1){for(let s=0;s<r.length;s++)if(i.style[r[s]+"AnimationName"]!==void 0){c=r[s],n="-"+c.toLowerCase()+"-",l=o[s],e=!0;break}}}t="resizeanim",a="@"+n+"keyframes "+t+" { from { opacity: 0; } to { opacity: 0; } } ",_=n+"animation: 1ms "+t+"; "}const z=function(e){if(!e.getElementById("detectElementResize")){const n=(a||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],o=e.createElement("style");o.id="detectElementResize",o.type="text/css",p!=null&&o.setAttribute("nonce",p),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(e.createTextNode(n)),r.appendChild(o)}};return{addResizeListener:function(e,n){if(m)e.attachEvent("onresize",n);else{if(!e.__resizeTriggers__){const r=e.ownerDocument,o=d.getComputedStyle(e);o&&o.position==="static"&&(e.style.position="relative"),z(r),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=r.createElement("div")).className="resize-triggers";const c=r.createElement("div");c.className="expand-trigger",c.appendChild(r.createElement("div"));const i=r.createElement("div");i.className="contract-trigger",e.__resizeTriggers__.appendChild(c),e.__resizeTriggers__.appendChild(i),e.appendChild(e.__resizeTriggers__),g(e),e.addEventListener("scroll",u,!0),l&&(e.__resizeTriggers__.__animationListener__=function(h){h.animationName===t&&g(e)},e.__resizeTriggers__.addEventListener(l,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(n)}},removeResizeListener:function(e,n){if(m)e.detachEvent("onresize",n);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",u,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(l,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch{}}}}}class W extends F.Component{constructor(...a){super(...a),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:t,disableWidth:l,onResize:_}=this.props;if(this._parentNode){const f=window.getComputedStyle(this._parentNode)||{},g=parseFloat(f.paddingLeft||"0"),u=parseFloat(f.paddingRight||"0"),m=parseFloat(f.paddingTop||"0"),z=parseFloat(f.paddingBottom||"0"),v=this._parentNode.getBoundingClientRect(),T=v.height-m-z,e=v.width-g-u,n=this._parentNode.offsetHeight-m-z,r=this._parentNode.offsetWidth-g-u;(!t&&(this.state.height!==n||this.state.scaledHeight!==T)||!l&&(this.state.width!==r||this.state.scaledWidth!==e))&&(this.setState({height:n,width:r,scaledHeight:T,scaledWidth:e}),typeof _=="function"&&_({height:n,scaledHeight:T,scaledWidth:e,width:r}))}},this._setRef=t=>{this._autoSizer=t}}componentDidMount(){const{nonce:a}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(t!=null&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const l=t.ownerDocument.defaultView.ResizeObserver;l!=null?(this._resizeObserver=new l(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(t)):(this._detectElementResize=A(a),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:a,defaultHeight:t,defaultWidth:l,disableHeight:_=!1,disableWidth:f=!1,doNotBailOutOnEmptyChildren:g=!1,nonce:u,onResize:m,style:z={},tagName:v="div",...T}=this.props,{height:e,scaledHeight:n,scaledWidth:r,width:o}=this.state,c={overflow:"visible"},i={};let s=!1;return _||(e===0&&(s=!0),c.height=0,i.height=e,i.scaledHeight=n),f||(o===0&&(s=!0),c.width=0,i.width=o,i.scaledWidth=r),g&&(s=!1),F.createElement(v,{ref:this._setRef,style:{...c,...z},...T},!s&&a(i))}}export{W as A};
