import{j as h}from"./jsx-runtime-lwGtIXvq.js";import{r as o}from"./index-CTZeEbLr.js";import{c as N}from"./index-BpvXyOxN.js";import{F as Q}from"./FieldLabel-CWYzwerV.js";import{T as X}from"./Text-DVNPP_6L.js";import{I as k}from"./IconButton-H10RwFPB.js";import{F as L}from"./Flex-Bimzf4jb.js";import{g as Y}from"./typesciptCssModulesHelper-Ji7rRrZn.js";import{n as Z}from"./Workspace-CefzN9Lt.js";import{r as O}from"./DropdownChevronDown-Ck7VmPfy.js";import{u as ee}from"./useMergeRef-Do2VYePL.js";import{C as te}from"./test-ids-utils-BiWUJdxm.js";import{B as ne}from"./BaseInput-CEZwDVEp.js";import{I as ae}from"./Icon-CMBPUOKb.js";const K=({value:e,direction:i,step:a=1,min:t,max:s,allowOutOfBounds:m})=>{let n=(e??0)+i*a;return m||(t!==void 0&&(n=Math.max(t,n)),s!==void 0&&(n=Math.min(s,n))),n},ie=({value:e,onChange:i,min:a,max:t,step:s=1,disabled:m,readOnly:d,allowOutOfBounds:n,onValidityChange:u})=>{const[f,c]=o.useState(e===null?"":String(e));o.useEffect(()=>{const r=e===null?"":String(e);c(l=>e!==parseFloat(l)?r:l)},[e]);const b=o.useCallback(r=>{const l=r.target.value;if(l===""){c(""),i(null,r);return}if(!/^-?\d*\.?\d*$/.test(l))return;c(l);const I=l==="-"||l.endsWith(".");if(I&&l.length===1&&l.endsWith(".")){i(0,r);return}if(!I){const _=parseFloat(l);if(n){_!==e&&i(_,r);return}const q=Math.max(a??-1/0,Math.min(t??1/0,_));q!==e&&i(q,r)}},[i,n,a,t,e]);o.useEffect(()=>{if(!u)return;if(e===null){u(!0);return}const r=(a===void 0||e>=a)&&(t===void 0||e<=t);u(r)},[e,a,t,u]);const x=o.useCallback(r=>{if(m||d)return;const l=r.key==="ArrowUp",p=r.key==="ArrowDown";if(l||p){r.preventDefault();const _=K({value:e,direction:l?1:-1,step:s,min:a,max:t,allowOutOfBounds:n});i(_,r)}},[e,s,a,t,i,m,d,n]),v=!n&&e!==null&&a!==void 0&&e<=a,y=!n&&e!==null&&t!==void 0&&e>=t;return{inputValue:f,numericValue:e,onChange:b,onKeyDown:x,isAtMin:v,isAtMax:y}},re=({onChange:e,value:i,step:a=1,min:t,max:s,allowOutOfBounds:m,readOnly:d,inputRef:n})=>{const u=o.useCallback((b,x)=>{var y;if(d)return;const v=K({value:i,direction:b,step:a,min:t,max:s,allowOutOfBounds:m});e(v,x),(y=n.current)==null||y.focus()},[i,a,t,s,e,m,d,n]),f=o.useCallback(b=>{u(1,b)},[u]),c=o.useCallback(b=>{u(-1,b)},[u]);return{onIncrement:f,onDecrement:c}},le="_infoText_x571r_1",se="_error_x571r_4",ue="_success_x571r_7",oe="_disabled_x571r_10",de="_readOnly_x571r_13",g={infoText:le,error:se,success:ue,disabled:oe,readOnly:de},M=o.forwardRef(({id:e,text:i,error:a,success:t,disabled:s,readOnly:m},d)=>i?h.jsx(X,{id:e,ref:d,className:N(g.infoText,{[g.error]:a,[g.success]:t,[g.disabled]:s,[g.readOnly]:m}),type:"text2",children:i}):null);try{M.displayName="InfoText",M.__docgenInfo={description:"",displayName:"InfoText",props:{id:{defaultValue:null,description:"The ID of the associated form element for aria-describedby.",name:"id",required:!0,type:{name:"string"}},text:{defaultValue:null,description:"The text content to display.",name:"text",required:!0,type:{name:"string"}},error:{defaultValue:null,description:"If true, applies error styling to the info text.",name:"error",required:!1,type:{name:"boolean"}},success:{defaultValue:null,description:"If true, applies success styling to the info text.",name:"success",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, applies disabled styling to the info text.",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"If true, applies read-only styling to the info text.",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const ce="_spinButton_1s2lh_1",me="_large_1s2lh_1",pe="_icon_1s2lh_5",fe="_medium_1s2lh_9",be="_small_1s2lh_17",w={spinButton:ce,large:me,icon:pe,medium:fe,small:be},V=({inputId:e,onIncrement:i,onDecrement:a,disabled:t,size:s,isAtMin:m,isAtMax:d})=>{const n=N(w.spinButton,Y(w,s)),u=w.icon,f=c=>{c.preventDefault()};return h.jsxs(L,{direction:"column",align:"stretch",justify:"center",onMouseDown:f,children:[h.jsx(k,{ariaLabel:"Increase",hideTooltip:!0,ariaControls:e,tabIndex:-1,onClick:i,disabled:t||d,size:null,className:n,iconClassName:u,icon:Z}),h.jsx(k,{ariaLabel:"Decrease",hideTooltip:!0,ariaControls:e,tabIndex:-1,onClick:a,disabled:t||m,size:null,className:n,iconClassName:u,icon:O})]})};try{V.displayName="NumberFieldSpinButton",V.__docgenInfo={description:"",displayName:"NumberFieldSpinButton",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},onIncrement:{defaultValue:null,description:"",name:"onIncrement",required:!0,type:{name:"(event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void"}},onDecrement:{defaultValue:null,description:"",name:"onDecrement",required:!0,type:{name:"(event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>) => void"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:'"small" | "medium" | "large"'}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},isAtMin:{defaultValue:null,description:"",name:"isAtMin",required:!1,type:{name:"boolean"}},isAtMax:{defaultValue:null,description:"",name:"isAtMax",required:!1,type:{name:"boolean"}}}}}catch{}const he="_numberField_tq3pf_1",ye="_label_tq3pf_4",_e="_leftIcon_tq3pf_7",T={numberField:he,label:ye,leftIcon:_e},B=o.forwardRef(({className:e,value:i,onChange:a,label:t,required:s,placeholder:m,infoText:d,error:n,success:u,disabled:f,readOnly:c,min:b,max:x,step:v=1,size:y="medium",leftIcon:r,"aria-label":l,id:p,"data-testid":I,allowOutOfBounds:_,onValidityChange:q,...$},z)=>{const E=o.useRef(null),U=ee(z,E),{inputValue:W,numericValue:F,onChange:H,onKeyDown:P,isAtMin:C,isAtMax:D}=ie({value:i,onChange:a,min:b,max:x,step:v,disabled:f,readOnly:c,allowOutOfBounds:_,onValidityChange:q}),{onIncrement:A,onDecrement:R}=re({onChange:a,value:F,step:v,min:b,max:x,allowOutOfBounds:_,readOnly:c,inputRef:E}),G=o.useMemo(()=>r?h.jsx(ae,{icon:r,className:T.leftIcon}):null,[r]),J=o.useMemo(()=>h.jsx(V,{inputId:p,onIncrement:A,onDecrement:R,disabled:f||c,size:y,isAtMin:C,isAtMax:D}),[p,A,R,f,c,y,C,D]),j=o.useMemo(()=>d&&p?`${p}-info-text`:void 0,[d,p]),S=o.useMemo(()=>t&&p?`${p}-label`:void 0,[t,p]);return h.jsxs(L,{direction:"column",align:"stretch",gap:"xs",className:N(T.numberField,e),"data-vibe":te.NUMBER_FIELD,children:[h.jsx(Q,{id:S,className:T.label,labelText:t,required:s,labelFor:p}),h.jsx(ne,{...$,"data-testid":I,ref:U,id:p,value:W,onChange:H,onKeyDown:P,placeholder:m,type:"text",inputMode:"numeric",inputRole:"spinbutton","aria-valuenow":F,"aria-valuemin":b,"aria-valuemax":x,"aria-required":s,"aria-label":l||t,"aria-labelledby":S,"aria-describedby":j,disabled:f,readOnly:c,size:y,error:n,success:u,renderLeft:G,renderRight:J}),h.jsx(M,{id:j,text:d,error:n,success:u,disabled:f,readOnly:c})]})});try{B.displayName="NumberField",B.__docgenInfo={description:"",displayName:"NumberField",props:{value:{defaultValue:null,description:"The current value of the number field.",name:"value",required:!0,type:{name:"number"}},onChange:{defaultValue:null,description:`Callback fired when the value changes.
@param value - The new value.
@param event - The event that triggered the change.`,name:"onChange",required:!0,type:{name:"(value: number, event: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element> | ChangeEvent<HTMLInputElement>) => void"}},required:{defaultValue:null,description:"If true, the input will be required.",name:"required",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"The placeholder text to display when the input is empty.",name:"placeholder",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"If true, the input will be in an error state.",name:"error",required:!1,type:{name:"boolean"}},success:{defaultValue:null,description:"If true, the input will be in a success state.",name:"success",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, the input will be disabled.",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"If true, the input will be read-only.",name:"readOnly",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"The minimum value allowed.",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"The maximum value allowed.",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"The amount to increment or decrement the value by.",name:"step",required:!1,type:{name:"number"}},size:{defaultValue:{value:"medium"},description:"The size of the input.",name:"size",required:!1,type:{name:'"small" | "medium" | "large"'}},leftIcon:{defaultValue:null,description:"An icon to display on the left side of the input.",name:"leftIcon",required:!1,type:{name:"SubIcon"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"The label for the input.",name:"label",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"The id of the input.\nRequired when `label` or `infoText` is provided for accessibility reasons.\nThe id of the input.\nRequired when `infoText` or `label` is provided for accessibility reasons.\nThe id of the input.",name:"id",required:!1,type:{name:"string"}},infoText:{defaultValue:null,description:"Informational text to display below the input.\nInformational text to display below the input.\nIf provided, an `id` is also required for accessibility.",name:"infoText",required:!1,type:{name:"string"}},allowOutOfBounds:{defaultValue:null,description:"If false, the value will be clamped to the min/max values on change.\nIf true, the value can exceed the min/max values.\nCan be used alongside `onValidityChange` to handle the validity of the value.",name:"allowOutOfBounds",required:!1,type:{name:"boolean"}},onValidityChange:{defaultValue:null,description:"Callback fired when the validity of the value changes (if it is within the min/max bounds).",name:"onValidityChange",required:!1,type:{name:"(isValid: boolean) => void"}}}}}catch{}export{B as N};
