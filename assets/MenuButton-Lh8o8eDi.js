import{j as l}from"./jsx-runtime-lwGtIXvq.js";import{r as n,R as y}from"./index-CTZeEbLr.js";import{c as ve}from"./index-BpvXyOxN.js";import{r as Ee}from"./index-8JwjhRSi.js";import{D as i,T as we}from"./Tooltip-BrDhcDk7.js";import{D as C}from"./DialogContentContainer-CyLYKep7.js";import{u as Se}from"./useIsomorphicLayoutEffect-CtfxbExD.js";import{u as Ve}from"./useMergeRef-C008K4k9.js";import{a as qe,S as Ie}from"./Button-lmknnYep.js";import{H as xe,b as Me,D as Oe}from"./DialogConstants-DkeX1sw_.js";import{N as _}from"./function-utils-CSFuT5hl.js";import{g as U}from"./typesciptCssModulesHelper-oFWQo8l_.js";import{a as Ne,g as ze,C as De}from"./test-ids-utils-CSfXomCJ.js";import{r as Ae}from"./Workspace-DtDO7RvQ.js";import{c as Pe}from"./camelCase-CO1PkVrH.js";import{w as ke}from"./withStaticProps-DfSG2La2.js";var H=(t=>(t.XXS="xxs",t.XS="xs",t.SMALL="small",t.MEDIUM="medium",t.LARGE="large",t))(H||{}),Y=(t=>(t.START="start",t.END="end",t))(Y||{});const Le="_wrapper_17m2u_2",Re="_active_17m2u_56",Be="_sizeXxs_17m2u_68",Ke="_sizeXs_17m2u_76",Ue="_sizeSmall_17m2u_84",Xe="_sizeMedium_17m2u_92",je="_sizeLarge_17m2u_101",He="_disabled_17m2u_110",Ye="_text_17m2u_121",Fe="_innerText_17m2u_125",o={wrapper:Le,"focus-visible":"_focus-visible_17m2u_28",active:Re,sizeXxs:Be,sizeXs:Ke,sizeSmall:Ue,sizeMedium:Xe,sizeLarge:je,disabled:He,text:Ye,innerText:Fe},X={main:8,secondary:0},j=[i.hideShowTriggers.ESCAPE_KEY,i.hideShowTriggers.TAB_KEY],b=n.forwardRef(({id:t,className:F,openDialogComponentClassName:v,children:E,component:W=Ae,componentPosition:w="start",size:c="small",open:f=!1,onClick:Z=_,zIndex:$=null,ariaLabel:G="Menu",closeMenuOnItemClick:S,dialogOffset:V=X,dialogPosition:J=i.positions.BOTTOM_START,dialogClassName:Q,dialogPaddingSize:q=C.sizes.SMALL,dialogShowTriggerIgnoreClass:ee,dialogHideTriggerIgnoreClass:te,onMenuHide:I=_,onMenuShow:x=_,disabled:u=!1,text:m,tooltipContent:ne,tooltipProps:ie,tooltipTriggers:ae=["mouseleave"],tooltipPosition:oe="right",startingEdge:re="bottom",removeTabCloseTrigger:M=!1,tooltipReferenceClassName:se,hideWhenReferenceHidden:O=!0,dialogContainerSelector:le,active:ue,triggerElement:g="button",showTooltipOnlyOnTriggerElement:de,"data-testid":me,closeDialogOnContentClick:N=!1,ariaControls:pe},ce)=>{const z=n.useRef(null),D=Ve(ce,z),[r,d]=n.useState(f),A=ue??r,p=n.useCallback(e=>{I(),d(!1);const a=z.current;!a||!e||window.requestAnimationFrame(()=>{a.focus()})},[I]),P=n.useCallback(e=>{const a=j.includes(e.key);(a||S)&&e.propagate&&p(a)},[S,p]),fe=n.useCallback((e,a)=>{p(r&&j.includes(a))},[p,r]),ge=n.useCallback(()=>{d(!0),x()},[d,x]),[h,he]=n.useMemo(()=>{const e=new Set([i.hideShowTriggers.CLICK_OUTSIDE,i.hideShowTriggers.TAB_KEY,i.hideShowTriggers.ESCAPE_KEY]);return N&&(e.add(i.hideShowTriggers.CONTENT_CLICK),e.add(i.hideShowTriggers.ENTER)),M&&e.delete(i.hideShowTriggers.TAB_KEY),[y.Children.toArray(E).map(s=>{if(!y.isValidElement(s))return null;const T={};return s.type&&s.type.supportFocusOnMount&&(T.focusOnMount=!0,e.delete(i.hideShowTriggers.ESCAPE_KEY)),s.type&&s.type.isMenu&&(T.onClose=P),y.cloneElement(s,T)}),Array.from(e)]},[E,P,N,M]),Te=n.useMemo(()=>h.length===0?null:l.jsx(C,{size:q,type:C.types.POPOVER,role:null,children:h}),[h,q]),ye=n.useMemo(()=>({...X,...V}),[V]),Ce=e=>{if(u){e.currentTarget.blur();return}Z(e)},k=W,_e=n.useMemo(()=>{switch(c){case"xxs":case"xs":return Ie;case"small":case"medium":case"large":return qe;default:return 24}},[c]),L=k?l.jsx(k,{size:_e.toString(),role:"img","aria-hidden":"true"}):null;Se(()=>{d(f)},[f,d]);const be=g==="button"?{ref:D}:{active:A,disabled:u,ref:Ee.isForwardRef(g)?D:void 0},R=l.jsxs(g,{id:t,"data-testid":me||ze(De.MENU_BUTTON,t),"data-vibe":Ne.MENU_BUTTON,type:"button",className:ve(o.wrapper,F,U(o,Pe(`size-${c}`)),{[o.active]:A,[U(o,v)]:r&&v,[o.disabled]:u,[o.text]:m}),"aria-haspopup":"true","aria-expanded":r,"aria-controls":pe,"aria-label":!m&&G,onMouseUp:Ce,"aria-disabled":u,...be,children:[w==="start"&&L,m&&l.jsx("span",{className:o.innerText,children:m}),w==="end"&&L]}),B=e=>l.jsx(i,{wrapperClassName:Q,position:J,containerSelector:le,startingEdge:re,animationType:"expand",content:Te,moveBy:ye,showTrigger:u?[]:["click","enter"],hideTrigger:he,showTriggerIgnoreClass:ee,hideTriggerIgnoreClass:te,useDerivedStateFromProps:!0,onDialogDidShow:ge,onDialogDidHide:fe,zIndex:$,isOpen:r,hideWhenReferenceHidden:O,children:e}),K=e=>l.jsx(we,{content:ne,position:oe,showTrigger:"mouseenter",hideTrigger:ae,referenceWrapperClassName:se,hideWhenReferenceHidden:O,...ie,children:e});return de?B(K(R)):K(B(R))}),mt=ke(b,{sizes:H,paddingSizes:Oe,dialogPositions:Me,hideTriggers:xe,componentPositions:Y});try{b.displayName="MenuButton",b.__docgenInfo={description:"",displayName:"MenuButton",props:{active:{defaultValue:null,description:"If true, the button is in an active state.",name:"active",required:!1,type:{name:"boolean"}},openDialogComponentClassName:{defaultValue:null,description:"Class name applied to the button when the dialog is open.",name:"openDialogComponentClassName",required:!1,type:{name:"string"}},component:{defaultValue:null,description:"The component used as the button icon.",name:"component",required:!1,type:{name:"(() => Element) | ElementType<any, keyof IntrinsicElements>"}},size:{defaultValue:{value:"small"},description:"The size of the button.",name:"size",required:!1,type:{name:"MenuButtonSize"}},open:{defaultValue:{value:"false"},description:"If true, the menu is open.",name:"open",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"Callback fired when the button is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>) => void"}},zIndex:{defaultValue:{value:"null"},description:"The z-index of the menu.",name:"zIndex",required:!1,type:{name:"number"}},ariaLabel:{defaultValue:{value:"Menu"},description:"The label of the button for accessibility.",name:"ariaLabel",required:!1,type:{name:"string"}},dialogClassName:{defaultValue:null,description:"Class name applied to the menu dialog wrapper.",name:"dialogClassName",required:!1,type:{name:"string"}},dialogOffset:{defaultValue:{value:"{ main: 8, secondary: 0 }"},description:"The offset of the menu relative to the button.",name:"dialogOffset",required:!1,type:{name:"DialogOffset"}},dialogPaddingSize:{defaultValue:{value:"DialogContentContainer.sizes.SMALL"},description:"The padding size inside the menu dialog.",name:"dialogPaddingSize",required:!1,type:{name:"DialogSize"}},dialogPosition:{defaultValue:{value:"Dialog.positions.BOTTOM_START"},description:"The position of the menu dialog relative to the button.",name:"dialogPosition",required:!1,type:{name:"DialogPosition"}},dialogShowTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent showing the dialog when present.",name:"dialogShowTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogHideTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent hiding the dialog when present.",name:"dialogHideTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogContainerSelector:{defaultValue:null,description:"The container selector in which to append the dialog.",name:"dialogContainerSelector",required:!1,type:{name:"string"}},startingEdge:{defaultValue:{value:"bottom"},description:"The starting edge alignment of the menu.",name:"startingEdge",required:!1,type:{name:"string"}},onMenuShow:{defaultValue:null,description:"Callback fired when the menu is shown.",name:"onMenuShow",required:!1,type:{name:"() => void"}},onMenuHide:{defaultValue:null,description:"Callback fired when the menu is hidden.",name:"onMenuHide",required:!1,type:{name:"() => void"}},text:{defaultValue:null,description:"The text displayed inside the button.",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If true, the button is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},tooltipContent:{defaultValue:null,description:"The tooltip content displayed when hovering over the button.",name:"tooltipContent",required:!1,type:{name:"string"}},removeTabCloseTrigger:{defaultValue:{value:"false"},description:"If true, removes the tab key from the hide trigger.",name:"removeTabCloseTrigger",required:!1,type:{name:"boolean"}},tooltipTriggers:{defaultValue:{value:'["mouseleave"]'},description:"The triggers that cause the tooltip to show or hide.",name:"tooltipTriggers",required:!1,type:{name:"DialogTriggerEvent | DialogTriggerEvent[]"}},tooltipPosition:{defaultValue:{value:"right"},description:"The position of the tooltip.",name:"tooltipPosition",required:!1,type:{name:"TooltipPositions"}},tooltipReferenceClassName:{defaultValue:null,description:"Class name applied to the tooltip reference wrapper.",name:"tooltipReferenceClassName",required:!1,type:{name:"string"}},tooltipProps:{defaultValue:null,description:"Additional props for customizing the tooltip.",name:"tooltipProps",required:!1,type:{name:"Partial<TooltipProps>"}},hideWhenReferenceHidden:{defaultValue:{value:"true"},description:"If true, hides the menu and tooltip when the button is not visible.",name:"hideWhenReferenceHidden",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The content inside the menu button.",name:"children",required:!1,type:{name:"ElementContent"}},componentPosition:{defaultValue:{value:"start"},description:"The position of the component relative to the text.",name:"componentPosition",required:!1,type:{name:"MenuButtonComponentPosition"}},triggerElement:{defaultValue:null,description:"The element used as the trigger for the menu.",name:"triggerElement",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},closeMenuOnItemClick:{defaultValue:null,description:"If true, closes the menu when a menu item is clicked.",name:"closeMenuOnItemClick",required:!1,type:{name:"boolean"}},showTooltipOnlyOnTriggerElement:{defaultValue:null,description:"If true, the tooltip appears only when hovering over the trigger element, not the menu dialog.",name:"showTooltipOnlyOnTriggerElement",required:!1,type:{name:"boolean"}},closeDialogOnContentClick:{defaultValue:{value:"false"},description:"If true, closes the menu when clicking inside the dialog.",name:"closeDialogOnContentClick",required:!1,type:{name:"boolean"}},ariaControls:{defaultValue:null,description:"The ARIA control of the menu button for accessibility.",name:"ariaControls",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{mt as M};
