import{j as l}from"./jsx-runtime-DDzbWKUH.js";import{r as a,R as T}from"./index-Hemj67b4.js";import{c as _e}from"./index-BpvXyOxN.js";import{r as Ee}from"./CSSTransition-usT7-fC7.js";import{D as n,T as we}from"./Tooltip-uiHJF00a.js";import{D as y}from"./DialogContentContainer-CZkltT8K.js";import{u as Se}from"./useIsomorphicLayoutEffect-FdvxY73P.js";import{u as Ve}from"./useMergeRef-DQ4XPFxl.js";import{a as qe,S as xe}from"./Button-dXlc__kx.js";import{H as Ie,b as Me,D as Oe}from"./DialogConstants-DkeX1sw_.js";import{N as C}from"./function-utils-6EQ2u6TA.js";import{g as U}from"./typesciptCssModulesHelper-Ji7rRrZn.js";import{a as Ne,g as ze,C as Ae}from"./test-ids-utils-9ISiqDto.js";import{r as De}from"./Workspace-BIJf5qCK.js";import{c as Pe}from"./camelCase-B8c2Dc7Y.js";import{w as ke}from"./withStaticProps-DfSG2La2.js";var H=(t=>(t.XXS="xxs",t.XS="xs",t.SMALL="small",t.MEDIUM="medium",t.LARGE="large",t))(H||{}),Y=(t=>(t.START="start",t.END="end",t))(Y||{});const Le="_wrapper_17m2u_2",Re="_active_17m2u_56",Be="_sizeXxs_17m2u_68",Ke="_sizeXs_17m2u_76",Ue="_sizeSmall_17m2u_84",Xe="_sizeMedium_17m2u_92",je="_sizeLarge_17m2u_101",He="_disabled_17m2u_110",Ye="_text_17m2u_121",Fe="_innerText_17m2u_125",o={wrapper:Le,"focus-visible":"_focus-visible_17m2u_28",active:Re,sizeXxs:Be,sizeXs:Ke,sizeSmall:Ue,sizeMedium:Xe,sizeLarge:je,disabled:He,text:Ye,innerText:Fe},X={main:8,secondary:0},j=[n.hideShowTriggers.ESCAPE_KEY,n.hideShowTriggers.TAB_KEY],b=a.forwardRef(({id:t,className:F,openDialogComponentClassName:_,children:E,component:W=De,componentPosition:w="start",size:c="small",open:f=!1,onClick:Z=C,zIndex:$=null,ariaLabel:G="Menu",closeMenuOnItemClick:S,dialogOffset:V=X,dialogPosition:J=n.positions.BOTTOM_START,dialogClassName:Q,dialogPaddingSize:q=y.sizes.SMALL,dialogShowTriggerIgnoreClass:ee,dialogHideTriggerIgnoreClass:te,onMenuHide:x=C,onMenuShow:I=C,disabled:u=!1,text:m,tooltipContent:ae,tooltipProps:ne,tooltipTriggers:ie=["mouseleave"],tooltipPosition:oe="right",startingEdge:re="bottom",removeTabCloseTrigger:M=!1,tooltipReferenceClassName:se,hideWhenReferenceHidden:O=!0,dialogContainerSelector:le,active:ue,triggerElement:g="button",showTooltipOnlyOnTriggerElement:de,"data-testid":me,closeDialogOnContentClick:N=!1,ariaControls:pe},ce)=>{const z=a.useRef(null),A=Ve(ce,z),[r,d]=a.useState(f),D=ue??r,p=a.useCallback(e=>{x(),d(!1);const i=z.current;!i||!e||window.requestAnimationFrame(()=>{i.focus()})},[x]),P=a.useCallback(e=>{const i=j.includes(e.key);(i||S)&&e.propagate&&p(i)},[S,p]),fe=a.useCallback((e,i)=>{p(r&&j.includes(i))},[p,r]),ge=a.useCallback(()=>{d(!0),I()},[d,I]),[h,he]=a.useMemo(()=>{const e=new Set([n.hideShowTriggers.CLICK_OUTSIDE,n.hideShowTriggers.TAB_KEY,n.hideShowTriggers.ESCAPE_KEY]);return N&&(e.add(n.hideShowTriggers.CONTENT_CLICK),e.add(n.hideShowTriggers.ENTER)),M&&e.delete(n.hideShowTriggers.TAB_KEY),[T.Children.toArray(E).map(s=>{if(!T.isValidElement(s))return null;const v={};return s.type&&s.type.supportFocusOnMount&&(v.focusOnMount=!0,e.delete(n.hideShowTriggers.ESCAPE_KEY)),s.type&&s.type.isMenu&&(v.onClose=P),T.cloneElement(s,v)}),Array.from(e)]},[E,P,N,M]),ve=a.useMemo(()=>h.length===0?null:l.jsx(y,{size:q,type:y.types.POPOVER,children:h}),[h,q]),Te=a.useMemo(()=>({...X,...V}),[V]),ye=e=>{if(u){e.currentTarget.blur();return}Z(e)},k=W,Ce=a.useMemo(()=>{switch(c){case"xxs":case"xs":return xe;case"small":case"medium":case"large":return qe;default:return 24}},[c]),L=k?l.jsx(k,{size:Ce.toString(),role:"img","aria-hidden":"true"}):null;Se(()=>{d(f)},[f,d]);const be=g==="button"?{ref:A}:{active:D,disabled:u,ref:Ee.isForwardRef(g)?A:void 0},R=l.jsxs(g,{id:t,"data-testid":me||ze(Ae.MENU_BUTTON,t),"data-vibe":Ne.MENU_BUTTON,type:"button",className:_e(o.wrapper,F,U(o,Pe(`size-${c}`)),{[o.active]:D,[U(o,_)]:r&&_,[o.disabled]:u,[o.text]:m}),"aria-haspopup":"true","aria-expanded":r,"aria-controls":pe,"aria-label":!m&&G,onMouseUp:ye,"aria-disabled":u,...be,children:[w==="start"&&L,m&&l.jsx("span",{className:o.innerText,children:m}),w==="end"&&L]}),B=e=>l.jsx(n,{wrapperClassName:Q,position:J,containerSelector:le,startingEdge:re,animationType:"expand",content:ve,moveBy:Te,showTrigger:u?[]:["click","enter"],hideTrigger:he,showTriggerIgnoreClass:ee,hideTriggerIgnoreClass:te,useDerivedStateFromProps:!0,onDialogDidShow:ge,onDialogDidHide:fe,zIndex:$,isOpen:r,hideWhenReferenceHidden:O,children:e}),K=e=>l.jsx(we,{content:ae,position:oe,showTrigger:"mouseenter",hideTrigger:ie,referenceWrapperClassName:se,hideWhenReferenceHidden:O,...ne,children:e});return de?B(K(R)):K(B(R))}),mt=ke(b,{sizes:H,paddingSizes:Oe,dialogPositions:Me,hideTriggers:Ie,componentPositions:Y});try{b.displayName="MenuButton",b.__docgenInfo={description:"",displayName:"MenuButton",props:{active:{defaultValue:null,description:"If true, the button is in an active state.",name:"active",required:!1,type:{name:"boolean"}},openDialogComponentClassName:{defaultValue:null,description:"Class name applied to the button when the dialog is open.",name:"openDialogComponentClassName",required:!1,type:{name:"string"}},component:{defaultValue:null,description:"The component used as the button icon.",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | (() => Element)"}},size:{defaultValue:{value:"small"},description:"The size of the button.",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"small"'},{value:'"large"'},{value:'"medium"'},{value:'"xxs"'}]}},open:{defaultValue:{value:"false"},description:"If true, the menu is open.",name:"open",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"Callback fired when the button is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>) => void"}},zIndex:{defaultValue:{value:"null"},description:"The z-index of the menu.",name:"zIndex",required:!1,type:{name:"number"}},ariaLabel:{defaultValue:{value:"Menu"},description:"The label of the button for accessibility.",name:"ariaLabel",required:!1,type:{name:"string"}},dialogClassName:{defaultValue:null,description:"Class name applied to the menu dialog wrapper.",name:"dialogClassName",required:!1,type:{name:"string"}},dialogOffset:{defaultValue:{value:"{ main: 8, secondary: 0 }"},description:"The offset of the menu relative to the button.",name:"dialogOffset",required:!1,type:{name:"DialogOffset"}},dialogPaddingSize:{defaultValue:{value:"DialogContentContainer.sizes.SMALL"},description:"The padding size inside the menu dialog.",name:"dialogPaddingSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"large"'},{value:'"medium"'},{value:'"none"'}]}},dialogPosition:{defaultValue:{value:"Dialog.positions.BOTTOM_START"},description:"The position of the menu dialog relative to the button.",name:"dialogPosition",required:!1,type:{name:"enum",value:[{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"left-start"'},{value:'"left-end"'},{value:'"right-start"'},{value:'"right-end"'}]}},dialogShowTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent showing the dialog when present.",name:"dialogShowTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogHideTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent hiding the dialog when present.",name:"dialogHideTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogContainerSelector:{defaultValue:null,description:"The container selector in which to append the dialog.",name:"dialogContainerSelector",required:!1,type:{name:"string"}},startingEdge:{defaultValue:{value:"bottom"},description:"The starting edge alignment of the menu.",name:"startingEdge",required:!1,type:{name:"string"}},onMenuShow:{defaultValue:null,description:"Callback fired when the menu is shown.",name:"onMenuShow",required:!1,type:{name:"() => void"}},onMenuHide:{defaultValue:null,description:"Callback fired when the menu is hidden.",name:"onMenuHide",required:!1,type:{name:"() => void"}},text:{defaultValue:null,description:"The text displayed inside the button.",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If true, the button is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},tooltipContent:{defaultValue:null,description:"The tooltip content displayed when hovering over the button.",name:"tooltipContent",required:!1,type:{name:"string"}},removeTabCloseTrigger:{defaultValue:{value:"false"},description:"If true, removes the tab key from the hide trigger.",name:"removeTabCloseTrigger",required:!1,type:{name:"boolean"}},tooltipTriggers:{defaultValue:{value:'["mouseleave"]'},description:"The triggers that cause the tooltip to show or hide.",name:"tooltipTriggers",required:!1,type:{name:"DialogTriggerEvent | DialogTriggerEvent[]"}},tooltipPosition:{defaultValue:{value:"right"},description:"The position of the tooltip.",name:"tooltipPosition",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},tooltipReferenceClassName:{defaultValue:null,description:"Class name applied to the tooltip reference wrapper.",name:"tooltipReferenceClassName",required:!1,type:{name:"string"}},tooltipProps:{defaultValue:null,description:"Additional props for customizing the tooltip.",name:"tooltipProps",required:!1,type:{name:"Partial<TooltipProps>"}},hideWhenReferenceHidden:{defaultValue:{value:"true"},description:"If true, hides the menu and tooltip when the button is not visible.",name:"hideWhenReferenceHidden",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The content inside the menu button.",name:"children",required:!1,type:{name:"ElementContent"}},componentPosition:{defaultValue:{value:"start"},description:"The position of the component relative to the text.",name:"componentPosition",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},triggerElement:{defaultValue:null,description:"The element used as the trigger for the menu.",name:"triggerElement",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},closeMenuOnItemClick:{defaultValue:null,description:"If true, closes the menu when a menu item is clicked.",name:"closeMenuOnItemClick",required:!1,type:{name:"boolean"}},showTooltipOnlyOnTriggerElement:{defaultValue:null,description:"If true, the tooltip appears only when hovering over the trigger element, not the menu dialog.",name:"showTooltipOnlyOnTriggerElement",required:!1,type:{name:"boolean"}},closeDialogOnContentClick:{defaultValue:{value:"false"},description:"If true, closes the menu when clicking inside the dialog.",name:"closeDialogOnContentClick",required:!1,type:{name:"boolean"}},ariaControls:{defaultValue:null,description:"The ARIA control of the menu button for accessibility.",name:"ariaControls",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{mt as M};
