import{j as l}from"./jsx-runtime-lwGtIXvq.js";import{r as n,R as y}from"./index-CTZeEbLr.js";import{c as ve}from"./index-BpvXyOxN.js";import{r as we}from"./index-8JwjhRSi.js";import{D as i,T as Ee}from"./Tooltip-CT7Hoq9W.js";import{D as C}from"./DialogContentContainer-vYpEsTib.js";import{u as Se}from"./useIsomorphicLayoutEffect-BBiFUoiz.js";import{u as Ve}from"./useMergeRef-Do2VYePL.js";import{H as qe,b as xe,D as Me}from"./DialogConstants-DkeX1sw_.js";import{N as b}from"./function-utils-C5K4iOy1.js";import{g as X}from"./typesciptCssModulesHelper-Ji7rRrZn.js";import{a as Ie,g as ze,C as De}from"./test-ids-utils-B1IbFLmr.js";import{r as Oe}from"./Workspace-DtDO7RvQ.js";import{c as Ne}from"./camelCase-CO1PkVrH.js";import{w as Ae}from"./withStaticProps-DfSG2La2.js";var Y=(t=>(t.XXS="xxs",t.XS="xs",t.SMALL="small",t.MEDIUM="medium",t.LARGE="large",t))(Y||{}),U=(t=>(t.START="start",t.END="end",t))(U||{});const Pe="_wrapper_17m2u_2",ke="_active_17m2u_56",Re="_sizeXxs_17m2u_68",Le="_sizeXs_17m2u_76",Be="_sizeSmall_17m2u_84",Ke="_sizeMedium_17m2u_92",Xe="_sizeLarge_17m2u_101",je="_disabled_17m2u_110",He="_text_17m2u_121",Ye="_innerText_17m2u_125",o={wrapper:Pe,"focus-visible":"_focus-visible_17m2u_28",active:ke,sizeXxs:Re,sizeXs:Le,sizeSmall:Be,sizeMedium:Ke,sizeLarge:Xe,disabled:je,text:He,innerText:Ye},j={main:8,secondary:0},H=[i.hideShowTriggers.ESCAPE_KEY,i.hideShowTriggers.TAB_KEY],_=n.forwardRef(({id:t,className:F,openDialogComponentClassName:v,children:w,component:W=Oe,componentPosition:E="start",size:c="small",open:f=!1,onClick:$=b,zIndex:G=null,ariaLabel:J="Menu",closeMenuOnItemClick:S,dialogOffset:V=j,dialogPosition:Q=i.positions.BOTTOM_START,dialogClassName:Z,dialogPaddingSize:q=C.sizes.SMALL,dialogShowTriggerIgnoreClass:ee,dialogHideTriggerIgnoreClass:te,onMenuHide:x=b,onMenuShow:M=b,disabled:u=!1,text:m,tooltipContent:ne,tooltipProps:ie,tooltipTriggers:ae=["mouseleave"],tooltipPosition:oe="right",startingEdge:re="bottom",removeTabCloseTrigger:I=!1,tooltipReferenceClassName:se,hideWhenReferenceHidden:z=!0,dialogContainerSelector:le,active:ue,triggerElement:g="button",showTooltipOnlyOnTriggerElement:de,"data-testid":me,closeDialogOnContentClick:D=!1,ariaControls:pe},ce)=>{const O=n.useRef(null),N=Ve(ce,O),[r,d]=n.useState(f),A=ue??r,p=n.useCallback(e=>{x(),d(!1);const a=O.current;!a||!e||window.requestAnimationFrame(()=>{a.focus()})},[x]),P=n.useCallback(e=>{const a=H.includes(e.key);(a||S)&&e.propagate&&p(a)},[S,p]),fe=n.useCallback((e,a)=>{p(r&&H.includes(a))},[p,r]),ge=n.useCallback(()=>{d(!0),M()},[d,M]),[h,he]=n.useMemo(()=>{const e=new Set([i.hideShowTriggers.CLICK_OUTSIDE,i.hideShowTriggers.TAB_KEY,i.hideShowTriggers.ESCAPE_KEY]);return D&&(e.add(i.hideShowTriggers.CONTENT_CLICK),e.add(i.hideShowTriggers.ENTER)),I&&e.delete(i.hideShowTriggers.TAB_KEY),[y.Children.toArray(w).map(s=>{if(!y.isValidElement(s))return null;const T={};return s.type&&s.type.supportFocusOnMount&&(T.focusOnMount=!0,e.delete(i.hideShowTriggers.ESCAPE_KEY)),s.type&&s.type.isMenu&&(T.onClose=P),y.cloneElement(s,T)}),Array.from(e)]},[w,P,D,I]),Te=n.useMemo(()=>h.length===0?null:l.jsx(C,{size:q,type:C.types.POPOVER,role:null,children:h}),[h,q]),ye=n.useMemo(()=>({...j,...V}),[V]),Ce=e=>{if(u){e.currentTarget.blur();return}$(e)},k=W,be=n.useMemo(()=>{switch(c){case"xxs":case"xs":return 16;case"small":case"medium":case"large":return 20;default:return 24}},[c]),R=k?l.jsx(k,{size:be.toString(),role:"img","aria-hidden":"true"}):null;Se(()=>{d(f)},[f,d]);const _e=g==="button"?{ref:N}:{active:A,disabled:u,ref:we.isForwardRef(g)?N:void 0},L=l.jsxs(g,{id:t,"data-testid":me||ze(De.MENU_BUTTON,t),"data-vibe":Ie.MENU_BUTTON,type:"button",className:ve(o.wrapper,F,X(o,Ne(`size-${c}`)),{[o.active]:A,[X(o,v)]:r&&v,[o.disabled]:u,[o.text]:m}),"aria-haspopup":"true","aria-expanded":r,"aria-controls":pe,"aria-label":!m&&J,onMouseUp:Ce,"aria-disabled":u,..._e,children:[E==="start"&&R,m&&l.jsx("span",{className:o.innerText,children:m}),E==="end"&&R]}),B=e=>l.jsx(i,{wrapperClassName:Z,position:Q,containerSelector:le,startingEdge:re,animationType:"expand",content:Te,moveBy:ye,showTrigger:u?[]:["click","enter"],hideTrigger:he,showTriggerIgnoreClass:ee,hideTriggerIgnoreClass:te,useDerivedStateFromProps:!0,onDialogDidShow:ge,onDialogDidHide:fe,zIndex:G,isOpen:r,hideWhenReferenceHidden:z,children:e}),K=e=>l.jsx(Ee,{content:ne,position:oe,showTrigger:"mouseenter",hideTrigger:ae,referenceWrapperClassName:se,hideWhenReferenceHidden:z,...ie,children:e});return de?B(K(L)):K(B(L))}),lt=Ae(_,{sizes:Y,paddingSizes:Me,dialogPositions:xe,hideTriggers:qe,componentPositions:U});try{_.displayName="MenuButton",_.__docgenInfo={description:"",displayName:"MenuButton",props:{active:{defaultValue:null,description:"If true, the button is in an active state.",name:"active",required:!1,type:{name:"boolean"}},openDialogComponentClassName:{defaultValue:null,description:"Class name applied to the button when the dialog is open.",name:"openDialogComponentClassName",required:!1,type:{name:"string"}},component:{defaultValue:null,description:"The component used as the button icon.",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements> | (() => Element)"}},size:{defaultValue:{value:"small"},description:"The size of the button.",name:"size",required:!1,type:{name:"MenuButtonSize"}},open:{defaultValue:{value:"false"},description:"If true, the menu is open.",name:"open",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"Callback fired when the button is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>) => void"}},zIndex:{defaultValue:{value:"null"},description:"The z-index of the menu.",name:"zIndex",required:!1,type:{name:"number"}},ariaLabel:{defaultValue:{value:"Menu"},description:"The label of the button for accessibility.",name:"ariaLabel",required:!1,type:{name:"string"}},dialogClassName:{defaultValue:null,description:"Class name applied to the menu dialog wrapper.",name:"dialogClassName",required:!1,type:{name:"string"}},dialogOffset:{defaultValue:{value:"{ main: 8, secondary: 0 }"},description:"The offset of the menu relative to the button.",name:"dialogOffset",required:!1,type:{name:"DialogOffset"}},dialogPaddingSize:{defaultValue:{value:"DialogContentContainer.sizes.SMALL"},description:"The padding size inside the menu dialog.",name:"dialogPaddingSize",required:!1,type:{name:"DialogSize"}},dialogPosition:{defaultValue:{value:"Dialog.positions.BOTTOM_START"},description:"The position of the menu dialog relative to the button.",name:"dialogPosition",required:!1,type:{name:"DialogPosition"}},dialogShowTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent showing the dialog when present.",name:"dialogShowTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogHideTriggerIgnoreClass:{defaultValue:null,description:"Classes that prevent hiding the dialog when present.",name:"dialogHideTriggerIgnoreClass",required:!1,type:{name:"string | string[]"}},dialogContainerSelector:{defaultValue:null,description:"The container selector in which to append the dialog.",name:"dialogContainerSelector",required:!1,type:{name:"string"}},startingEdge:{defaultValue:{value:"bottom"},description:"The starting edge alignment of the menu.",name:"startingEdge",required:!1,type:{name:"string"}},onMenuShow:{defaultValue:null,description:"Callback fired when the menu is shown.",name:"onMenuShow",required:!1,type:{name:"() => void"}},onMenuHide:{defaultValue:null,description:"Callback fired when the menu is hidden.",name:"onMenuHide",required:!1,type:{name:"() => void"}},text:{defaultValue:null,description:"The text displayed inside the button.",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If true, the button is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},tooltipContent:{defaultValue:null,description:"The tooltip content displayed when hovering over the button.",name:"tooltipContent",required:!1,type:{name:"string"}},removeTabCloseTrigger:{defaultValue:{value:"false"},description:"If true, removes the tab key from the hide trigger.",name:"removeTabCloseTrigger",required:!1,type:{name:"boolean"}},tooltipTriggers:{defaultValue:{value:'["mouseleave"]'},description:"The triggers that cause the tooltip to show or hide.",name:"tooltipTriggers",required:!1,type:{name:"DialogTriggerEvent | DialogTriggerEvent[]"}},tooltipPosition:{defaultValue:{value:"right"},description:"The position of the tooltip.",name:"tooltipPosition",required:!1,type:{name:"TooltipPositions"}},tooltipReferenceClassName:{defaultValue:null,description:"Class name applied to the tooltip reference wrapper.",name:"tooltipReferenceClassName",required:!1,type:{name:"string"}},tooltipProps:{defaultValue:null,description:"Additional props for customizing the tooltip.",name:"tooltipProps",required:!1,type:{name:"Partial<TooltipProps>"}},hideWhenReferenceHidden:{defaultValue:{value:"true"},description:"If true, hides the menu and tooltip when the button is not visible.",name:"hideWhenReferenceHidden",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The content inside the menu button.",name:"children",required:!1,type:{name:"ElementContent"}},componentPosition:{defaultValue:{value:"start"},description:"The position of the component relative to the text.",name:"componentPosition",required:!1,type:{name:"MenuButtonComponentPosition"}},triggerElement:{defaultValue:null,description:"The element used as the trigger for the menu.",name:"triggerElement",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},closeMenuOnItemClick:{defaultValue:null,description:"If true, closes the menu when a menu item is clicked.",name:"closeMenuOnItemClick",required:!1,type:{name:"boolean"}},showTooltipOnlyOnTriggerElement:{defaultValue:null,description:"If true, the tooltip appears only when hovering over the trigger element, not the menu dialog.",name:"showTooltipOnlyOnTriggerElement",required:!1,type:{name:"boolean"}},closeDialogOnContentClick:{defaultValue:{value:"false"},description:"If true, closes the menu when clicking inside the dialog.",name:"closeDialogOnContentClick",required:!1,type:{name:"boolean"}},ariaControls:{defaultValue:null,description:"The ARIA control of the menu button for accessibility.",name:"ariaControls",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{lt as M};
