import{j as o}from"./jsx-runtime-lwGtIXvq.js";import{r as u,R as ae}from"./index-CTZeEbLr.js";import{c as C}from"./index-BpvXyOxN.js";import{C as ne}from"./Counter-Cu1tFSzY.js";import{M as re}from"./MenuButton-Dvwd0e1H.js";import{M as W}from"./useMenuItemKeyboardEvents-DmKbwaIK.js";import{M as ie}from"./MenuItem-CS8X1FCR.js";import{A as z,C as oe}from"./Avatar-GlG5KYPa.js";import{T as le}from"./Tooltip-BlFnX8EL.js";import{V as se}from"./VirtualizedList-DaYekoCX.js";import{u as v}from"./index-gB5zY9qh.js";import{u as X}from"./index-CkU0kzyk.js";import{u as ue}from"./index-BlWfPOxY.js";import{k as Z}from"./keyCodes-B-UZ88ng.js";import{F as V}from"./Flex-DIp2zxrn.js";import{g as de}from"./typesciptCssModulesHelper-DQ-2Bs84.js";import{a as pe}from"./constants-BFnbiwiw.js";const L=u.forwardRef(({avatarProps:e,menuItemProps:n,...l},i)=>{const t=u.useCallback(()=>o.jsx(z,{...e}),[e]);return o.jsx(ie,{...l,...n,icon:t,ref:i})});Object.assign(L,{isMenuChild:!0,isSelectable:!0});try{L.displayName="AvatarMenuItem",L.__docgenInfo={description:"MenuItem with Avatar instead of Icon",displayName:"AvatarMenuItem",props:{avatarProps:{defaultValue:null,description:"Props passed to the avatar component.",name:"avatarProps",required:!1,type:{name:"AvatarProps"}},menuItemProps:{defaultValue:null,description:"Props passed to the menu item component.",name:"menuItemProps",required:!1,type:{name:"MenuItemProps"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}},isMenuChild:{defaultValue:null,description:"",name:"isMenuChild",required:!1,type:{name:"boolean"}},isSelectable:{defaultValue:null,description:"",name:"isSelectable",required:!1,type:{name:"boolean"}}}}}catch{}const ce="_scrollableContainer_r3c0t_3",me="_virtualizedTooltipContainer_r3c0t_12",$={scrollableContainer:ce,virtualizedTooltipContainer:me},k=Object.freeze({maxItemsWithoutScroll:10,itemLineHeight:34,itemLineWidth:150}),j=({avatarItems:e=[],avatarRenderer:n,type:l,tooltipContainerAriaLabel:i,tooltipContentContainerRef:t})=>{const a=u.useMemo(()=>e.map(c=>({value:c,height:k.itemLineHeight})),[e]),s=Math.min(e.length,k.maxItemsWithoutScroll),r={height:k.itemLineHeight*s,minWidth:k.itemLineWidth};return o.jsx("div",{className:$.virtualizedTooltipContainer,"aria-label":i,ref:t,tabIndex:-1,children:o.jsx(se,{items:a,itemRenderer:(c,m,y)=>n(c.value,m,y,l,!1),role:"treegrid",scrollableClassName:$.scrollableContainer,getItemId:(c,m)=>String(m),style:r})})};try{j.displayName="AvatarGroupCounterTooltipContentVirtualizedList",j.__docgenInfo={description:"",displayName:"AvatarGroupCounterTooltipContentVirtualizedList",props:{avatarItems:{defaultValue:{value:"[]"},description:"The list of avatars displayed in the virtualized tooltip.",name:"avatarItems",required:!1,type:{name:"AvatarItem[]"}},avatarRenderer:{defaultValue:null,description:"Function to render each avatar item.",name:"avatarRenderer",required:!1,type:{name:"(item: AvatarItem, index: number, style: CSSProperties, type: AvatarType, displayAsGrid: boolean) => ReactElement<any, string | JSXElementConstructor<any>>"}},tooltipContainerAriaLabel:{defaultValue:null,description:"The ARIA label of the tooltip container.",name:"tooltipContainerAriaLabel",required:!1,type:{name:"string"}},tooltipContentContainerRef:{defaultValue:null,description:"Ref for the tooltip content container.",name:"tooltipContentContainerRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},type:{defaultValue:null,description:"The type of avatars in the tooltip.",name:"type",required:!1,type:{name:"AvatarType"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const fe="_tooltipAvatarItemTitle_14jbp_3",ye="_tooltipAvatarItemAvatar_14jbp_7",_e="_tooltipContainer_14jbp_11",he="_tooltipGridContainer_14jbp_23",ve="_scrollableContainer_14jbp_28",A={tooltipAvatarItemTitle:fe,tooltipAvatarItemAvatar:ye,tooltipContainer:_e,tooltipGridContainer:he,scrollableContainer:ve},Q=200,K=22,x=[Z.TAB],J=[Z.ESCAPE];function E({counterContainerRef:e=void 0,tooltipContentContainerRef:n,focusPrevPlaceholderRef:l,focusNextPlaceholderRef:i,isKeyboardTooltipVisible:t,setIsKeyboardTooltipVisible:a}){const s=u.useCallback(()=>{t||setTimeout(()=>a(!0),Q)},[t,a]),r=u.useCallback(()=>{t&&a(!1)},[t,a]);ue({ref:e,onFocusByKeyboard:s}),X({eventName:"blur",ref:n,callback:r}),v({keys:x,ref:e,withoutAnyModifier:!0,preventDefault:!0,callback:u.useCallback(()=>{t&&n!=null&&n.current&&n.current.focus()},[t,n])}),v({keys:x,modifier:v.modifiers.SHIFT,ref:e,callback:r}),v({keys:x,ref:n,withoutAnyModifier:!0,callback:u.useCallback(()=>{i!=null&&i.current&&i.current.focus(),t&&a(!1)},[i,t,a])}),v({keys:x,ref:n,modifier:v.modifiers.SHIFT,callback:u.useCallback(()=>{l!=null&&l.current&&l.current.focus(),t&&a(!1)},[l,t,a])}),v({keys:J,ref:n,callback:u.useCallback(()=>{e!=null&&e.current&&e.current.focus(),t&&a(!1)},[e,t,a])}),v({keys:J,ref:e,callback:r}),X({eventName:"focus",ref:i,callback:r})}const U=(e,n,l,i,t)=>{const a=e.value,s={...l,width:t?void 0:"100%"},r=`tooltip-item-${n}-label`;return o.jsx(oe,{isClickable:!!(a!=null&&a.onClick),clickableProps:{onClick:c=>a.onClick(c,a.id),tabIndex:"-1"},children:o.jsx("div",{style:s,children:o.jsxs(V,{direction:"row",gap:"xs",ariaLabelledby:r,children:[o.jsx(z,{...a,tooltipProps:void 0,ariaLabel:"",customSize:K,type:i||(a==null?void 0:a.type),tabIndex:-1,size:z.sizes.SMALL,className:A.tooltipAvatarItemAvatar}),!t&&o.jsx("div",{id:r,className:A.tooltipAvatarItemTitle,children:a.tooltipContent})]})})},n)};try{E.displayName="useTooltipContentTabNavigation",E.__docgenInfo={description:"",displayName:"useTooltipContentTabNavigation",props:{counterContainerRef:{defaultValue:{value:"undefined"},description:"",name:"counterContainerRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},tooltipContentContainerRef:{defaultValue:null,description:"",name:"tooltipContentContainerRef",required:!0,type:{name:"RefObject<HTMLElement>"}},focusPrevPlaceholderRef:{defaultValue:null,description:"",name:"focusPrevPlaceholderRef",required:!0,type:{name:"RefObject<HTMLDivElement>"}},focusNextPlaceholderRef:{defaultValue:null,description:"",name:"focusNextPlaceholderRef",required:!0,type:{name:"RefObject<HTMLDivElement>"}},isKeyboardTooltipVisible:{defaultValue:null,description:"",name:"isKeyboardTooltipVisible",required:!0,type:{name:"boolean"}},setIsKeyboardTooltipVisible:{defaultValue:null,description:"",name:"setIsKeyboardTooltipVisible",required:!0,type:{name:"(value: boolean) => void"}}}}}catch{}const R=({avatars:e=[],type:n,className:l,isVirtualizedList:i=!1,tooltipContentContainerRef:t})=>{const a=u.useCallback(d=>{var f;return((f=d==null?void 0:d.tooltipProps)==null?void 0:f.content)||(d==null?void 0:d.ariaLabel)},[]),{avatarItems:s,displayAsGrid:r,tooltipContainerAriaLabel:c}=u.useMemo(()=>{const d=e.map(p=>({value:{...p.props,tooltipContent:a(p.props)}})),f=!d.some(p=>p.value.tooltipContent),_=f?void 0:d.map(p=>p.value.tooltipContent).join(",");return{avatarItems:d,displayAsGrid:f,tooltipContainerAriaLabel:_}},[e,a]),m=u.useMemo(()=>s.map((d,f)=>U(d,f,void 0,n,r)),[s,r,n]);if(i)return o.jsx(j,{avatarRenderer:U,tooltipContentContainerRef:t,tooltipContainerAriaLabel:c,avatarItems:s,type:n});const y={ref:t,tabIndex:-1,role:"treegrid",ariaLabel:c,className:r?C(A.scrollableContainer,A.tooltipContainer,A.tooltipGridContainer,l):C(A.scrollableContainer,A.tooltipContainer,l),direction:r?V.directions.ROW:V.directions.COLUMN,gap:r?V.gaps.XS:V.gaps.SMALL,wrap:r};return o.jsx(V,{...y,children:m})};try{R.displayName="AvatarGroupCounterTooltipContent",R.__docgenInfo={description:"",displayName:"AvatarGroupCounterTooltipContent",props:{type:{defaultValue:null,description:"The type of avatars displayed inside the tooltip.",name:"type",required:!1,type:{name:"AvatarType"}},avatars:{defaultValue:{value:"[]"},description:"The avatars shown in the tooltip.",name:"avatars",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},isVirtualizedList:{defaultValue:{value:"false"},description:"If true, the tooltip uses a virtualized list for performance optimization.",name:"isVirtualizedList",required:!1,type:{name:"boolean"}},tooltipContentContainerRef:{defaultValue:null,description:"Ref for the tooltip content container.",name:"tooltipContentContainerRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const G=({focusPrevPlaceholderRef:e,focusNextPlaceholderRef:n,counterContainerRef:l,children:i=[],avatars:t=[],type:a,className:s,counterTooltipCustomProps:r,counterTooltipIsVirtualizedList:c=!1})=>{const[m,y]=u.useState(!1),d=u.useRef(null),f=u.useMemo(()=>(r==null?void 0:r.content)||o.jsx(R,{avatars:t,type:a,className:s,isVirtualizedList:c,tooltipContentContainerRef:d}),[t,s,r==null?void 0:r.content,c,a]);E({counterContainerRef:l,tooltipContentContainerRef:d,focusPrevPlaceholderRef:e,focusNextPlaceholderRef:n,setIsKeyboardTooltipVisible:y,isKeyboardTooltipVisible:m});const _=u.useCallback(()=>{y(!1)},[]);return!(t!=null&&t.length)&&!(r!=null&&r.content)?o.jsx(o.Fragment,{children:i}):o.jsx(le,{open:m,hideDelay:Q,showTrigger:["mouseenter"],hideTrigger:["mouseleave"],onTooltipHide:_,...r||{},content:f,children:i})};try{G.displayName="AvatarGroupCounterTooltipContainer",G.__docgenInfo={description:"",displayName:"AvatarGroupCounterTooltipContainer",props:{type:{defaultValue:null,description:"The type of avatars displayed in the tooltip.",name:"type",required:!1,type:{name:"AvatarType"}},children:{defaultValue:{value:"[]"},description:"The counter element and focus placeholders.",name:"children",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>[]"}},avatars:{defaultValue:{value:"[]"},description:"The list of avatars displayed inside the tooltip.",name:"avatars",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},counterTooltipCustomProps:{defaultValue:null,description:"Props passed to the Tooltip component. See full options in the [Tooltip documentation](https://vibe.monday.com/?path=/docs/components-tooltip--docs).",name:"counterTooltipCustomProps",required:!1,type:{name:"Partial<TooltipProps>"}},counterTooltipIsVirtualizedList:{defaultValue:{value:"false"},description:"If true, the tooltip uses a virtualized list for performance optimization.",name:"counterTooltipIsVirtualizedList",required:!1,type:{name:"boolean"}},focusPrevPlaceholderRef:{defaultValue:null,description:"Ref for the element before the tooltip content, used for keyboard navigation.",name:"focusPrevPlaceholderRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},focusNextPlaceholderRef:{defaultValue:null,description:"Ref for the element after the tooltip content, used for keyboard navigation.",name:"focusNextPlaceholderRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},counterContainerRef:{defaultValue:null,description:"Ref for the counter container element.",name:"counterContainerRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const ee=(e,n)=>{var l;(l=n==null?void 0:n.onClick)==null||l.call(n,e,n.id)},ge="_counterContainer_svkgw_3",Ce="_xs_svkgw_24",Ae="_small_svkgw_30",be="_medium_svkgw_36",Te="_large_svkgw_42",Ve="_primary_svkgw_48",qe="_dark_svkgw_52",Ie="_negative_svkgw_56",ke="_light_svkgw_60",xe="_disabled_svkgw_64",Le="_menu_svkgw_69",g={counterContainer:ge,"focus-visible":"_focus-visible_svkgw_12",xs:Ce,small:Ae,medium:be,large:Te,primary:Ve,dark:qe,negative:Ie,light:ke,disabled:xe,menu:Le},w=({counterTooltipAvatars:e=[],counterProps:n,counterTooltipCustomProps:l,counterTooltipIsVirtualizedList:i=!1,size:t="medium",type:a,counterAriaLabel:s,disabled:r})=>{const{color:c="light",count:m=e.length,prefix:y="+",maxDigits:d=3,ariaLabelItemsName:f="items",noAnimation:_,dialogContainerSelector:p,tabIndex:S=0}=n||{},b=de(g,t==null?void 0:t.toString()),T=g[c],q=u.useRef(null),H=u.useRef(null),N=u.useRef(null),M=u.useCallback(()=>o.jsx(ne,{color:c,count:m,prefix:y,maxDigits:d,ariaLabel:s||`Tab for more ${f}`,noAnimation:_,counterClassName:C({[g.disabled]:r}),size:t==="xs"?"xs":void 0}),[s,f,c,d,y,m,r,_]);return!e.length&&!m?null:r?o.jsx("div",{ref:N,className:C(g.counterContainer,g.disabled,b,T),children:M()}):e.some(h=>{var I;return(I=h.props)==null?void 0:I.onClick})?o.jsx(re,{component:M,zIndex:1,className:C(g.counterContainer,b,T),ariaLabel:s||`${m} additional ${f}`,dialogContainerSelector:p,children:o.jsx(W,{id:"menu",size:W.sizes.MEDIUM,className:g.menu,focusItemIndexOnMount:0,children:e.map((h,I)=>{var O,D,P,F;return o.jsx(L,{menuItemProps:{key:((O=h.props)==null?void 0:O.id)||String(I),title:((P=(D=h.props)==null?void 0:D.tooltipProps)==null?void 0:P.content)||((F=h==null?void 0:h.props)==null?void 0:F.ariaLabel),onClick:te=>ee(te,h.props)},avatarProps:{...h.props,customSize:K,ariaLabel:"",tabIndex:-1}})})})}):o.jsxs(G,{focusPrevPlaceholderRef:q,focusNextPlaceholderRef:H,counterContainerRef:N,avatars:e,counterTooltipCustomProps:l,counterTooltipIsVirtualizedList:i,type:a,children:[o.jsx("div",{tabIndex:-1,ref:q}),o.jsxs("div",{tabIndex:S,className:C(g.counterContainer,b,T),ref:N,children:[M(),o.jsx("div",{tabIndex:-1,ref:H})]})]})};try{w.displayName="AvatarGroupCounter",w.__docgenInfo={description:"",displayName:"AvatarGroupCounter",props:{counterTooltipAvatars:{defaultValue:{value:"[]"},description:"The list of avatars hidden behind the counter.",name:"counterTooltipAvatars",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},counterProps:{defaultValue:null,description:"Props for customizing the counter appearance.",name:"counterProps",required:!1,type:{name:"AvatarGroupCounterVisualProps"}},counterTooltipCustomProps:{defaultValue:null,description:"Props for customizing the counter tooltip.",name:"counterTooltipCustomProps",required:!1,type:{name:"Partial<TooltipProps>"}},counterTooltipIsVirtualizedList:{defaultValue:{value:"false"},description:"If true, the counter tooltip uses a virtualized list for performance optimization.",name:"counterTooltipIsVirtualizedList",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"medium"},description:"The size of the counter.",name:"size",required:!1,type:{name:"AvatarSize"}},type:{defaultValue:null,description:"The type of the avatars in the counter.",name:"type",required:!1,type:{name:"AvatarType"}},counterAriaLabel:{defaultValue:null,description:"The label of the counter for accessibility.",name:"counterAriaLabel",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"If true, the counter is disabled and non-interactive.",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}const Se="_avatarGroupContainer_1g1uk_1",Ne="_avatarContainer_1g1uk_10",B={avatarGroupContainer:Se,avatarContainer:Ne},Y=({className:e,avatarClassName:n,id:l,children:i,size:t,type:a,max:s=5,counterProps:r,counterTooltipCustomProps:c,counterTooltipIsVirtualizedList:m=!1,disabled:y})=>{const{displayAvatars:d,counterTooltipAvatars:f}=u.useMemo(()=>{if(!i)return{};const _=Array.isArray(i)?i:[i];return{displayAvatars:_.slice(0,s).map((p,S)=>{var b,T;return ae.cloneElement(p,{key:S,...p==null?void 0:p.props,size:t||((b=p==null?void 0:p.props)==null?void 0:b.size),type:a||((T=p==null?void 0:p.props)==null?void 0:T.type),className:C(B.avatarContainer,n),onClick:q=>ee(q,p.props),disabled:y})}),counterTooltipAvatars:_.slice(s)}},[n,i,y,s,t,a]);return i?o.jsxs("div",{className:C(B.avatarGroupContainer,e),id:l,"data-vibe":pe.AVATAR_GROUP,children:[d,o.jsx(w,{counterTooltipAvatars:f,counterProps:r,counterTooltipCustomProps:c,counterTooltipIsVirtualizedList:m,size:t,type:a,disabled:y})]}):null};try{Y.displayName="AvatarGroup",Y.__docgenInfo={description:"",displayName:"AvatarGroup",props:{avatarClassName:{defaultValue:null,description:"Class name applied to each avatar.",name:"avatarClassName",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"The avatars displayed in the group.",name:"children",required:!1,type:{name:"ReactElement<AvatarProps, string | JSXElementConstructor<any>> | ReactElement<AvatarProps, string | JSXElementConstructor<any>>[]"}},size:{defaultValue:null,description:"The size of the avatars in the group.",name:"size",required:!1,type:{name:"AvatarSize"}},type:{defaultValue:null,description:"The type of the avatars in the group.",name:"type",required:!1,type:{name:"AvatarType"}},max:{defaultValue:{value:"5"},description:"The maximum number of avatars displayed before showing a counter.",name:"max",required:!1,type:{name:"number"}},counterProps:{defaultValue:null,description:"Props for customizing the counter display.",name:"counterProps",required:!1,type:{name:"AvatarGroupCounterVisualProps"}},counterTooltipCustomProps:{defaultValue:null,description:"Props passed to the Tooltip component. See full options in the [Tooltip documentation](https://vibe.monday.com/?path=/docs/components-tooltip--docs).",name:"counterTooltipCustomProps",required:!1,type:{name:"Partial<TooltipProps>"}},counterTooltipIsVirtualizedList:{defaultValue:{value:"false"},description:"If true, the counter tooltip uses a virtualized list for performance optimization.",name:"counterTooltipIsVirtualizedList",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, the component is disabled and non-interactive.",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"A CSS class name to apply to the component.",name:"className",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"A unique identifier for testing purposes.",name:"data-testid",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"An HTML id attribute for the component.",name:"id",required:!1,type:{name:"string"}}}}}catch{}export{Y as A};
